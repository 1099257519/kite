(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1161:function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"h",(function(){return u})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return _})),a.d(t,"c",(function(){return g})),a.d(t,"d",(function(){return p}));var n,i,r,c,s=a(1152),l=a.n(s),o={pendingReview:1,reviewSuccess:2,reviewFail:3,freeReview:4,deleted:5},u=(n={},l()(n,o.pendingReview,"待审核"),l()(n,o.reviewSuccess,"审核成功"),l()(n,o.reviewFail,"审核失败"),l()(n,o.freeReview,"免审核"),l()(n,o.deleted,"已删除"),n),f={pendingReview:1,reviewSuccess:2,reviewFail:3,freeReview:4},m=(i={},l()(i,f.pendingReview,"待审核"),l()(i,f.reviewSuccess,"审核成功"),l()(i,f.reviewFail,"审核失败"),l()(i,f.freeReview,"免审核"),i),d={article:1,note:2,draft:3},_=(r={},l()(r,d.article,"文章"),l()(r,d.note,"笔记"),l()(r,d.draft,"草稿"),r),g={dynamic:1,img:2,link:3,video:4},p=(c={},l()(c,g.dynamic,"默认动态"),l()(c,g.img,"图片"),l()(c,g.link,"链接"),l()(c,g.video,"视频"),c)},1162:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return o}));var n=a(138),i=function(e,t){return function(a){n.a.get("/user-role/list",e).then((function(e){return t&&t(e),a({type:"GET_USER_ROLE_LIST",data:e})}))}},r=function(e,t){return function(a){n.a.get("/user-role/all",e).then((function(e){t&&t(e)}))}},c=function(e,t){return function(a){n.a.post("/user-role/create",e).then((function(e){t&&t(e)}))}},s=function(e,t){return function(){n.a.post("/user-role/update",e).then((function(e){t&&t(e)}))}},l=function(e,t){return function(){n.a.post("/user-role/delete",e).then((function(e){t&&t(e)}))}},o=function(e,t){return function(a){n.a.post("/user-role-authority/set",e).then((function(e){t&&t(e)}))}}},1163:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return s}));var n=a(138),i=function(e,t){return function(a){n.a.post("/user-authority/create",e).then((function(e){t&&t(e)}))}};var r=function(e,t){return function(a){n.a.get("/user-authority/list",e).then((function(e){return t&&t(function e(t,a){var n=[];for(var i in t)t[i].authority_parent_id===a&&(t[i].children=e(t,t[i].authority_id),n.push(t[i]));return n}(e,"")),a({type:"GET_USER_AUTHORITY_LIST",data:e})}))}},c=function(e,t){return function(a){n.a.post("/user-authority/delete",e).then((function(e){t&&t(e)}))}},s=function(e,t){return function(a){n.a.post("/user-authority/update",e).then((function(e){t&&t(e)}))}}},1164:function(e,t,a){"use strict";function n(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}a.d(t,"a",(function(){return n}))},1165:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return s}));var n=a(138),i=function(e,t){return function(a){n.a.post("/admin-authority/create",e).then((function(e){t&&t(e)}))}};var r=function(e,t){return function(a){n.a.get("/admin-authority/list",e).then((function(e){return t&&t(function e(t,a){var n=[];for(var i in t)t[i].authority_parent_id===a&&(t[i].children=e(t,t[i].authority_id),n.push(t[i]));return n}(e,"")),a({type:"GET_ADMIN_AUTHORITY_LIST",data:e})}))}},c=function(e,t){return function(a){n.a.post("/admin-authority/delete",e).then((function(e){t&&t(e)}))}},s=function(e,t){return function(a){n.a.post("/admin-authority/update",e).then((function(e){t&&t(e)}))}}},1166:function(e,t,a){},1167:function(e,t,a){},1168:function(e,t,a){},1169:function(e,t,a){},1170:function(e,t,a){},1171:function(e,t,a){},1172:function(e,t,a){},1173:function(e,t,a){},1174:function(e,t,a){},1175:function(e,t,a){},1176:function(e,t,a){},1177:function(e,t,a){},1178:function(e,t,a){},1179:function(e,t,a){},1180:function(e,t,a){},1181:function(e,t,a){},1182:function(e,t,a){},1183:function(e,t,a){},1184:function(e,t,a){},1185:function(e,t,a){},1186:function(e,t,a){},1187:function(e,t,a){},1188:function(e,t,a){},1189:function(e,t,a){},1190:function(e,t,a){},1191:function(e,t,a){"use strict";a.r(t);a(1143);var n=a(1148),i=a.n(n),r=(a(454),a(339)),c=a.n(r),s=(a(1144),a(1146)),l=a.n(s),o=(a(1145),a(1147)),u=a.n(o),f=(a(1128),a(1129)),m=a.n(f),d=(a(279),a(15)),_=a.n(d),g=a(70),p=a.n(g),h=a(71),v=a.n(h),y=a(72),b=a.n(y),E=a(73),x=a.n(E),w=a(74),k=a.n(w),N=(a(188),a(38)),C=a.n(N),S=(a(190),a(32)),T=a.n(S),I=a(1),O=a.n(I),A=a(75),L=(a(1167),a(311),a(455)),j=(T.a.SubMenu,C.a.Header,C.a.Content,C.a.Sider,function(e){function t(e){var a;return p()(this,t),(a=b()(this,x()(t).call(this,e))).state={sex_arr:{0:"未知",1:"男",2:"女"}},a}return k()(t,e),v()(t,[{key:"componentWillMount",value:function(){this.props.dispatch(Object(L.a)())}},{key:"render",value:function(){var e=this.props.stateIndex,t=e.articleBlogCount,a=void 0===t?{}:t,n=e.articleCommentCount,r=void 0===n?{}:n,s=e.articleCount,o=void 0===s?{}:s,f=(e.count,e.dynamicCommentCount),d=void 0===f?{}:f,g=e.dynamicCount,p=void 0===g?{}:g,h=e.new_article,v=void 0===h?[]:h,y=e.new_comment,b=void 0===y?[]:y,E=e.new_user,x=void 0===E?[]:E,w=this.state.sex_arr;return O.a.createElement("div",{className:"layout-index layout-main"},O.a.createElement("div",{className:"layout-main-title"},O.a.createElement(m.a,null,O.a.createElement(m.a.Item,{href:"#/manager/index"},O.a.createElement(_.a,{type:"home"})),O.a.createElement(m.a.Item,{href:"#/manager/index"},O.a.createElement("span",null,"主页")),O.a.createElement(m.a.Item,null,"仪表盘"))),O.a.createElement("div",{className:"layout-statistics"},O.a.createElement("div",{className:"big-statistics"},O.a.createElement(l.a,{gutter:24},O.a.createElement(u.a,{span:6,className:"count-view"},O.a.createElement("div",{className:"card separate-card"},O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"file-text",className:"big-widget-icon text-danger"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"文章总数"),O.a.createElement("h3",{className:"mt-3 mb-3"},o.allCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计所有的文章"))))),O.a.createElement(u.a,{span:6,className:"count-view "},O.a.createElement("div",{className:"card separate-card"},O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"message",className:"big-widget-icon text-primary"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"片刻总数"),O.a.createElement("h3",{className:"mt-3 mb-3"},p.allCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计所有的用户发表的说说"))))),O.a.createElement(u.a,{span:6,className:"count-view"},O.a.createElement("div",{className:"card  separate-card"},O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"read",className:"big-widget-icon text-info"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"个人专栏总数"),O.a.createElement("h3",{className:"mt-3 mb-3"},a.allCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计所有的个人公开的专栏"))))),O.a.createElement(u.a,{span:6,className:"count-view "},O.a.createElement("div",{className:"card  separate-card"},O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"user",className:"big-widget-icon text-primary"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"用户总数"),O.a.createElement("h3",{className:"mt-3 mb-3"},o.allCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计所有的用户"))))))),O.a.createElement(l.a,{gutter:24},O.a.createElement(u.a,{span:10,className:"left-view"},O.a.createElement(l.a,{gutter:24},O.a.createElement(u.a,{span:12,className:"count-view"},O.a.createElement("div",{className:"xsb-card  separate-card"},O.a.createElement("div",{className:"xsb-card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"read",className:"widget-icon"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"个人专栏无需审核"),O.a.createElement("h3",{className:"mt-3 mb-3"},a.noReviewCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计所有的个人公开的专栏"))))),O.a.createElement(u.a,{span:12,className:"count-view "},O.a.createElement("div",{className:"xsb-card  separate-card"},O.a.createElement("div",{className:"xsb-card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"read",className:"widget-icon"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"个人专栏待审核"),O.a.createElement("h3",{className:"mt-3 mb-3"},o.reviewCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计所有的用户"))))),O.a.createElement(u.a,{span:12,className:"count-view"},O.a.createElement("div",{className:"xsb-card separate-card"},O.a.createElement("div",{className:"xsb-card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"file-text",className:"widget-icon"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"文章评论总数"),O.a.createElement("h3",{className:"mt-3 mb-3"},r.allCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计所有的文章评论"))))),O.a.createElement(u.a,{span:12,className:"count-view "},O.a.createElement("div",{className:"xsb-card separate-card"},O.a.createElement("div",{className:"xsb-card-body"},O.a.createElement("div",{className:"float-right"},O.a.createElement(_.a,{type:"message",className:"widget-icon"})),O.a.createElement("h5",{className:"text-muted font-weight-normal mt-0",title:"Number of Customers"},"片刻评论总数"),O.a.createElement("h3",{className:"mt-3 mb-3"},d.allCount),O.a.createElement("p",{className:"mb-0 text-muted"},O.a.createElement("span",{className:"text-nowrap"},"统计片刻评论总数"))))))),O.a.createElement(u.a,{span:14,className:"right-view"},O.a.createElement("div",{className:"card total-card"},O.a.createElement("div",{className:"card-body"},O.a.createElement("h4",{className:"header-title"},"数据统计"),O.a.createElement("div",{className:"table-responsive count-view-table"},O.a.createElement("table",{border:"0",className:"table table-centered table-hover mb-0"},O.a.createElement("tbody",null,O.a.createElement("tr",null,O.a.createElement("th",null,"标题"),O.a.createElement("th",null,"无需审核"),O.a.createElement("th",null,"待审核"),O.a.createElement("th",null,"审核失败")),O.a.createElement("tr",null,O.a.createElement("td",null,"文章"),O.a.createElement("td",null,a.noReviewCount),O.a.createElement("td",null,a.reviewCount),O.a.createElement("td",null,a.reviewFailCount)),O.a.createElement("tr",null,O.a.createElement("td",null,"文章评论"),O.a.createElement("td",null,r.noReviewCount),O.a.createElement("td",null,r.reviewCount),O.a.createElement("td",null,r.reviewFailCount)),O.a.createElement("tr",null,O.a.createElement("td",null,"动态"),O.a.createElement("td",null,p.noReviewCount),O.a.createElement("td",null,p.reviewCount),O.a.createElement("td",null,p.reviewFailCount)),O.a.createElement("tr",null,O.a.createElement("td",null,"动态评论"),O.a.createElement("td",null,d.noReviewCount),O.a.createElement("td",null,d.reviewCount),O.a.createElement("td",null,d.reviewFailCount)))))))))),O.a.createElement("div",{className:"layout-detailed"},O.a.createElement(l.a,{gutter:24},O.a.createElement(u.a,{span:12},O.a.createElement("div",{className:"card clearfix"},O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"header-title"},"最新文章"),O.a.createElement("div",{className:"limit-height"},O.a.createElement(i.a,{itemLayout:"horizontal",dataSource:v,renderItem:function(e){return O.a.createElement(i.a.Item,null,O.a.createElement(i.a.Item.Meta,{avatar:O.a.createElement(c.a,{src:e.user.avatar}),title:O.a.createElement("a",{href:"/p/".concat(e.aid)},e.title," ",e.create_dt),description:e.excerpt}))}}))))),O.a.createElement(u.a,{span:6},O.a.createElement("div",{className:"card clearfix"},O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"header-title"},"最新注册用户"),O.a.createElement("div",{className:"limit-height"},O.a.createElement(i.a,{itemLayout:"horizontal",dataSource:x,renderItem:function(e){return O.a.createElement(i.a.Item,null,O.a.createElement(i.a.Item.Meta,{avatar:O.a.createElement(c.a,{src:e.avatar}),title:O.a.createElement("a",{href:"/user/".concat(e.uid,"/blog")},e.nickname),description:w[e.sex]}))}}))))),O.a.createElement(u.a,{span:6},O.a.createElement("div",{className:"card clearfix"},O.a.createElement("div",{className:"card-body"},O.a.createElement("div",{className:"header-title"},"最新评论"),O.a.createElement("div",{className:"limit-height"},O.a.createElement(i.a,{itemLayout:"horizontal",dataSource:b,renderItem:function(e){return O.a.createElement(i.a.Item,null,O.a.createElement(i.a.Item.Meta,{avatar:O.a.createElement(c.a,{src:e.user.avatar}),title:O.a.createElement("a",{href:"/p/".concat(e.aid)},e.user.nickname," ",e.create_dt),description:e.content}))}}))))))))}}]),t}(O.a.Component));t.default=Object(A.b)((function(e){return{stateIndex:e.stateIndex}}))(j)},1192:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=(a(1134),a(1135)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(1128),a(1129)),m=a.n(f),d=(a(279),a(15)),_=a.n(d),g=(a(452),a(453)),p=a.n(g),h=a(1142),v=a.n(h),y=a(1130),b=a.n(y),E=a(1131),x=a.n(E),w=a(70),k=a.n(w),N=a(71),C=a.n(N),S=a(72),T=a.n(S),I=a(73),O=a.n(I),A=a(451),L=a.n(A),j=a(74),D=a.n(j),F=(a(449),a(1124)),R=a.n(F),U=(a(1125),a(1126)),q=a.n(U),z=(a(1122),a(1123)),M=a.n(z),B=(a(450),a(280)),P=a.n(B),V=(a(1140),a(1141)),Y=a.n(V),K=a(1),G=a.n(K),H=a(75),J=(a(1173),a(1162)),W=a(139),Q=a(1163),X=Y.a.TreeNode,Z=P.a.Option,$=M.a.Item,ee=q.a.confirm,te=R.a.TextArea,ae=function(e){function t(e){var a;return k()(this,t),(a=T()(this,O()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!1}),a.props.dispatch({type:"SET_USER_ROLE_INFO",data:e}),a.props.form.setFieldsValue(Object.assign({},e))},a.init_tree_data=function(e){var t=[];return a.props.stateUserAuthority.user_authority_source_list.map((function(a){2===Number(a.authority_type)&&-1!==e.indexOf(a.authority_id)&&t.push(a.authority_id)})),t},a._delete=function(e){a.props.dispatch({type:"SET_USER_ROLE_INFO",data:e}),ee({title:"确认要删除此角色吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteUserRole({user_role_id:a.props.stateUserRole.current_info.user_role_id})},onCancel:function(){console.log("Cancel")}})},a.TablePageChange=function(){var e=x()(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchUserRoleList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_edit:!0,is_create:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(console.log("Received values of form: ",n),t?a.fetchCreateUserRole(n):a.fetchUpdateUserRole(n))}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.selectRole=function(e){a.setState({role_id:e})},a.validateToNextPassword=function(e,t,n){var i=a.props.form;t&&a.state.confirmDirty&&i.validateFields(["confirm"],{force:!0}),n()},a.fetchCreateUserRole=function(e){a.props.dispatch(Object(J.a)(e,(function(e){W.a.message_success("创建角色成功"),a.fetchUserRoleList(),a.setState({modal_visible_edit:!1})})))},a.fetchUpdateUserRole=function(e){a.props.dispatch(Object(J.f)(Object.assign({user_role_id:a.props.stateUserRole.current_info.user_role_id},e),(function(e){W.a.message_success("修改角色成功"),a.fetchUserRoleList(),a.setState({modal_visible_edit:!1})})))},a.fetchDeleteUserRole=function(e){a.props.dispatch(Object(J.b)(e,(function(e){W.a.message_success("删除角色成功"),a.fetchUserRoleList()})))},a.fetchUserRoleList=function(){var e=L()(a);a.setState({loading:!0});var t=a.state.pagination.current;a.props.dispatch(Object(J.d)({params:{page:t}},(function(a){var n=Object.assign({},e.state.pagination);n.total=a.count,n.current=t,e.setState({loading:!1,pagination:n})})))},a.fetch_set_user_role_authority=function(){var e=a.props.stateUserRole,t=e.current_role_info,n=e.role_authority_list_all;a.props.dispatch(Object(J.e)(Object.assign({},t,{role_authority_list_all:n}),(function(){W.a.message_success("角色权限设置成功"),a.fetchUserRoleList(),a.setState({visible_set_authority_modal:!1})})))},a.onCheck=function(e,t){a.setState({role_authority_list:e}),a.props.dispatch({type:"SET_USER_ROLE_AUTHORITY_LIST_ALL",data:[].concat(v()(e),v()(t.halfCheckedKeys))})},a.renderTreeNodes=function(e){return e.map((function(e){return e.children.length>0?G.a.createElement(X,{dataRef:e,key:e.authority_id,title:e.authority_name,type:e.type},a.renderTreeNodes(e.children)):G.a.createElement(X,{key:e.authority_id,title:e.authority_name})}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return G.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"角色名",dataIndex:"user_role_name",key:"user_role_name",render:function(e,t){return G.a.createElement(p.a,{className:"table-article-tag-list",color:"orange"},t.user_role_name)}},{title:"角色图标",dataIndex:"user_role_icon",key:"user_role_icon"},{title:"角色类型",dataIndex:"status",key:"status",render:function(e,t){return G.a.createElement(p.a,{className:"table-article-tag-list",color:"orange"},a.state.user_role_type_list[t.user_role_type])}},{title:"角色介绍",dataIndex:"user_role_description",key:"user_role_description"},{title:"角色图标演示",dataIndex:"user_role_icon",key:"user_role_icon_demo",render:function(e,t){return G.a.createElement("div",{className:"type"},G.a.createElement("img",{className:"tag-img-icon",src:t.user_role_icon,alt:""}))}},{title:"是否在个人中心显示",dataIndex:"is_show",key:"is_show",render:function(e,t){return G.a.createElement("div",{className:"table-enable"},e?G.a.createElement(_.a,{type:"check-circle"}):G.a.createElement(_.a,{type:"close-circle"}))}},{title:"是否可以用",dataIndex:"enable",key:"enable",render:function(e,t){return G.a.createElement("div",{className:"table-enable"},e?G.a.createElement(_.a,{type:"check-circle"}):G.a.createElement(_.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return G.a.createElement("div",{className:"operation-btn",style:{width:"250px"}},G.a.createElement("button",{onClick:function(){a._edit(t)},className:"btn btn-info",size:"small",type:"primary"},G.a.createElement(_.a,{type:"edit"})),G.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},G.a.createElement(_.a,{type:"delete"})),2!==t.user_role_type?G.a.createElement("button",{className:"btn btn-primary",onClick:x()(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({visible_set_authority_modal:!0,role_authority_list:a.init_tree_data(t.user_authority_ids?t.user_authority_ids.split(","):"")}),e.next=3,a.props.dispatch({type:"SET_CURRENT_USER_ROLE_INFO",data:t});case 3:case"end":return e.stop()}}),e)}))),size:"small"},"设置权限"):"")}}],pagination:{current:1},loading:!1,confirmDirty:!1,modal_visible_edit:!1,modal_visible_authority:!1,is_create:!0,user_role_type_list:["","默认角色","定制化角色"],menu_text:["","图片","字体图标"],visible_create_role_modal:!1,visible_set_authority_modal:!1,role_authority_list:[]},a}return D()(t,e),C()(t,[{key:"componentDidMount",value:function(){this.fetchUserRoleList(),this.props.dispatch(Object(Q.c)())}},{key:"render",value:function(){var e=this,t=this.props,a=t.stateUserRole,n=t.stateUserAuthority,r=this.state,s=r.loading,o=r.is_create,f=r.user_role_type_list,d=this.props.form.getFieldDecorator,g={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return G.a.createElement("div",{className:"layout-main"},G.a.createElement("div",{className:"layout-main-title"},G.a.createElement(m.a,null,G.a.createElement(m.a.Item,{href:"#/manager/index"},G.a.createElement(_.a,{type:"home"})),G.a.createElement(m.a.Item,{href:"#/manager/index"},G.a.createElement("span",null,"主页")),G.a.createElement(m.a.Item,{href:"#"},G.a.createElement("span",null,"用户管理")),G.a.createElement(m.a.Item,null,"用户角色"))),G.a.createElement("div",{className:"layout-nav-btn"},G.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",onClick:function(){return e.showModal(0)}},"创建用户角色")),G.a.createElement("div",{className:"card user-role"},G.a.createElement("div",{className:"card-body"},G.a.createElement(q.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"填写角色",visible:this.state.modal_visible_edit},G.a.createElement(M.a,{className:"from-view",onSubmit:this.handleSubmit},G.a.createElement($,u()({},g,{label:"角色名"}),d("user_role_name",{rules:[{required:!0,message:"请输入角色名！",whitespace:!0}]})(G.a.createElement(R.a,{placeholder:"角色名"}))),G.a.createElement($,u()({},g,{hasFeedback:!0,label:"角色类型"}),d("user_role_type",{rules:[{required:!0,message:"请选择角色类型！"}]})(G.a.createElement(P.a,{placeholder:"请选择角色类型！"},f.map((function(e,t){return G.a.createElement(Z,{value:t,key:t},e)}))))),G.a.createElement($,u()({},g,{label:"角色名图标"}),d("user_role_icon",{rules:[{message:"请输入角色名图标！",whitespace:!0}]})(G.a.createElement(R.a,{placeholder:"角色名图标"}))),G.a.createElement($,u()({},g,{hasFeedback:!0,label:"角色描述"}),d("user_role_description",{rules:[{required:!0,message:"请输入角色描述"}]})(G.a.createElement(te,{placeholder:"请输入角色描述",type:"text"}))),G.a.createElement($,u()({},g,{label:"是否显示"}),d("is_show",{valuePropName:"checked"})(G.a.createElement(l.a,null))),G.a.createElement($,u()({},g,{label:"是否有效"}),d("enable",{valuePropName:"checked"})(G.a.createElement(l.a,null))),G.a.createElement($,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},G.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},o?"创建角色":"更新")))),G.a.createElement(q.a,{footer:null,onCancel:function(){e.setState({visible_set_authority_modal:!1})},title:"设置权限",visible:this.state.visible_set_authority_modal},G.a.createElement(Y.a,{checkable:!0,checkedKeys:this.state.role_authority_list,onCheck:this.onCheck,defaultExpandAll:!0,ref:"tree",showLine:!0},this.renderTreeNodes(n.user_authority_list)),G.a.createElement("div",{className:"admin-role-foot"},G.a.createElement(c.a,{icon:"save",onClick:function(){e.fetch_set_user_role_authority()},type:"primary"},"确定"),G.a.createElement(c.a,{onClick:function(){e.setState({visible_set_authority_modal:!1})}},"取消"))),G.a.createElement(i.a,{columns:this.state.columns,dataSource:a.list,loading:s,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"user_role_id"}))))}}]),t}(G.a.Component),ne=M.a.create()(ae);t.default=Object(H.b)((function(e){return{stateUserRole:e.stateUserRole,stateUserAuthority:e.stateUserAuthority}}))(ne)},1193:function(e,t,a){"use strict";a.r(t);a(187);var n=a(140),i=a.n(n),r=(a(1134),a(1135)),c=a.n(r),s=(a(1138),a(1139)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(449),a(1124)),m=a.n(f),d=(a(1128),a(1129)),_=a.n(d),g=(a(279),a(15)),p=a.n(g),h=a(1130),v=a.n(h),y=a(1131),b=a.n(y),E=a(70),x=a.n(E),w=a(71),k=a.n(w),N=a(72),C=a.n(N),S=a(73),T=a.n(S),I=a(451),O=a.n(I),A=a(74),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(450),a(280)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(1140),a(1141)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=a(139),K=a(1164),G=(a(1174),a(1163)),H=M.a.TreeNode,J=q.a.Item,W=R.a.Option,Q=D.a.confirm,X=function(e){function t(e){var a;return x()(this,t),(a=C()(this,T()(t).call(this,e))).showCreateModal=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.form.resetFields(),a.setState({visible:!0,authority_parent_id:t?t.authority_id:"",authority_parent_name:t?t.authority_name:""}),t){e.next=12;break}return e.t0=a.props.form,e.next=6,a.props.stateUserAuthority.user_authority_list.length;case 6:e.t1=e.sent,e.t2={value:e.t1},e.t3={authority_sort:e.t2},e.t0.setFields.call(e.t0,e.t3),e.next=13;break;case 12:a.props.form.setFields({authority_sort:{value:t.children.length}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showEditModal=function(e){a.setState({visible:!0,authority_parent_id:e?e.authority_parent_id:"",authority_parent_name:e?e.authority_parent_name:"",authority_type_select:e.authority_type}),a.props.form.setFieldsValue({authority_name:e.authority_name,authority_type:e.authority_type,authority_url:e.authority_url,authority_sort:e.authority_sort,authority_description:e.authority_description,enable:e.enable||0})},a.handleCancel=function(){a.setState({visible:!1})},a.authority_type_Change=function(e){a.setState({authority_type_select:e})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields(function(){var e=b()(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}if(!a.state.is_create){e.next=6;break}return e.next=4,a.fetchUserAuthorityCreate(n);case 4:e.next=8;break;case 6:return e.next=8,a.fetchUserAuthorityUpdate(n);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleDeleteAuthority=function(e){var t=O()(a);Q({title:"你确认要删除当前权限吗",content:"".concat(e.authority_name,"，删除权限后，所有与之关联的角色将失去此权限！"),okText:"YES",okType:"danger",cancelText:"No",onOk:function(){t.fetchUserAuthorityDelete(e)},onCancel:function(){}})},a.fetchUserAuthorityList=function(){a.props.dispatch(Object(G.c)())},a.fetchUserAuthorityCreate=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch(Object(G.a)({authority_name:t.authority_name,authority_type:t.authority_type,authority_parent_id:a.state.authority_parent_id,authority_parent_name:a.state.authority_parent_name,authority_url:t.authority_url,authority_sort:t.authority_sort,authority_description:t.authority_description,enable:t.enable||0},(function(){a.setState({visible:!1}),a.fetchUserAuthorityList(),Y.a.message_success("权限创建成功")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchUserAuthorityUpdate=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch(Object(G.d)({authority_id:a.props.stateUserAuthority.current_authority_info.authority_id,authority_name:t.authority_name,authority_type:t.authority_type,authority_url:t.authority_url,authority_sort:t.authority_sort,authority_description:t.authority_description,enable:t.enable||0},(function(){a.setState({visible:!1}),a.fetchUserAuthorityList(),Y.a.message_success("权限更新成功")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchUserAuthorityDelete=function(){var e=b()(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.traversalDelete(t);case 2:n=e.sent,a.props.dispatch(Object(G.b)({authority_id_arr:n},(function(){a.fetchUserAuthorityList(),Y.a.message_success("删除成功")})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.traversalDelete=function(e){var t=[];return t.push(e.authority_id),Object(K.a)(e.children)||function e(a){for(var n in a)t.push(a[n].authority_id),Object(K.a)(a[n].children)||e(a[n].children)}(e.children),t},a.state={visible:!1,authority_type_select:1,authority_parent_id:"",authority_parent_name:"",is_create:!0,menu_text:["","基础菜单","操作和功能"]},a}return L()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.fetchUserAuthorityList()}},{key:"render",value:function(){var e=this,t=this.props.stateUserAuthority,a=this.props.form.getFieldDecorator,n=this.state,r=n.authority_type_select,s=n.authority_parent_name,o=function(t){return P.a.createElement("div",{className:"box-tree-title clearfix"},P.a.createElement("div",{className:"pull-left"},P.a.createElement("span",{className:"title"},t.authority_name," ")),P.a.createElement("div",{className:"pull-right"},P.a.createElement(p.a,{onClick:function(){e.showCreateModal(t),e.setState({is_create:!0})},type:"plus-circle-o"}),P.a.createElement(p.a,{onClick:function(){e.showEditModal(t),e.setState({is_create:!1}),e.props.dispatch({type:"SET_CURRENT_USER_AUTHORITY_INFO",data:t})},type:"edit"}),P.a.createElement(p.a,{onClick:function(){return e.handleDeleteAuthority(t)},type:"delete"})))},f={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(_.a,null,P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement(p.a,{type:"home"})),P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(_.a.Item,{href:"#"},P.a.createElement("span",null,"用户管理")),P.a.createElement(_.a.Item,null,"用户权限菜单"))),P.a.createElement("div",{className:"layout-nav-btn"},P.a.createElement("button",{className:"btn btn-danger",icon:"plus",onClick:function(){return e.showCreateModal()},type:"primary"},"创建权限")),P.a.createElement("div",{className:"card admin-authority"},P.a.createElement("div",{className:"card-body"},P.a.createElement(D.a,{footer:null,onCancel:this.handleCancel,title:"权限",visible:this.state.visible},P.a.createElement(q.a,{className:"login-form",onSubmit:this.handleSubmit},s?P.a.createElement(J,u()({},f,{label:"父权限名称"}),P.a.createElement(m.a,{disabled:!0,type:"text",value:this.state.authority_parent_name})):"",P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限名称"}),a("authority_name",{rules:[{required:!0,message:"请输入权限名称"}]})(P.a.createElement(m.a,{type:"text"}))),P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限类型"}),a("authority_type",{rules:[{required:!0,message:"请选择权限类型！"}]})(P.a.createElement(R.a,{onChange:this.authority_type_Change,placeholder:"请选择权限类型！"},P.a.createElement(W,{value:"1"},"基础菜单"),P.a.createElement(W,{value:"2"},"操作和功能")))),2===Number(r)?P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限路径"}),a("authority_url",{rules:[{required:!0,message:"请输入权限路径"}]})(P.a.createElement(m.a,{addonBefore:"/api-client/v1",placeholder:"请输入权限路径",type:"text"}))):P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限Key"}),a("authority_url",{rules:[{required:!0,message:"请输入权限Key"}]})(P.a.createElement(m.a,{placeholder:"请输入权限Key",type:"text"}))),P.a.createElement(J,u()({},f,{label:"排序"}),a("authority_sort")(P.a.createElement(l.a,null))),P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限描述"}),a("authority_description",{rules:[{required:!0,message:"请输入权限描述"}]})(P.a.createElement(m.a,{placeholder:"请输入权限描述",type:"text"}))),2!==Number(r)?P.a.createElement(J,u()({},f,{label:"是否显示"}),a("enable",{valuePropName:"checked"})(P.a.createElement(c.a,null))):"",P.a.createElement(J,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},P.a.createElement(i.a,{className:"login-form-button",htmlType:"submit",type:"primary"},this.state.is_create?"提交":"修改"),P.a.createElement(i.a,{onClick:this.handleReset,style:{marginLeft:8}},"重置")))),P.a.createElement(M.a,{defaultExpandAll:!0,showLine:!0,ref:"tree"},t.user_authority_list.map((function(e){return P.a.createElement(H,{key:e.authority_id,title:o(e)},function e(t){return t.length>0?t.map((function(t){return P.a.createElement(H,{key:t.authority_id,title:o(t)},e(t.children))})):null}(e.children))}))))))}}]),t}(P.a.Component),Z=q.a.create()(X);t.default=Object(V.b)((function(e){return{stateUserAuthority:e.stateUserAuthority}}))(Z)},1194:function(e,t,a){"use strict";a.r(t);a(187);var n=a(140),i=a.n(n),r=(a(1134),a(1135)),c=a.n(r),s=(a(1138),a(1139)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(449),a(1124)),m=a.n(f),d=(a(1128),a(1129)),_=a.n(d),g=(a(279),a(15)),p=a.n(g),h=a(1130),v=a.n(h),y=a(1131),b=a.n(y),E=a(70),x=a.n(E),w=a(71),k=a.n(w),N=a(72),C=a.n(N),S=a(73),T=a.n(S),I=a(451),O=a.n(I),A=a(74),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(450),a(280)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(1140),a(1141)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=a(139),K=a(1164),G=(a(1180),a(1165)),H=M.a.TreeNode,J=q.a.Item,W=R.a.Option,Q=D.a.confirm,X=function(e){function t(e){var a;return x()(this,t),(a=C()(this,T()(t).call(this,e))).showCreateModal=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.form.resetFields(),a.setState({visible:!0,authority_parent_id:t?t.authority_id:"",authority_parent_name:t?t.authority_name:""}),t){e.next=12;break}return e.t0=a.props.form,e.next=6,a.props.stateAdminAuthority.admin_authority_list.length;case 6:e.t1=e.sent,e.t2={value:e.t1},e.t3={authority_sort:e.t2},e.t0.setFields.call(e.t0,e.t3),e.next=13;break;case 12:a.props.form.setFields({authority_sort:{value:t.children.length}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showEditModal=function(e){a.setState({visible:!0,authority_parent_id:e?e.authority_parent_id:"",authority_parent_name:e?e.authority_parent_name:"",authority_type_select:e.authority_type}),a.props.form.setFieldsValue({authority_name:e.authority_name,authority_type:e.authority_type,authority_url:e.authority_url,authority_sort:e.authority_sort,authority_description:e.authority_description,enable:e.enable||0})},a.handleCancel=function(){a.setState({visible:!1})},a.authorityTypeChange=function(e){a.setState({authority_type_select:e})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields(function(){var e=b()(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}if(!a.state.is_create){e.next=6;break}return e.next=4,a.fetchAdminAuthorityCreate(n);case 4:e.next=8;break;case 6:return e.next=8,a.fetchAdminAuthorityUpdate(n);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleDeleteAuthority=function(e){var t=O()(a);Q({title:"你确认要删除当前权限吗",content:"".concat(e.authority_name,"，删除权限后，所有与之关联的角色将失去此权限！"),okText:"YES",okType:"danger",cancelText:"No",onOk:function(){t.fetchAdminAuthorityDelete(e)},onCancel:function(){}})},a.fetchAdminAuthorityList=function(){a.props.dispatch(Object(G.c)())},a.fetchAdminAuthorityCreate=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch(Object(G.a)({authority_name:t.authority_name,authority_type:t.authority_type,authority_parent_id:a.state.authority_parent_id,authority_parent_name:a.state.authority_parent_name,authority_url:t.authority_url,authority_sort:t.authority_sort,authority_description:t.authority_description,enable:t.enable||0},(function(){a.setState({visible:!1}),a.fetchAdminAuthorityList(),Y.a.message_success("权限创建成功")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchAdminAuthorityUpdate=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch(Object(G.d)({authority_id:a.props.stateAdminAuthority.current_authority_info.authority_id,authority_name:t.authority_name,authority_type:t.authority_type,authority_url:t.authority_url,authority_sort:t.authority_sort,authority_description:t.authority_description,enable:t.enable||0},(function(){a.setState({visible:!1}),a.fetchAdminAuthorityList(),Y.a.message_success("权限更新成功")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchAdminAuthorityDelete=function(){var e=b()(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.traversalDelete(t);case 2:n=e.sent,a.props.dispatch(Object(G.b)({authority_id_arr:n},(function(){a.fetchAdminAuthorityList(),Y.a.message_success("删除成功")})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.traversalDelete=function(e){var t=[];return t.push(e.authority_id),Object(K.a)(e.children)||function e(a){for(var n in a)t.push(a[n].authority_id),Object(K.a)(a[n].children)||e(a[n].children)}(e.children),t},a.state={visible:!1,authority_type_select:1,authority_parent_id:"",authority_parent_name:"",is_create:!0,menu_text:["","基础菜单","操作和功能"]},a}return L()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.fetchAdminAuthorityList()}},{key:"render",value:function(){var e=this,t=this.props.stateAdminAuthority,a=this.props.form.getFieldDecorator,n=this.state,r=n.authority_type_select,s=n.authority_parent_name,o=function(t){return P.a.createElement("div",{className:"box-tree-title clearfix"},P.a.createElement("div",{className:"pull-left"},P.a.createElement("span",{className:"title"},t.authority_name," ")),P.a.createElement("div",{className:"pull-right"},P.a.createElement(p.a,{onClick:function(){e.showCreateModal(t),e.setState({is_create:!0})},type:"plus-circle-o"}),P.a.createElement(p.a,{onClick:function(){e.showEditModal(t),e.setState({is_create:!1}),e.props.dispatch({type:"SET_CURRENT_AUTHORITY_INFO",data:t})},type:"edit"}),P.a.createElement(p.a,{onClick:function(){return e.handleDeleteAuthority(t)},type:"delete"})))},f={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(_.a,null,P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement(p.a,{type:"home"})),P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(_.a.Item,{href:"#"},P.a.createElement("span",null,"系统管理")),P.a.createElement(_.a.Item,null,"管理员权限菜单"))),P.a.createElement("div",{className:"layout-nav-btn"},P.a.createElement("button",{className:"btn btn-danger",icon:"plus",onClick:function(){return e.showCreateModal()},type:"primary"},"创建权限")),P.a.createElement("div",{className:"card admin-authority"},P.a.createElement("div",{className:"card-body"},P.a.createElement(D.a,{footer:null,onCancel:this.handleCancel,title:"权限",visible:this.state.visible},P.a.createElement(q.a,{className:"login-form",onSubmit:this.handleSubmit},s?P.a.createElement(J,u()({},f,{label:"父权限名称"}),P.a.createElement(m.a,{disabled:!0,type:"text",value:this.state.authority_parent_name})):"",P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限名称"}),a("authority_name",{rules:[{required:!0,message:"请输入权限名称"}]})(P.a.createElement(m.a,{type:"text"}))),P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限类型"}),a("authority_type",{rules:[{required:!0,message:"请选择权限类型！"}]})(P.a.createElement(R.a,{onChange:this.authorityTypeChange,placeholder:"请选择权限类型！"},P.a.createElement(W,{value:"1"},"基础菜单"),P.a.createElement(W,{value:"2"},"操作和功能")))),2===Number(r)?P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限路径"}),a("authority_url",{rules:[{required:!0,message:"请输入权限路径"}]})(P.a.createElement(m.a,{addonBefore:"/api-admin/v1",placeholder:"请输入权限路径",type:"text"}))):P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限Key"}),a("authority_url",{rules:[{required:!0,message:"请输入权限Key"}]})(P.a.createElement(m.a,{placeholder:"请输入权限Key",type:"text"}))),P.a.createElement(J,u()({},f,{label:"排序"}),a("authority_sort")(P.a.createElement(l.a,null))),P.a.createElement(J,u()({},f,{hasFeedback:!0,label:"权限描述"}),a("authority_description",{rules:[{required:!0,message:"请输入权限描述"}]})(P.a.createElement(m.a,{placeholder:"请输入权限描述",type:"text"}))),2!==Number(r)?P.a.createElement(J,u()({},f,{label:"是否显示"}),a("enable",{valuePropName:"checked"})(P.a.createElement(c.a,null))):"",P.a.createElement(J,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},P.a.createElement(i.a,{className:"login-form-button",htmlType:"submit",type:"primary"},this.state.is_create?"提交":"修改"),P.a.createElement(i.a,{onClick:this.handleReset,style:{marginLeft:8}},"重置")))),P.a.createElement(M.a,{defaultExpandAll:!0,showLine:!0,ref:"tree"},t.admin_authority_list.map((function(e){return P.a.createElement(H,{key:e.authority_id,title:o(e)},function e(t){return t.length>0?t.map((function(t){return P.a.createElement(H,{key:t.authority_id,title:o(t)},e(t.children))})):null}(e.children))}))))))}}]),t}(P.a.Component),Z=q.a.create()(X);t.default=Object(V.b)((function(e){return{stateAdminAuthority:e.stateAdminAuthority}}))(Z)},1195:function(e,t,a){"use strict";a.r(t);a(1136);var n,i,r,c,s=a(1137),l=a.n(s),o=(a(1128),a(1129)),u=a.n(o),f=(a(279),a(15)),m=a.n(f),d=a(70),_=a.n(d),g=a(71),p=a.n(g),h=a(72),v=a.n(h),y=a(73),b=a.n(y),E=a(74),x=a.n(E),w=a(1),k=a.n(w),N=a(75),C=(a(449),a(1124)),S=a.n(C),T=a(1127),I=a.n(T),O=a(1130),A=a.n(O),L=a(1131),j=a.n(L),D=(a(1125),a(1126)),F=a.n(D),R=(a(1122),a(1123)),U=a.n(R),q=(a(450),a(280)),z=a.n(q),M=a(138),B=function(e,t){return function(a){M.a.get("/system-config/info",e).then((function(e){return t&&t(e),a({type:"SET_SYSTEM_CONFIG_INFO",data:e.info})}))}},P=function(e,t){return function(a){M.a.post("/system-config/update",e).then((function(e){t&&t(e)}))}},V=(a(139),a(1162),z.a.Option),Y=U.a.Item,K=(F.a.confirm,Object(N.b)((function(e){return{stateSystemConfig:e.stateSystemConfig}}))(n=function(e){function t(e){var a;return _()(this,t),(a=v()(this,b()(t).call(this,e))).state={is_edit:!1,loading:!1,type:""},a}var a,n;return x()(t,e),p()(t,[{key:"componentDidMount",value:(n=j()(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.system_config_info();case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"system_config_info",value:(a=j()(A.a.mark((function e(){var t=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(B({},(function(e){t.setState({type:e.email.type}),t.props.form.setFieldsValue(Object.assign({},e.email))})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll((function(e,a){e||t.props.dispatch(P({type:"email",email:Object.assign({},a)},(function(e){t.system_config_info(),t.setState({is_edit:!1})})))}))}},{key:"render",value:function(){var e=this,t=this.state.is_edit,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return k.a.createElement("div",{className:"layout-main",id:"system-config"},k.a.createElement("div",{className:"layout-main-title"},k.a.createElement("h4",{class:"header-title"},"邮箱修改or绑定")),k.a.createElement("div",{className:"layout-nav-btn"}),k.a.createElement("div",{className:"card layout-card-view"},k.a.createElement("div",{className:"card-body sc-content-view"},k.a.createElement(U.a,{className:"from-view",onSubmit:this.handleSubmit.bind(this)},k.a.createElement(Y,I()({},n,{label:"系统类型"}),a("type",{rules:[{required:!0,message:"请输入系统类型！",whitespace:!0}]})(k.a.createElement(z.a,{disabled:!t,onChange:function(t){e.setState({type:t})}},k.a.createElement(V,{value:"company"},"企业"),k.a.createElement(V,{value:"personal"},"个人")))),k.a.createElement(Y,I()({},n,{label:"系统邮箱"}),a("user",{rules:[{required:!0,message:"请输入系统邮箱！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"邮箱"}))),"company"===this.state.type?k.a.createElement("div",null,k.a.createElement(Y,I()({},n,{label:"服务商服务器地址"}),a("host",{rules:[{required:!0,message:"请输入服务商服务器地址！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"服务器地址"}))),k.a.createElement(Y,I()({},n,{label:"系统邮箱服务商端口"}),a("port",{rules:[{required:!0,message:"请输入系统邮箱服务商端口！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"服务商端口"})))):k.a.createElement(Y,I()({},n,{label:"系统邮箱服务商后缀"}),a("service",{rules:[{required:!0,message:"请输入邮箱服务商后缀！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"（例如：qq、163等等）"}))),k.a.createElement(Y,I()({},n,{label:"系统邮箱密码"}),a("pass",{rules:[{required:!0,message:"请输入邮箱密码！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,type:"password",placeholder:"邮箱密码"}))),k.a.createElement(Y,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},t?k.a.createElement("div",null,k.a.createElement("button",{className:"btn btn-primary",htmlType:"submit",type:"primary",style:{marginRight:"10px"}},"确定"),k.a.createElement("button",{className:"btn btn-light",onClick:function(){e.system_config_info(),e.setState({is_edit:!1})},type:"primary"},"取消")):k.a.createElement("button",{className:"btn btn-info",onClick:function(){e.setState({is_edit:!0})},type:"primary"},"修改"))))))}}]),t}(k.a.Component))||n),G=U.a.create()(K),H=(z.a.Option,U.a.Item),J=(F.a.confirm,Object(N.b)((function(e){return{stateSystemConfig:e.stateSystemConfig}}))(i=function(e){function t(e){var a;return _()(this,t),(a=v()(this,b()(t).call(this,e))).state={is_edit:!1,loading:!1},a}var a,n;return x()(t,e),p()(t,[{key:"componentDidMount",value:(n=j()(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.system_config_info();case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"system_config_info",value:(a=j()(A.a.mark((function e(){var t=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(B({},(function(e){t.props.form.setFieldsValue(Object.assign({},e.website))})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll((function(e,a){if(!e){a.service,a.user,a.pass;var n=a.website_name,i=a.domain_name,r=a.keywords,c=a.introduction,s=a.description,l=a.miibeian,o=a.about,u=a.feedback,f=a.logo;t.props.dispatch(P({type:"website",website:{website_name:n,domain_name:i,keywords:r,introduction:c,description:s,miibeian:l,about:o,feedback:u,logo:f}},(function(e){t.system_config_info(),t.setState({is_edit:!1})})))}}))}},{key:"render",value:function(){var e=this,t=this.state.is_edit,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return k.a.createElement("div",{className:"layout-main",id:"system-config"},k.a.createElement("div",{className:"layout-main-title"},k.a.createElement("h4",{class:"header-title"},"网站配置")),k.a.createElement("div",{className:"layout-nav-btn"}),k.a.createElement("div",{className:"card layout-card-view"},k.a.createElement("div",{className:"card-body sc-content-view"},k.a.createElement(U.a,{className:"from-view",onSubmit:this.handleSubmit.bind(this)},k.a.createElement(H,I()({},n,{label:"网站名"}),a("website_name",{rules:[{required:!0,message:"请输入网站名！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"网站名"}))),k.a.createElement(H,I()({},n,{label:"logo地址"}),a("logo",{rules:[{message:"请输入logo！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"logo"}))),k.a.createElement(H,I()({},n,{label:"域名"}),a("domain_name",{rules:[{message:"请输入域名！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"域名"}))),k.a.createElement(H,I()({},n,{label:"网站介绍"}),a("introduction",{rules:[{message:"请输入网站介绍！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"网站介绍"}))),k.a.createElement(H,I()({},n,{label:"网站关键词"}),a("keywords",{rules:[{message:"请输入网站关键词！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"网站关键词"}))),k.a.createElement(H,I()({},n,{label:"网站描述"}),a("description",{rules:[{message:"请输入网站描述！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"网站介绍"}))),k.a.createElement(H,I()({},n,{label:"备案号"}),a("miibeian",{rules:[{message:"请输入备案号！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"备案号"}))),k.a.createElement("h3",{className:"title"},"侧栏底部信息"),k.a.createElement(H,I()({},n,{label:"关于"}),a("about",{rules:[{message:"请输入关于！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"关于"}))),k.a.createElement(H,I()({},n,{label:"建议反馈"}),a("feedback",{rules:[{message:"请输入建议反馈！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"建议反馈"}))),k.a.createElement(H,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},t?k.a.createElement("div",null,k.a.createElement("button",{className:"btn btn-primary",type:"primary",style:{marginRight:"10px"}},"确定"),k.a.createElement("button",{className:"btn btn-light",onClick:function(){e.setState({is_edit:!1})},type:"primary"},"取消")):k.a.createElement("button",{className:"btn btn-info",onClick:function(){e.setState({is_edit:!0})},type:"primary"},"修改"))))))}}]),t}(k.a.Component))||i),W=U.a.create()(J),Q=z.a.Option,X=U.a.Item,Z=(F.a.confirm,Object(N.b)((function(e){return{stateSystemConfig:e.stateSystemConfig}}))(r=function(e){function t(e){var a;return _()(this,t),(a=v()(this,b()(t).call(this,e))).state={is_edit:!1,loading:!1,asideList:[]},a}var a,n;return x()(t,e),p()(t,[{key:"componentDidMount",value:(n=j()(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.system_config_info();case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"system_config_info",value:(a=j()(A.a.mark((function e(){var t=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(B({},(function(e){t.props.form.setFieldsValue(Object.assign({},e.config))})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll((function(e,a){if(!e){var n=a.on_login,i=a.on_register,r=a.on_comment,c=a.admin_url,s=a.googleCode,l=a.isBaiduAuthPush;t.props.dispatch(P({type:"config",config:{on_login:n,on_register:i,on_comment:r,admin_url:c,googleCode:s,isBaiduAuthPush:l}},(function(e){t.system_config_info(),t.setState({is_edit:!1})})))}}))}},{key:"render",value:function(){var e=this,t=this.state.is_edit,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return k.a.createElement("div",{className:"layout-main",id:"system-config"},k.a.createElement("div",{className:"layout-main-title"},k.a.createElement("h4",{class:"header-title"},"网站功能")),k.a.createElement("div",{className:"layout-nav-btn"}),k.a.createElement("div",{className:"card layout-card-view"},k.a.createElement("div",{className:"card-body sc-content-view"},k.a.createElement(U.a,{className:"from-view",onSubmit:this.handleSubmit.bind(this)},k.a.createElement(X,I()({},n,{label:"开启登录"}),a("on_login",{rules:[{required:!0,message:"请选择是否开启登录！",whitespace:!0}]})(k.a.createElement(z.a,{disabled:!t,onChange:function(t){e.setState({type:t})}},k.a.createElement(Q,{value:"yes"},"开启"),k.a.createElement(Q,{value:"no"},"关闭")))),k.a.createElement(X,I()({},n,{label:"开启注册"}),a("on_register",{rules:[{required:!0,message:"请选择是否开启注册！",whitespace:!0}]})(k.a.createElement(z.a,{disabled:!t,onChange:function(t){e.setState({type:t})}},k.a.createElement(Q,{value:"yes"},"开启"),k.a.createElement(Q,{value:"no"},"关闭")))),k.a.createElement(X,I()({},n,{label:"开启评论模块"}),a("on_comment",{rules:[{required:!0,message:"请选择是否开启评论模块！",whitespace:!0}]})(k.a.createElement(z.a,{disabled:!t,onChange:function(t){e.setState({type:t})}},k.a.createElement(Q,{value:"yes"},"开启"),k.a.createElement(Q,{value:"no"},"关闭")))),k.a.createElement(X,I()({},n,{label:"后台管理界面访问地址"}),a("admin_url",{rules:[{required:!0,message:"请输入后台管理界面访问地址！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"后台管理界面访问地址"}))),k.a.createElement(X,I()({},n,{label:"google统计code"}),a("googleCode",{rules:[{message:"请输入google统计code！",whitespace:!0}]})(k.a.createElement(S.a,{disabled:!t,placeholder:"google统计code"}))),k.a.createElement(X,I()({},n,{label:"开启百度自动推送"}),a("isBaiduAuthPush",{rules:[{message:"请选择是否开启百度自动推送！",whitespace:!0}]})(k.a.createElement(z.a,{disabled:!t},k.a.createElement(Q,{value:"yes"},"开启"),k.a.createElement(Q,{value:"no"},"关闭")))),k.a.createElement(X,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},t?k.a.createElement("div",null,k.a.createElement("button",{className:"btn btn-primary",type:"primary",style:{marginRight:"10px"}},"确定"),k.a.createElement("button",{className:"btn btn-light",onClick:function(){e.setState({is_edit:!1})},type:"primary"},"取消")):k.a.createElement("button",{className:"btn btn-info",onClick:function(){e.setState({is_edit:!0})},type:"primary"},"修改"))))))}}]),t}(k.a.Component))||r),$=U.a.create()(Z),ee=(a(1181),Object(N.b)((function(e){return{stateSystemConfig:e.stateSystemConfig}}))(c=function(e){function t(){return _()(this,t),v()(this,b()(t).apply(this,arguments))}return x()(t,e),p()(t,[{key:"render",value:function(){return k.a.createElement("div",{className:"layout-main",id:"system-config"},k.a.createElement("div",{className:"layout-main-title"},k.a.createElement(u.a,null,k.a.createElement(u.a.Item,{href:"#/manager/index"},k.a.createElement(m.a,{type:"home"})),k.a.createElement(u.a.Item,{href:"#/manager/index"},k.a.createElement("span",null,"主页")),k.a.createElement(u.a.Item,{href:"#"},k.a.createElement("span",null,"系统管理")),k.a.createElement(u.a.Item,null,"系统配置"))),k.a.createElement(G,null),k.a.createElement(W,null),k.a.createElement($,null),k.a.createElement(l.a,{message:"备注",description:"由于是系统配置，修改时请谨慎，修改成功某些配置后，如果未生效或者出现错误，请务必重启服务",type:"warning",showIcon:!0}))}}]),t}(k.a.Component))||c);t.default=ee},1196:function(e,t,a){"use strict";a.r(t);a(1136);var n,i,r,c=a(1137),s=a.n(c),l=(a(1128),a(1129)),o=a.n(l),u=(a(279),a(15)),f=a.n(u),m=a(70),d=a.n(m),_=a(71),g=a.n(_),p=a(72),h=a.n(p),v=a(73),y=a.n(v),b=a(74),E=a.n(b),x=a(1),w=a.n(x),k=a(75),N=(a(1132),a(1133)),C=a.n(N),S=(a(187),a(140)),T=a.n(S),I=(a(1134),a(1135)),O=a.n(I),A=a(1127),L=a.n(A),j=(a(449),a(1124)),D=a.n(j),F=(a(1125),a(1126)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(450),a(280)),M=a.n(z),B=a(138),P=function(e,t){return function(a){B.a.get("/options/list",{params:Object.assign({},e)}).then((function(n){return t&&t(n),a({type:"advertise"===e.option_key?"SET_WEBSITE_CONFIG_ADVERTISE":"SET_WEBSITE_CONFIG_NOTICE",data:n})}))}},V=function(e,t){return function(a){B.a.post("/options/create",e).then((function(e){t&&t(e)}))}},Y=function(e,t){return function(a){B.a.post("/options/update",e).then((function(e){t&&t(e)}))}},K=function(e,t){return function(a){B.a.post("/options/delete",e).then((function(e){t&&t(e)}))}},G=(M.a.Option,q.a.Item),H=R.a.confirm,J=(D.a.TextArea,Object(k.b)((function(e){return{stateWebsiteConfig:e.stateWebsiteConfig}}))(n=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=h()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,a){return w.a.createElement("span",{style:{width:"20px",display:"block"}},"".concat(a+1))}},{title:"通知标题",dataIndex:"title",key:"title",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).title)}},{title:"通知链接",dataIndex:"link",key:"link",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).link)}},{title:"背景图片",dataIndex:"img_url",key:"img_url",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).img_url)}},{title:"是否可以用",dataIndex:"enable",key:"enable",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).enable?w.a.createElement(f.a,{type:"check-circle"}):w.a.createElement(f.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return w.a.createElement("div",{className:"operation-btn"},w.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",type:"primary",className:"btn btn-info"},w.a.createElement(f.a,{type:"edit"})),w.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},w.a.createElement(f.a,{type:"delete"})))}}],loading:!1,modal_visible_edit:!1,is_create:!1,option_id:""},a._getOptionsList=function(){a.props.dispatch(P({option_key:"notice"}))},a._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!0,option_id:e.option_id}),a.props.form.setFieldsValue(Object.assign({},JSON.parse(e.option_value)))},a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_edit:!0,is_create:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(console.log("Received values of form: ",n),t?a.props.dispatch(Y({option_id:a.state.option_id,option_key:"notice",option_value:JSON.stringify(n)},(function(){a._getOptionsList()}))):a.props.dispatch(V({option_key:"notice",option_value:JSON.stringify(n)},(function(){a._getOptionsList()})))),a.setState({modal_visible_edit:!1})}))},a._delete=function(e){H({title:"确认要删除此条公告吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.props.dispatch(K({option_id:e.option_id},(function(){a._getOptionsList()})))},onCancel:function(){console.log("Cancel")}})},a}return E()(t,e),g()(t,[{key:"componentDidMount",value:function(){this._getOptionsList()}},{key:"render",value:function(){var e=this,t=this.props.stateWebsiteConfig,a=this.state,n=a.loading,i=a.is_create,r=this.props.form.getFieldDecorator,c={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return w.a.createElement("div",{className:"card layout-main",id:"system-config"},w.a.createElement("div",{className:"card-body"},w.a.createElement("h4",{className:"header-title"},"系统通知"),w.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",style:{marginBottom:"15px"},onClick:function(){return e.showModal(0)}},"创建通知公告"),w.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"填写公告",visible:this.state.modal_visible_edit},w.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit},w.a.createElement(G,L()({},c,{label:"公告标题"}),r("title",{rules:[{message:"请输入公告标题！",whitespace:!0}]})(w.a.createElement(D.a,{placeholder:"公告标题"}))),w.a.createElement(G,L()({},c,{label:"公告链接"}),r("link",{rules:[{message:"请输入公告链接！",whitespace:!0}]})(w.a.createElement(D.a,{placeholder:"公告链接"}))),w.a.createElement(G,L()({},c,{hasFeedback:!0,label:"背景图片"}),r("img_url",{rules:[{message:"请输入背景图片链接"}]})(w.a.createElement(D.a,{placeholder:"背景图片链接",type:"text"}))),w.a.createElement(G,L()({},c,{label:"是否有效"}),r("enable",{valuePropName:"checked"})(w.a.createElement(O.a,null))),w.a.createElement(G,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},w.a.createElement(T.a,{className:"register-btn",htmlType:"submit",type:"primary"},i?"更新":"创建公告")))),w.a.createElement(C.a,{columns:this.state.columns,dataSource:t.notice,loading:n,rowKey:"option_id"})))}}]),t}(w.a.Component))||n),W=q.a.create()(J),Q=(M.a.Option,q.a.Item),X=R.a.confirm,Z=(D.a.TextArea,Object(k.b)((function(e){return{stateWebsiteConfig:e.stateWebsiteConfig}}))(i=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=h()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,a){return w.a.createElement("span",{style:{width:"20px",display:"block"}},"".concat(a+1))}},{title:"广告标题",dataIndex:"title",key:"title",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).title)}},{title:"广告链接",dataIndex:"link",key:"link",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).link)}},{title:"背景图片",dataIndex:"img_url",key:"img_url",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).img_url)}},{title:"是否可以用",dataIndex:"enable",key:"enable",render:function(e,t){return w.a.createElement("div",{className:"table-enable"},JSON.parse(t.option_value).enable?w.a.createElement(f.a,{type:"check-circle"}):w.a.createElement(f.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return w.a.createElement("div",{className:"operation-btn"},w.a.createElement("button",{onClick:function(){a._edit(t)},className:"btn btn-info",size:"small",type:"primary"},w.a.createElement(f.a,{type:"edit"})),w.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},w.a.createElement(f.a,{type:"delete"})))}}],loading:!1,modal_visible_edit:!1,is_create:!1,option_id:""},a._getOptionsList=function(){a.props.dispatch(P({option_key:"advertise"}))},a._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!0,option_id:e.option_id}),a.props.form.setFieldsValue(Object.assign({},JSON.parse(e.option_value)))},a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_edit:!0,is_create:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(console.log("Received values of form: ",n),t?a.props.dispatch(Y({option_id:a.state.option_id,option_key:"advertise",option_value:JSON.stringify(n)},(function(){a._getOptionsList()}))):a.props.dispatch(V({option_key:"advertise",option_value:JSON.stringify(n)},(function(){a._getOptionsList()})))),a.setState({modal_visible_edit:!1})}))},a._delete=function(e){X({title:"确认要删除此条广告吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.props.dispatch(K({option_id:e.option_id},(function(){a._getOptionsList()})))},onCancel:function(){console.log("Cancel")}})},a}return E()(t,e),g()(t,[{key:"componentDidMount",value:function(){this._getOptionsList()}},{key:"render",value:function(){var e=this,t=this.props.stateWebsiteConfig,a=this.state,n=a.loading,i=a.is_create,r=this.props.form.getFieldDecorator,c={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return w.a.createElement("div",{className:"card layout-main",id:"system-config"},w.a.createElement("div",{className:"card-body"},w.a.createElement("h4",{class:"header-title"},"系统Banner"),w.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",style:{marginBottom:"15px"},onClick:function(){return e.showModal(0)}},"创建Banner"),w.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"填写广告",visible:this.state.modal_visible_edit},w.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit},w.a.createElement(Q,L()({},c,{label:"广告标题"}),r("title",{rules:[{message:"请输入广告标题！",whitespace:!0}]})(w.a.createElement(D.a,{placeholder:"广告标题"}))),w.a.createElement(Q,L()({},c,{label:"广告链接"}),r("link",{rules:[{message:"请输入广告链接！",whitespace:!0}]})(w.a.createElement(D.a,{placeholder:"广告链接"}))),w.a.createElement(Q,L()({},c,{hasFeedback:!0,label:"背景图片"}),r("img_url",{rules:[{message:"请输入背景图片链接"}]})(w.a.createElement(D.a,{placeholder:"背景图片链接",type:"text"}))),w.a.createElement(Q,L()({},c,{label:"是否有效"}),r("enable",{valuePropName:"checked"})(w.a.createElement(O.a,null))),w.a.createElement(Q,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},w.a.createElement(T.a,{className:"register-btn",htmlType:"submit",type:"primary"},i?"更新":"创建广告")))),w.a.createElement(C.a,{columns:this.state.columns,dataSource:t.advertise,loading:n,rowKey:"option_id"})))}}]),t}(w.a.Component))||i),$=q.a.create()(Z),ee=(a(1183),Object(k.b)((function(e){return{stateWebsiteConfig:e.stateWebsiteConfig}}))(r=function(e){function t(){return d()(this,t),h()(this,y()(t).apply(this,arguments))}return E()(t,e),g()(t,[{key:"render",value:function(){return w.a.createElement("div",{className:"layout-main",id:"system-config"},w.a.createElement("div",{className:"layout-main-title"},w.a.createElement(o.a,null,w.a.createElement(o.a.Item,{href:"#/manager/index"},w.a.createElement(f.a,{type:"home"})),w.a.createElement(o.a.Item,{href:"#/manager/index"},w.a.createElement("span",null,"主页")),w.a.createElement(o.a.Item,{href:"#"},w.a.createElement("span",null,"网站管理")),w.a.createElement(o.a.Item,null,"网站配置"))),w.a.createElement(W,null),w.a.createElement($,null),w.a.createElement(s.a,{message:"备注",description:"应用于网站的某些配置公告等等",type:"warning",showIcon:!0}))}}]),t}(w.a.Component))||r);t.default=ee},1197:function(e,t,a){"use strict";a.r(t);a(187);var n=a(140),i=a.n(n),r=a(1127),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=(a(1128),a(1129)),u=a.n(o),f=(a(279),a(15)),m=a.n(f),d=(a(452),a(453)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=a(70),b=a.n(y),E=a(71),x=a.n(E),w=a(72),k=a.n(w),N=a(73),C=a.n(N),S=a(451),T=a.n(S),I=a(74),O=a.n(I),A=(a(449),a(1124)),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(1122),a(1123)),R=a.n(F),U=(a(450),a(280)),q=a.n(U),z=a(1),M=a.n(z),B=a(75),P=(a(1189),a(138)),V=a(1161),Y=a(139),K="/default/img/face/qq/",G=[{face_text:"[微笑]",face_url:K+"weixiao.gif",face_view:'<img src="'+K+'weixiao.gif"/>'},{face_text:"[撇嘴]",face_url:K+"pizui.gif",face_view:'<img src="'+K+'pizui.gif"/>'},{face_text:"[爱情]",face_url:K+"aiqing.gif",face_view:'<img src="'+K+'aiqing.gif"/>'},{face_text:"[色]",face_url:K+"se.gif",face_view:'<img src="'+K+'se.gif"/>'},{face_text:"[发呆]",face_url:K+"fadai.gif",face_view:'<img src="'+K+'fadai.gif"/>'},{face_text:"[得意]",face_url:K+"deyi.gif",face_view:'<img src="'+K+'deyi.gif"/>'},{face_text:"[流泪]",face_url:K+"liulei.gif",face_view:'<img src="'+K+'liulei.gif"/>'},{face_text:"[害羞]",face_url:K+"haixiu.gif",face_view:'<img src="'+K+'haixiu.gif"/>'},{face_text:"[闭嘴]",face_url:K+"bizui.gif",face_view:'<img src="'+K+'bizui.gif"/>'},{face_text:"[睡觉]",face_url:K+"shuijiao.gif",face_view:'<img src="'+K+'shuijiao.gif"/>'},{face_text:"[睡]",face_url:K+"shuijiao.gif",face_view:'<img src="'+K+'shuijiao.gif"/>'},{face_text:"[大哭]",face_url:K+"daku.gif",face_view:'<img src="'+K+'daku.gif"/>'},{face_text:"[尴尬]",face_url:K+"gangga.gif",face_view:'<img src="'+K+'gangga.gif"/>'},{face_text:"[发怒]",face_url:K+"danu.gif",face_view:'<img src="'+K+'danu.gif"/>'},{face_text:"[调皮]",face_url:K+"tiaopi.gif",face_view:'<img src="'+K+'tiaopi.gif"/>'},{face_text:"[呲牙]",face_url:K+"ciya.gif",face_view:'<img src="'+K+'ciya.gif"/>'},{face_text:"[惊讶]",face_url:K+"jingya.gif",face_view:'<img src="'+K+'jingya.gif"/>'},{face_text:"[难过]",face_url:K+"nanguo.gif",face_view:'<img src="'+K+'nanguo.gif"/>'},{face_text:"[酷]",face_url:K+"ku.gif",face_view:'<img src="'+K+'ku.gif"/>'},{face_text:"[冷汗]",face_url:K+"lenghan.gif",face_view:'<img src="'+K+'lenghan.gif"/>'},{face_text:"[抓狂]",face_url:K+"zhuakuang.gif",face_view:'<img src="'+K+'zhuakuang.gif"/>'},{face_text:"[吐]",face_url:K+"tu.gif",face_view:'<img src="'+K+'tu.gif"/>'},{face_text:"[偷笑]",face_url:K+"touxiao.gif",face_view:'<img src="'+K+'touxiao.gif"/>'},{face_text:"[可爱]",face_url:K+"keai.gif",face_view:'<img src="'+K+'keai.gif"/>'},{face_text:"[白眼]",face_url:K+"baiyan.gif",face_view:'<img src="'+K+'baiyan.gif"/>'},{face_text:"[傲慢]",face_url:K+"aoman.gif",face_view:'<img src="'+K+'aoman.gif"/>'},{face_text:"[饥饿]",face_url:K+"er.gif",face_view:'<img src="'+K+'er.gif"/>'},{face_text:"[困]",face_url:K+"kun.gif",face_view:'<img src="'+K+'kun.gif"/>'},{face_text:"[惊恐]",face_url:K+"jingkong.gif",face_view:'<img src="'+K+'jingkong.gif"/>'},{face_text:"[流汗]",face_url:K+"liuhan.gif",face_view:'<img src="'+K+'liuhan.gif"/>'},{face_text:"[憨笑]",face_url:K+"haha.gif",face_view:'<img src="'+K+'haha.gif"/>'},{face_text:"[大兵]",face_url:K+"dabing.gif",face_view:'<img src="'+K+'dabing.gif"/>'},{face_text:"[奋斗]",face_url:K+"fendou.gif",face_view:'<img src="'+K+'fendou.gif"/>'},{face_text:"[咒骂]",face_url:K+"ma.gif",face_view:'<img src="'+K+'ma.gif"/>'},{face_text:"[骂]",face_url:K+"ma.gif",face_view:'<img src="'+K+'ma.gif"/>'},{face_text:"[疑问]",face_url:K+"wen.gif",face_view:'<img src="'+K+'wen.gif"/>'},{face_text:"[问]",face_url:K+"wen.gif",face_view:'<img src="'+K+'wen.gif"/>'},{face_text:"[嘘]",face_url:K+"xu.gif",face_view:'<img src="'+K+'xu.gif"/>'},{face_text:"[晕]",face_url:K+"yun.gif",face_view:'<img src="'+K+'yun.gif"/>'},{face_text:"[折磨]",face_url:K+"zhemo.gif",face_view:'<img src="'+K+'zhemo.gif"/>'},{face_text:"[衰]",face_url:K+"shuai.gif",face_view:'<img src="'+K+'shuai.gif"/>'},{face_text:"[骷髅]",face_url:K+"kulou.gif",face_view:'<img src="'+K+'kulou.gif"/>'},{face_text:"[敲打]",face_url:K+"da.gif",face_view:'<img src="'+K+'da.gif"/>'},{face_text:"[再见]",face_url:K+"zaijian.gif",face_view:'<img src="'+K+'zaijian.gif"/>'},{face_text:"[擦汗]",face_url:K+"cahan.gif",face_view:'<img src="'+K+'cahan.gif"/>'},{face_text:"[挖鼻]",face_url:K+"wabi.gif",face_view:'<img src="'+K+'wabi.gif"/>'},{face_text:"[抠鼻]",face_url:K+"wabi.gif",face_view:'<img src="'+K+'wabi.gif"/>'},{face_text:"[鼓掌]",face_url:K+"guzhang.gif",face_view:'<img src="'+K+'guzhang.gif"/>'},{face_text:"[糗大了]",face_url:K+"qioudale.gif",face_view:'<img src="'+K+'qioudale.gif"/>'},{face_text:"[坏笑]",face_url:K+"huaixiao.gif",face_view:'<img src="'+K+'huaixiao.gif"/>'},{face_text:"[左哼哼]",face_url:K+"zuohengheng.gif",face_view:'<img src="'+K+'zuohengheng.gif"/>'},{face_text:"[右哼哼]",face_url:K+"youhengheng.gif",face_view:'<img src="'+K+'youhengheng.gif"/>'},{face_text:"[哈欠]",face_url:K+"haqian.gif",face_view:'<img src="'+K+'haqian.gif"/>'},{face_text:"[鄙视]",face_url:K+"bishi.gif",face_view:'<img src="'+K+'bishi.gif"/>'},{face_text:"[委屈]",face_url:K+"weiqu.gif",face_view:'<img src="'+K+'weiqu.gif"/>'},{face_text:"[哭了]",face_url:K+"ku.gif",face_view:'<img src="'+K+'ku.gif"/>'},{face_text:"[快哭了]",face_url:K+"kuaikule.gif",face_view:'<img src="'+K+'kuaikule.gif"/>'},{face_text:"[阴险]",face_url:K+"yinxian.gif",face_view:'<img src="'+K+'yinxian.gif"/>'},{face_text:"[亲亲]",face_url:K+"qinqin.gif",face_view:'<img src="'+K+'qinqin.gif"/>'},{face_text:"[示爱]",face_url:K+"kiss.gif",face_view:'<img src="'+K+'kiss.gif"/>'},{face_text:"[亲吻]",face_url:K+"kiss.gif",face_view:'<img src="'+K+'kiss.gif"/>'},{face_text:"[吓]",face_url:K+"xia.gif",face_view:'<img src="'+K+'xia.gif"/>'},{face_text:"[可怜]",face_url:K+"kelian.gif",face_view:'<img src="'+K+'kelian.gif"/>'},{face_text:"[菜刀]",face_url:K+"caidao.gif",face_view:'<img src="'+K+'caidao.gif"/>'},{face_text:"[西瓜]",face_url:K+"xigua.gif",face_view:'<img src="'+K+'xigua.gif"/>'},{face_text:"[啤酒]",face_url:K+"pijiu.gif",face_view:'<img src="'+K+'pijiu.gif"/>'},{face_text:"[篮球]",face_url:K+"lanqiu.gif",face_view:'<img src="'+K+'lanqiu.gif"/>'},{face_text:"[乒乓]",face_url:K+"pingpang.gif",face_view:'<img src="'+K+'pingpang.gif"/>'},{face_text:"[咖啡]",face_url:K+"kafei.gif",face_view:'<img src="'+K+'kafei.gif"/>'},{face_text:"[饭]",face_url:K+"fan.gif",face_view:'<img src="'+K+'fan.gif"/>'},{face_text:"[猪头]",face_url:K+"zhutou.gif",face_view:'<img src="'+K+'zhutou.gif"/>'},{face_text:"[花]",face_url:K+"hua.gif",face_view:'<img src="'+K+'hua.gif"/>'},{face_text:"[玫瑰]",face_url:K+"hua.gif",face_view:'<img src="'+K+'hua.gif"/>'},{face_text:"[凋谢]",face_url:K+"diaoxie.gif",face_view:'<img src="'+K+'diaoxie.gif"/>'},{face_text:"[爱心]",face_url:K+"love.gif",face_view:'<img src="'+K+'love.gif"/>'},{face_text:"[心碎]",face_url:K+"xinsui.gif",face_view:'<img src="'+K+'xinsui.gif"/>'},{face_text:"[蛋糕]",face_url:K+"dangao.gif",face_view:'<img src="'+K+'dangao.gif"/>'},{face_text:"[闪电]",face_url:K+"shandian.gif",face_view:'<img src="'+K+'shandian.gif"/>'},{face_text:"[地雷]",face_url:K+"zhadan.gif",face_view:'<img src="'+K+'zhadan.gif"/>'},{face_text:"[炸弹]",face_url:K+"zhadan.gif",face_view:'<img src="'+K+'zhadan.gif"/>'},{face_text:"[刀]",face_url:K+"dao.gif",face_view:'<img src="'+K+'dao.gif"/>'},{face_text:"[足球]",face_url:K+"qiu.gif",face_view:'<img src="'+K+'qiu.gif"/>'},{face_text:"[虫]",face_url:K+"chong.gif",face_view:'<img src="'+K+'chong.gif"/>'},{face_text:"[瓢虫]",face_url:K+"chong.gif",face_view:'<img src="'+K+'chong.gif"/>'},{face_text:"[便便]",face_url:K+"dabian.gif",face_view:'<img src="'+K+'dabian.gif"/>'},{face_text:"[月亮]",face_url:K+"yueliang.gif",face_view:'<img src="'+K+'yueliang.gif"/>'},{face_text:"[太阳]",face_url:K+"taiyang.gif",face_view:'<img src="'+K+'taiyang.gif"/>'},{face_text:"[礼物]",face_url:K+"liwu.gif",face_view:'<img src="'+K+'liwu.gif"/>'},{face_text:"[拥抱]",face_url:K+"yongbao.gif",face_view:'<img src="'+K+'yongbao.gif"/>'},{face_text:"[强]",face_url:K+"qiang.gif",face_view:'<img src="'+K+'qiang.gif"/>'},{face_text:"[弱]",face_url:K+"ruo.gif",face_view:'<img src="'+K+'ruo.gif"/>'},{face_text:"[握手]",face_url:K+"woshou.gif",face_view:'<img src="'+K+'woshou.gif"/>'},{face_text:"[胜利]",face_url:K+"shengli.gif",face_view:'<img src="'+K+'shengli.gif"/>'},{face_text:"[佩服]",face_url:K+"peifu.gif",face_view:'<img src="'+K+'peifu.gif"/>'},{face_text:"[抱拳]",face_url:K+"peifu.gif",face_view:'<img src="'+K+'peifu.gif"/>'},{face_text:"[勾引]",face_url:K+"gouyin.gif",face_view:'<img src="'+K+'gouyin.gif"/>'},{face_text:"[拳头]",face_url:K+"quantou.gif",face_view:'<img src="'+K+'quantou.gif"/>'},{face_text:"[差劲]",face_url:K+"chajin.gif",face_view:'<img src="'+K+'chajin.gif"/>'},{face_text:"[干杯]",face_url:K+"cheer.gif",face_view:'<img src="'+K+'cheer.gif"/>'},{face_text:"[no]",face_url:K+"no.gif",face_view:'<img src="'+K+'no.gif"/>'},{face_text:"[OK]",face_url:K+"ok.gif",face_view:'<img src="'+K+'ok.gif"/>'},{face_text:"[给力]",face_url:K+"geili.gif",face_view:'<img src="'+K+'geili.gif"/>'},{face_text:"[飞吻]",face_url:K+"feiwen.gif",face_view:'<img src="'+K+'feiwen.gif"/>'},{face_text:"[跳跳]",face_url:K+"tiao.gif",face_view:'<img src="'+K+'tiao.gif"/>'},{face_text:"[发抖]",face_url:K+"fadou.gif",face_view:'<img src="'+K+'fadou.gif"/>'},{face_text:"[怄火]",face_url:K+"dajiao.gif",face_view:'<img src="'+K+'dajiao.gif"/>'},{face_text:"[转圈]",face_url:K+"zhuanquan.gif",face_view:'<img src="'+K+'zhuanquan.gif"/>'},{face_text:"[磕头]",face_url:K+"ketou.gif",face_view:'<img src="'+K+'ketou.gif"/>'},{face_text:"[回头]",face_url:K+"huitou.gif",face_view:'<img src="'+K+'huitou.gif"/>'},{face_text:"[跳绳]",face_url:K+"tiaosheng.gif",face_view:'<img src="'+K+'tiaosheng.gif"/>'},{face_text:"[挥手]",face_url:K+"huishou.gif",face_view:'<img src="'+K+'huishou.gif"/>'},{face_text:"[激动]",face_url:K+"jidong.gif",face_view:'<img src="'+K+'jidong.gif"/>'},{face_text:"[街舞]",face_url:K+"tiaowu.gif",face_view:'<img src="'+K+'tiaowu.gif"/>'},{face_text:"[献吻]",face_url:K+"xianwen.gif",face_view:'<img src="'+K+'xianwen.gif"/>'},{face_text:"[左太极]",face_url:K+"zuotaiji.gif",face_view:'<img src="'+K+'zuotaiji.gif"/>'},{face_text:"[右太极]",face_url:K+"youtaiji.gif",face_view:'<img src="'+K+'youtaiji.gif"/>'}],H=q.a.Option,J=R.a.Item,W=D.a.confirm,Q=(L.a.TextArea,function(e){function t(e){var a;return b()(this,t),(a=k()(this,C()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0}),a.props.dispatch({type:"SET_BOOKS_COMMENT_INFO",data:e}),a.props.form.setFieldsValue({status:String(e.status)})},a._delete=function(e){a.props.dispatch({type:"SET_BOOKS_COMMENT_INFO",data:e}),W({title:"确认要删除此条用户评论吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteComment({id:a.props.stateBooksComment.current_info.id})},onCancel:function(){console.log("Cancel")}})},a.commentRender=function(e){console.log("val",e);var t=e;return G.map((function(e){t=t.replace(new RegExp("\\"+e.face_text,"g"),e.face_view)})),t},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchCommentList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||(console.log("Received values of form: ",t),a.fetchUpdateComment(t))}))},a.fetchUpdateComment=function(e){var t,n;a.props.dispatch((t=Object.assign({id:a.props.stateBooksComment.current_info.id},e),n=function(e){Y.a.message_success("修改用户评论成功"),a.fetchCommentList(),a.setState({modal_visible_edit:!1})},function(){P.a.post("/books-comment/update",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state;return{content:e.content_val,status:e.status_val}},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a.resetBarFrom=function(){a.setState({content_val:"",status_val:""})},a.fetchDeleteComment=function(e){var t,n;a.props.dispatch((t=e,n=function(e){Y.a.message_success("删除用户评论成功"),a.fetchCommentList()},function(){P.a.post("/books-comment/delete",t).then((function(e){n&&n(e)}))}))},a.fetchCommentList=function(){var e=a.getParams(),t=T()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){P.a.post("/books-comment/list",n).then((function(t){return i&&i(t),e({type:"GET_BOOKS_COMMENT_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return M.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"评论内容",dataIndex:"content",key:"content",render:function(e,t){return M.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.commentRender(t.content)}})}},{title:"来自小书",dataIndex:"books",key:"books",render:function(e,t){return M.a.createElement("div",null,t.books.title?M.a.createElement("a",{href:"/book/".concat(t.books.books_id),target:"_block"},t.books.title?t.books.title:"-"):"-")}},{title:"星级",dataIndex:"star",key:"star",render:function(e,t){return Number(t.parent_id)<1?M.a.createElement("div",null,t.star,"星"):"子评论无需评星"}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return M.a.createElement(_.a,{className:"table-books-tag-list",color:"orange"},a.state.otherStatusListText[t.status])}},{title:"评论时间",dataIndex:"create_dt",key:"create_dt"},{title:"操作",key:"action",render:function(e,t){return M.a.createElement("div",{className:"operation-btn"},M.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",className:"btn btn-info",type:"primary"},M.a.createElement(m.a,{type:"edit"})),M.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},M.a.createElement(m.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,modal_visible_edit:!1,otherStatusList:V.e,otherStatusListText:V.f,content_val:"",status_val:""},a}return O()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchCommentList()}},{key:"render",value:function(){var e=this,t=this.props.stateBooksComment,a=this.state,n=a.loading,r=a.content_val,s=a.status_val,o=this.props.form.getFieldDecorator;return M.a.createElement("div",{className:"layout-main"},M.a.createElement("div",{className:"layout-main-title"},M.a.createElement(u.a,null,M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement(m.a,{type:"home"})),M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement("span",null,"主页")),M.a.createElement(u.a.Item,{href:"#"},M.a.createElement("span",null,"小书管理")),M.a.createElement(u.a.Item,null,"小书评论管理"))),M.a.createElement("div",{className:"card"},M.a.createElement("div",{className:"card-body"},M.a.createElement("div",{className:"xsb-operation-menu"},M.a.createElement(R.a,{layout:"inline"},M.a.createElement(J,{label:"小书标题"},M.a.createElement(L.a,{value:r,onChange:function(t){e.changeVal(t.target.value,"content_val")}})),M.a.createElement(J,{label:"状态"},M.a.createElement(q.a,{className:"select-view",value:s,onChange:function(t){e.changeVal(t,"status_val")}},M.a.createElement(H,{value:""},"全部"),Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])})))),M.a.createElement(R.a.Item,null,M.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchCommentList},"搜索"),M.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),M.a.createElement(l.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"id"}))),M.a.createElement(D.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改",visible:this.state.modal_visible_edit},M.a.createElement(R.a,{className:"from-view",onSubmit:this.handleSubmit},M.a.createElement(J,c()({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},{hasFeedback:!0,label:"状态"}),o("status",{rules:[{required:!0,message:"请选择状态！"}]})(M.a.createElement(q.a,{placeholder:"状态"},Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])}))))),M.a.createElement(J,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},M.a.createElement(i.a,{className:"register-btn",htmlType:"submit",type:"primary"},"确定")))))}}]),t}(M.a.Component)),X=R.a.create()(Q);t.default=Object(B.b)((function(e){return{stateBooksComment:e.stateBooksComment}}))(X)},1198:function(e,t,a){"use strict";a.r(t);a(187);var n=a(140),i=a.n(n),r=a(1127),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=(a(1128),a(1129)),u=a.n(o),f=(a(279),a(15)),m=a.n(f),d=(a(452),a(453)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=a(70),b=a.n(y),E=a(71),x=a.n(E),w=a(72),k=a.n(w),N=a(73),C=a.n(N),S=a(451),T=a.n(S),I=a(74),O=a.n(I),A=(a(449),a(1124)),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(1122),a(1123)),R=a.n(F),U=(a(450),a(280)),q=a.n(U),z=a(1),M=a.n(z),B=a(75),P=(a(1177),a(138)),V=a(139),Y="/default/img/face/qq/",K=[{face_text:"[微笑]",face_url:Y+"weixiao.gif",face_view:'<img src="'+Y+'weixiao.gif"/>'},{face_text:"[撇嘴]",face_url:Y+"pizui.gif",face_view:'<img src="'+Y+'pizui.gif"/>'},{face_text:"[爱情]",face_url:Y+"aiqing.gif",face_view:'<img src="'+Y+'aiqing.gif"/>'},{face_text:"[色]",face_url:Y+"se.gif",face_view:'<img src="'+Y+'se.gif"/>'},{face_text:"[发呆]",face_url:Y+"fadai.gif",face_view:'<img src="'+Y+'fadai.gif"/>'},{face_text:"[得意]",face_url:Y+"deyi.gif",face_view:'<img src="'+Y+'deyi.gif"/>'},{face_text:"[流泪]",face_url:Y+"liulei.gif",face_view:'<img src="'+Y+'liulei.gif"/>'},{face_text:"[害羞]",face_url:Y+"haixiu.gif",face_view:'<img src="'+Y+'haixiu.gif"/>'},{face_text:"[闭嘴]",face_url:Y+"bizui.gif",face_view:'<img src="'+Y+'bizui.gif"/>'},{face_text:"[睡觉]",face_url:Y+"shuijiao.gif",face_view:'<img src="'+Y+'shuijiao.gif"/>'},{face_text:"[睡]",face_url:Y+"shuijiao.gif",face_view:'<img src="'+Y+'shuijiao.gif"/>'},{face_text:"[大哭]",face_url:Y+"daku.gif",face_view:'<img src="'+Y+'daku.gif"/>'},{face_text:"[尴尬]",face_url:Y+"gangga.gif",face_view:'<img src="'+Y+'gangga.gif"/>'},{face_text:"[发怒]",face_url:Y+"danu.gif",face_view:'<img src="'+Y+'danu.gif"/>'},{face_text:"[调皮]",face_url:Y+"tiaopi.gif",face_view:'<img src="'+Y+'tiaopi.gif"/>'},{face_text:"[呲牙]",face_url:Y+"ciya.gif",face_view:'<img src="'+Y+'ciya.gif"/>'},{face_text:"[惊讶]",face_url:Y+"jingya.gif",face_view:'<img src="'+Y+'jingya.gif"/>'},{face_text:"[难过]",face_url:Y+"nanguo.gif",face_view:'<img src="'+Y+'nanguo.gif"/>'},{face_text:"[酷]",face_url:Y+"ku.gif",face_view:'<img src="'+Y+'ku.gif"/>'},{face_text:"[冷汗]",face_url:Y+"lenghan.gif",face_view:'<img src="'+Y+'lenghan.gif"/>'},{face_text:"[抓狂]",face_url:Y+"zhuakuang.gif",face_view:'<img src="'+Y+'zhuakuang.gif"/>'},{face_text:"[吐]",face_url:Y+"tu.gif",face_view:'<img src="'+Y+'tu.gif"/>'},{face_text:"[偷笑]",face_url:Y+"touxiao.gif",face_view:'<img src="'+Y+'touxiao.gif"/>'},{face_text:"[可爱]",face_url:Y+"keai.gif",face_view:'<img src="'+Y+'keai.gif"/>'},{face_text:"[白眼]",face_url:Y+"baiyan.gif",face_view:'<img src="'+Y+'baiyan.gif"/>'},{face_text:"[傲慢]",face_url:Y+"aoman.gif",face_view:'<img src="'+Y+'aoman.gif"/>'},{face_text:"[饥饿]",face_url:Y+"er.gif",face_view:'<img src="'+Y+'er.gif"/>'},{face_text:"[困]",face_url:Y+"kun.gif",face_view:'<img src="'+Y+'kun.gif"/>'},{face_text:"[惊恐]",face_url:Y+"jingkong.gif",face_view:'<img src="'+Y+'jingkong.gif"/>'},{face_text:"[流汗]",face_url:Y+"liuhan.gif",face_view:'<img src="'+Y+'liuhan.gif"/>'},{face_text:"[憨笑]",face_url:Y+"haha.gif",face_view:'<img src="'+Y+'haha.gif"/>'},{face_text:"[大兵]",face_url:Y+"dabing.gif",face_view:'<img src="'+Y+'dabing.gif"/>'},{face_text:"[奋斗]",face_url:Y+"fendou.gif",face_view:'<img src="'+Y+'fendou.gif"/>'},{face_text:"[咒骂]",face_url:Y+"ma.gif",face_view:'<img src="'+Y+'ma.gif"/>'},{face_text:"[骂]",face_url:Y+"ma.gif",face_view:'<img src="'+Y+'ma.gif"/>'},{face_text:"[疑问]",face_url:Y+"wen.gif",face_view:'<img src="'+Y+'wen.gif"/>'},{face_text:"[问]",face_url:Y+"wen.gif",face_view:'<img src="'+Y+'wen.gif"/>'},{face_text:"[嘘]",face_url:Y+"xu.gif",face_view:'<img src="'+Y+'xu.gif"/>'},{face_text:"[晕]",face_url:Y+"yun.gif",face_view:'<img src="'+Y+'yun.gif"/>'},{face_text:"[折磨]",face_url:Y+"zhemo.gif",face_view:'<img src="'+Y+'zhemo.gif"/>'},{face_text:"[衰]",face_url:Y+"shuai.gif",face_view:'<img src="'+Y+'shuai.gif"/>'},{face_text:"[骷髅]",face_url:Y+"kulou.gif",face_view:'<img src="'+Y+'kulou.gif"/>'},{face_text:"[敲打]",face_url:Y+"da.gif",face_view:'<img src="'+Y+'da.gif"/>'},{face_text:"[再见]",face_url:Y+"zaijian.gif",face_view:'<img src="'+Y+'zaijian.gif"/>'},{face_text:"[擦汗]",face_url:Y+"cahan.gif",face_view:'<img src="'+Y+'cahan.gif"/>'},{face_text:"[挖鼻]",face_url:Y+"wabi.gif",face_view:'<img src="'+Y+'wabi.gif"/>'},{face_text:"[抠鼻]",face_url:Y+"wabi.gif",face_view:'<img src="'+Y+'wabi.gif"/>'},{face_text:"[鼓掌]",face_url:Y+"guzhang.gif",face_view:'<img src="'+Y+'guzhang.gif"/>'},{face_text:"[糗大了]",face_url:Y+"qioudale.gif",face_view:'<img src="'+Y+'qioudale.gif"/>'},{face_text:"[坏笑]",face_url:Y+"huaixiao.gif",face_view:'<img src="'+Y+'huaixiao.gif"/>'},{face_text:"[左哼哼]",face_url:Y+"zuohengheng.gif",face_view:'<img src="'+Y+'zuohengheng.gif"/>'},{face_text:"[右哼哼]",face_url:Y+"youhengheng.gif",face_view:'<img src="'+Y+'youhengheng.gif"/>'},{face_text:"[哈欠]",face_url:Y+"haqian.gif",face_view:'<img src="'+Y+'haqian.gif"/>'},{face_text:"[鄙视]",face_url:Y+"bishi.gif",face_view:'<img src="'+Y+'bishi.gif"/>'},{face_text:"[委屈]",face_url:Y+"weiqu.gif",face_view:'<img src="'+Y+'weiqu.gif"/>'},{face_text:"[哭了]",face_url:Y+"ku.gif",face_view:'<img src="'+Y+'ku.gif"/>'},{face_text:"[快哭了]",face_url:Y+"kuaikule.gif",face_view:'<img src="'+Y+'kuaikule.gif"/>'},{face_text:"[阴险]",face_url:Y+"yinxian.gif",face_view:'<img src="'+Y+'yinxian.gif"/>'},{face_text:"[亲亲]",face_url:Y+"qinqin.gif",face_view:'<img src="'+Y+'qinqin.gif"/>'},{face_text:"[示爱]",face_url:Y+"kiss.gif",face_view:'<img src="'+Y+'kiss.gif"/>'},{face_text:"[亲吻]",face_url:Y+"kiss.gif",face_view:'<img src="'+Y+'kiss.gif"/>'},{face_text:"[吓]",face_url:Y+"xia.gif",face_view:'<img src="'+Y+'xia.gif"/>'},{face_text:"[可怜]",face_url:Y+"kelian.gif",face_view:'<img src="'+Y+'kelian.gif"/>'},{face_text:"[菜刀]",face_url:Y+"caidao.gif",face_view:'<img src="'+Y+'caidao.gif"/>'},{face_text:"[西瓜]",face_url:Y+"xigua.gif",face_view:'<img src="'+Y+'xigua.gif"/>'},{face_text:"[啤酒]",face_url:Y+"pijiu.gif",face_view:'<img src="'+Y+'pijiu.gif"/>'},{face_text:"[篮球]",face_url:Y+"lanqiu.gif",face_view:'<img src="'+Y+'lanqiu.gif"/>'},{face_text:"[乒乓]",face_url:Y+"pingpang.gif",face_view:'<img src="'+Y+'pingpang.gif"/>'},{face_text:"[咖啡]",face_url:Y+"kafei.gif",face_view:'<img src="'+Y+'kafei.gif"/>'},{face_text:"[饭]",face_url:Y+"fan.gif",face_view:'<img src="'+Y+'fan.gif"/>'},{face_text:"[猪头]",face_url:Y+"zhutou.gif",face_view:'<img src="'+Y+'zhutou.gif"/>'},{face_text:"[花]",face_url:Y+"hua.gif",face_view:'<img src="'+Y+'hua.gif"/>'},{face_text:"[玫瑰]",face_url:Y+"hua.gif",face_view:'<img src="'+Y+'hua.gif"/>'},{face_text:"[凋谢]",face_url:Y+"diaoxie.gif",face_view:'<img src="'+Y+'diaoxie.gif"/>'},{face_text:"[爱心]",face_url:Y+"love.gif",face_view:'<img src="'+Y+'love.gif"/>'},{face_text:"[心碎]",face_url:Y+"xinsui.gif",face_view:'<img src="'+Y+'xinsui.gif"/>'},{face_text:"[蛋糕]",face_url:Y+"dangao.gif",face_view:'<img src="'+Y+'dangao.gif"/>'},{face_text:"[闪电]",face_url:Y+"shandian.gif",face_view:'<img src="'+Y+'shandian.gif"/>'},{face_text:"[地雷]",face_url:Y+"zhadan.gif",face_view:'<img src="'+Y+'zhadan.gif"/>'},{face_text:"[炸弹]",face_url:Y+"zhadan.gif",face_view:'<img src="'+Y+'zhadan.gif"/>'},{face_text:"[刀]",face_url:Y+"dao.gif",face_view:'<img src="'+Y+'dao.gif"/>'},{face_text:"[足球]",face_url:Y+"qiu.gif",face_view:'<img src="'+Y+'qiu.gif"/>'},{face_text:"[虫]",face_url:Y+"chong.gif",face_view:'<img src="'+Y+'chong.gif"/>'},{face_text:"[瓢虫]",face_url:Y+"chong.gif",face_view:'<img src="'+Y+'chong.gif"/>'},{face_text:"[便便]",face_url:Y+"dabian.gif",face_view:'<img src="'+Y+'dabian.gif"/>'},{face_text:"[月亮]",face_url:Y+"yueliang.gif",face_view:'<img src="'+Y+'yueliang.gif"/>'},{face_text:"[太阳]",face_url:Y+"taiyang.gif",face_view:'<img src="'+Y+'taiyang.gif"/>'},{face_text:"[礼物]",face_url:Y+"liwu.gif",face_view:'<img src="'+Y+'liwu.gif"/>'},{face_text:"[拥抱]",face_url:Y+"yongbao.gif",face_view:'<img src="'+Y+'yongbao.gif"/>'},{face_text:"[强]",face_url:Y+"qiang.gif",face_view:'<img src="'+Y+'qiang.gif"/>'},{face_text:"[弱]",face_url:Y+"ruo.gif",face_view:'<img src="'+Y+'ruo.gif"/>'},{face_text:"[握手]",face_url:Y+"woshou.gif",face_view:'<img src="'+Y+'woshou.gif"/>'},{face_text:"[胜利]",face_url:Y+"shengli.gif",face_view:'<img src="'+Y+'shengli.gif"/>'},{face_text:"[佩服]",face_url:Y+"peifu.gif",face_view:'<img src="'+Y+'peifu.gif"/>'},{face_text:"[抱拳]",face_url:Y+"peifu.gif",face_view:'<img src="'+Y+'peifu.gif"/>'},{face_text:"[勾引]",face_url:Y+"gouyin.gif",face_view:'<img src="'+Y+'gouyin.gif"/>'},{face_text:"[拳头]",face_url:Y+"quantou.gif",face_view:'<img src="'+Y+'quantou.gif"/>'},{face_text:"[差劲]",face_url:Y+"chajin.gif",face_view:'<img src="'+Y+'chajin.gif"/>'},{face_text:"[干杯]",face_url:Y+"cheer.gif",face_view:'<img src="'+Y+'cheer.gif"/>'},{face_text:"[no]",face_url:Y+"no.gif",face_view:'<img src="'+Y+'no.gif"/>'},{face_text:"[OK]",face_url:Y+"ok.gif",face_view:'<img src="'+Y+'ok.gif"/>'},{face_text:"[给力]",face_url:Y+"geili.gif",face_view:'<img src="'+Y+'geili.gif"/>'},{face_text:"[飞吻]",face_url:Y+"feiwen.gif",face_view:'<img src="'+Y+'feiwen.gif"/>'},{face_text:"[跳跳]",face_url:Y+"tiao.gif",face_view:'<img src="'+Y+'tiao.gif"/>'},{face_text:"[发抖]",face_url:Y+"fadou.gif",face_view:'<img src="'+Y+'fadou.gif"/>'},{face_text:"[怄火]",face_url:Y+"dajiao.gif",face_view:'<img src="'+Y+'dajiao.gif"/>'},{face_text:"[转圈]",face_url:Y+"zhuanquan.gif",face_view:'<img src="'+Y+'zhuanquan.gif"/>'},{face_text:"[磕头]",face_url:Y+"ketou.gif",face_view:'<img src="'+Y+'ketou.gif"/>'},{face_text:"[回头]",face_url:Y+"huitou.gif",face_view:'<img src="'+Y+'huitou.gif"/>'},{face_text:"[跳绳]",face_url:Y+"tiaosheng.gif",face_view:'<img src="'+Y+'tiaosheng.gif"/>'},{face_text:"[挥手]",face_url:Y+"huishou.gif",face_view:'<img src="'+Y+'huishou.gif"/>'},{face_text:"[激动]",face_url:Y+"jidong.gif",face_view:'<img src="'+Y+'jidong.gif"/>'},{face_text:"[街舞]",face_url:Y+"tiaowu.gif",face_view:'<img src="'+Y+'tiaowu.gif"/>'},{face_text:"[献吻]",face_url:Y+"xianwen.gif",face_view:'<img src="'+Y+'xianwen.gif"/>'},{face_text:"[左太极]",face_url:Y+"zuotaiji.gif",face_view:'<img src="'+Y+'zuotaiji.gif"/>'},{face_text:"[右太极]",face_url:Y+"youtaiji.gif",face_view:'<img src="'+Y+'youtaiji.gif"/>'}],G=a(1161),H=q.a.Option,J=R.a.Item,W=D.a.confirm,Q=(L.a.TextArea,function(e){function t(e){var a;return b()(this,t),(a=k()(this,C()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0}),a.props.dispatch({type:"SET_COMMENT_INFO",data:e}),a.props.form.setFieldsValue({status:String(e.status)})},a._delete=function(e){a.props.dispatch({type:"SET_COMMENT_INFO",data:e}),W({title:"确认要删除此条用户评论吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteComment({id:a.props.stateArticleComment.current_info.id})},onCancel:function(){console.log("Cancel")}})},a.commentRender=function(e){console.log("val",e);var t=e;return K.map((function(e){t=t.replace(new RegExp("\\"+e.face_text,"g"),e.face_view)})),t},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchCommentList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||(console.log("Received values of form: ",t),a.fetchUpdateComment(t))}))},a.fetchUpdateComment=function(e){var t,n;a.props.dispatch((t=Object.assign({id:a.props.stateArticleComment.current_info.id},e),n=function(e){V.a.message_success("修改用户评论成功"),a.fetchCommentList(),a.setState({modal_visible_edit:!1})},function(){P.a.post("/article-comment/update",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state;return{content:e.content_val,status:e.status_val}},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a.resetBarFrom=function(){a.setState({content_val:"",status_val:""})},a.fetchDeleteComment=function(e){var t,n;a.props.dispatch((t=e,n=function(e){V.a.message_success("删除用户评论成功"),a.fetchCommentList()},function(){P.a.post("/article-comment/delete",t).then((function(e){n&&n(e)}))}))},a.fetchCommentList=function(){var e=a.getParams(),t=T()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){P.a.post("/article-comment/list",n).then((function(t){return i&&i(t),e({type:"GET_COMMENT_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return M.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"评论内容",dataIndex:"content",key:"content",render:function(e,t){return M.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.commentRender(t.content)}})}},{title:"来自文章",dataIndex:"article",key:"article",render:function(e,t){return M.a.createElement("div",null,M.a.createElement("a",{href:"/p/".concat(t.article.aid),target:"_block"},t.article.title))}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return M.a.createElement(_.a,{className:"table-article-tag-list",color:"orange"},a.state.otherStatusListText[t.status])}},{title:"评论时间",dataIndex:"create_dt",key:"create_dt"},{title:"操作",key:"action",render:function(e,t){return M.a.createElement("div",{className:"operation-btn"},M.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",className:"btn btn-info",type:"primary"},M.a.createElement(m.a,{type:"edit"})),M.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},M.a.createElement(m.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,modal_visible_edit:!1,otherStatusList:G.e,otherStatusListText:G.f,content_val:"",status_val:""},a}return O()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchCommentList()}},{key:"render",value:function(){var e=this,t=this.props.stateArticleComment,a=this.state,n=a.loading,r=a.content_val,s=a.status_val,o=this.props.form.getFieldDecorator;return M.a.createElement("div",{className:"layout-main"},M.a.createElement("div",{className:"layout-main-title"},M.a.createElement(u.a,null,M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement(m.a,{type:"home"})),M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement("span",null,"主页")),M.a.createElement(u.a.Item,{href:"#"},M.a.createElement("span",null,"文章管理")),M.a.createElement(u.a.Item,null,"文章评论管理"))),M.a.createElement("div",{className:"card"},M.a.createElement("div",{className:"card-body"},M.a.createElement("div",{className:"xsb-operation-menu"},M.a.createElement(R.a,{layout:"inline"},M.a.createElement(J,{label:"文章标题"},M.a.createElement(L.a,{value:r,onChange:function(t){e.changeVal(t.target.value,"content_val")}})),M.a.createElement(J,{label:"状态"},M.a.createElement(q.a,{className:"select-view",value:s,onChange:function(t){e.changeVal(t,"status_val")}},M.a.createElement(H,{value:""},"全部"),Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])})))),M.a.createElement(R.a.Item,null,M.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchCommentList},"搜索"),M.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),M.a.createElement(l.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"id"}))),M.a.createElement(D.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改",visible:this.state.modal_visible_edit},M.a.createElement(R.a,{className:"from-view",onSubmit:this.handleSubmit},M.a.createElement(J,c()({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},{hasFeedback:!0,label:"状态"}),o("status",{rules:[{required:!0,message:"请选择状态！"}]})(M.a.createElement(q.a,{placeholder:"状态"},Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])}))))),M.a.createElement(J,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},M.a.createElement(i.a,{className:"register-btn",htmlType:"submit",type:"primary"},"确定")))))}}]),t}(M.a.Component)),X=R.a.create()(Q);t.default=Object(B.b)((function(e){return{stateArticleComment:e.stateArticleComment}}))(X)},1199:function(e,t,a){"use strict";a.r(t);a(187);var n=a(140),i=a.n(n),r=a(1127),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=(a(1128),a(1129)),u=a.n(o),f=(a(279),a(15)),m=a.n(f),d=(a(452),a(453)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=a(70),b=a.n(y),E=a(71),x=a.n(E),w=a(72),k=a.n(w),N=a(73),C=a.n(N),S=a(451),T=a.n(S),I=a(74),O=a.n(I),A=(a(449),a(1124)),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(1122),a(1123)),R=a.n(F),U=(a(450),a(280)),q=a.n(U),z=a(1),M=a.n(z),B=a(75),P=a(1161),V=(a(1186),a(138)),Y=a(139),K="/default/img/face/qq/",G=[{face_text:"[微笑]",face_url:K+"weixiao.gif",face_view:'<img src="'+K+'weixiao.gif"/>'},{face_text:"[撇嘴]",face_url:K+"pizui.gif",face_view:'<img src="'+K+'pizui.gif"/>'},{face_text:"[爱情]",face_url:K+"aiqing.gif",face_view:'<img src="'+K+'aiqing.gif"/>'},{face_text:"[色]",face_url:K+"se.gif",face_view:'<img src="'+K+'se.gif"/>'},{face_text:"[发呆]",face_url:K+"fadai.gif",face_view:'<img src="'+K+'fadai.gif"/>'},{face_text:"[得意]",face_url:K+"deyi.gif",face_view:'<img src="'+K+'deyi.gif"/>'},{face_text:"[流泪]",face_url:K+"liulei.gif",face_view:'<img src="'+K+'liulei.gif"/>'},{face_text:"[害羞]",face_url:K+"haixiu.gif",face_view:'<img src="'+K+'haixiu.gif"/>'},{face_text:"[闭嘴]",face_url:K+"bizui.gif",face_view:'<img src="'+K+'bizui.gif"/>'},{face_text:"[睡觉]",face_url:K+"shuijiao.gif",face_view:'<img src="'+K+'shuijiao.gif"/>'},{face_text:"[睡]",face_url:K+"shuijiao.gif",face_view:'<img src="'+K+'shuijiao.gif"/>'},{face_text:"[大哭]",face_url:K+"daku.gif",face_view:'<img src="'+K+'daku.gif"/>'},{face_text:"[尴尬]",face_url:K+"gangga.gif",face_view:'<img src="'+K+'gangga.gif"/>'},{face_text:"[发怒]",face_url:K+"danu.gif",face_view:'<img src="'+K+'danu.gif"/>'},{face_text:"[调皮]",face_url:K+"tiaopi.gif",face_view:'<img src="'+K+'tiaopi.gif"/>'},{face_text:"[呲牙]",face_url:K+"ciya.gif",face_view:'<img src="'+K+'ciya.gif"/>'},{face_text:"[惊讶]",face_url:K+"jingya.gif",face_view:'<img src="'+K+'jingya.gif"/>'},{face_text:"[难过]",face_url:K+"nanguo.gif",face_view:'<img src="'+K+'nanguo.gif"/>'},{face_text:"[酷]",face_url:K+"ku.gif",face_view:'<img src="'+K+'ku.gif"/>'},{face_text:"[冷汗]",face_url:K+"lenghan.gif",face_view:'<img src="'+K+'lenghan.gif"/>'},{face_text:"[抓狂]",face_url:K+"zhuakuang.gif",face_view:'<img src="'+K+'zhuakuang.gif"/>'},{face_text:"[吐]",face_url:K+"tu.gif",face_view:'<img src="'+K+'tu.gif"/>'},{face_text:"[偷笑]",face_url:K+"touxiao.gif",face_view:'<img src="'+K+'touxiao.gif"/>'},{face_text:"[可爱]",face_url:K+"keai.gif",face_view:'<img src="'+K+'keai.gif"/>'},{face_text:"[白眼]",face_url:K+"baiyan.gif",face_view:'<img src="'+K+'baiyan.gif"/>'},{face_text:"[傲慢]",face_url:K+"aoman.gif",face_view:'<img src="'+K+'aoman.gif"/>'},{face_text:"[饥饿]",face_url:K+"er.gif",face_view:'<img src="'+K+'er.gif"/>'},{face_text:"[困]",face_url:K+"kun.gif",face_view:'<img src="'+K+'kun.gif"/>'},{face_text:"[惊恐]",face_url:K+"jingkong.gif",face_view:'<img src="'+K+'jingkong.gif"/>'},{face_text:"[流汗]",face_url:K+"liuhan.gif",face_view:'<img src="'+K+'liuhan.gif"/>'},{face_text:"[憨笑]",face_url:K+"haha.gif",face_view:'<img src="'+K+'haha.gif"/>'},{face_text:"[大兵]",face_url:K+"dabing.gif",face_view:'<img src="'+K+'dabing.gif"/>'},{face_text:"[奋斗]",face_url:K+"fendou.gif",face_view:'<img src="'+K+'fendou.gif"/>'},{face_text:"[咒骂]",face_url:K+"ma.gif",face_view:'<img src="'+K+'ma.gif"/>'},{face_text:"[骂]",face_url:K+"ma.gif",face_view:'<img src="'+K+'ma.gif"/>'},{face_text:"[疑问]",face_url:K+"wen.gif",face_view:'<img src="'+K+'wen.gif"/>'},{face_text:"[问]",face_url:K+"wen.gif",face_view:'<img src="'+K+'wen.gif"/>'},{face_text:"[嘘]",face_url:K+"xu.gif",face_view:'<img src="'+K+'xu.gif"/>'},{face_text:"[晕]",face_url:K+"yun.gif",face_view:'<img src="'+K+'yun.gif"/>'},{face_text:"[折磨]",face_url:K+"zhemo.gif",face_view:'<img src="'+K+'zhemo.gif"/>'},{face_text:"[衰]",face_url:K+"shuai.gif",face_view:'<img src="'+K+'shuai.gif"/>'},{face_text:"[骷髅]",face_url:K+"kulou.gif",face_view:'<img src="'+K+'kulou.gif"/>'},{face_text:"[敲打]",face_url:K+"da.gif",face_view:'<img src="'+K+'da.gif"/>'},{face_text:"[再见]",face_url:K+"zaijian.gif",face_view:'<img src="'+K+'zaijian.gif"/>'},{face_text:"[擦汗]",face_url:K+"cahan.gif",face_view:'<img src="'+K+'cahan.gif"/>'},{face_text:"[挖鼻]",face_url:K+"wabi.gif",face_view:'<img src="'+K+'wabi.gif"/>'},{face_text:"[抠鼻]",face_url:K+"wabi.gif",face_view:'<img src="'+K+'wabi.gif"/>'},{face_text:"[鼓掌]",face_url:K+"guzhang.gif",face_view:'<img src="'+K+'guzhang.gif"/>'},{face_text:"[糗大了]",face_url:K+"qioudale.gif",face_view:'<img src="'+K+'qioudale.gif"/>'},{face_text:"[坏笑]",face_url:K+"huaixiao.gif",face_view:'<img src="'+K+'huaixiao.gif"/>'},{face_text:"[左哼哼]",face_url:K+"zuohengheng.gif",face_view:'<img src="'+K+'zuohengheng.gif"/>'},{face_text:"[右哼哼]",face_url:K+"youhengheng.gif",face_view:'<img src="'+K+'youhengheng.gif"/>'},{face_text:"[哈欠]",face_url:K+"haqian.gif",face_view:'<img src="'+K+'haqian.gif"/>'},{face_text:"[鄙视]",face_url:K+"bishi.gif",face_view:'<img src="'+K+'bishi.gif"/>'},{face_text:"[委屈]",face_url:K+"weiqu.gif",face_view:'<img src="'+K+'weiqu.gif"/>'},{face_text:"[哭了]",face_url:K+"ku.gif",face_view:'<img src="'+K+'ku.gif"/>'},{face_text:"[快哭了]",face_url:K+"kuaikule.gif",face_view:'<img src="'+K+'kuaikule.gif"/>'},{face_text:"[阴险]",face_url:K+"yinxian.gif",face_view:'<img src="'+K+'yinxian.gif"/>'},{face_text:"[亲亲]",face_url:K+"qinqin.gif",face_view:'<img src="'+K+'qinqin.gif"/>'},{face_text:"[示爱]",face_url:K+"kiss.gif",face_view:'<img src="'+K+'kiss.gif"/>'},{face_text:"[亲吻]",face_url:K+"kiss.gif",face_view:'<img src="'+K+'kiss.gif"/>'},{face_text:"[吓]",face_url:K+"xia.gif",face_view:'<img src="'+K+'xia.gif"/>'},{face_text:"[可怜]",face_url:K+"kelian.gif",face_view:'<img src="'+K+'kelian.gif"/>'},{face_text:"[菜刀]",face_url:K+"caidao.gif",face_view:'<img src="'+K+'caidao.gif"/>'},{face_text:"[西瓜]",face_url:K+"xigua.gif",face_view:'<img src="'+K+'xigua.gif"/>'},{face_text:"[啤酒]",face_url:K+"pijiu.gif",face_view:'<img src="'+K+'pijiu.gif"/>'},{face_text:"[篮球]",face_url:K+"lanqiu.gif",face_view:'<img src="'+K+'lanqiu.gif"/>'},{face_text:"[乒乓]",face_url:K+"pingpang.gif",face_view:'<img src="'+K+'pingpang.gif"/>'},{face_text:"[咖啡]",face_url:K+"kafei.gif",face_view:'<img src="'+K+'kafei.gif"/>'},{face_text:"[饭]",face_url:K+"fan.gif",face_view:'<img src="'+K+'fan.gif"/>'},{face_text:"[猪头]",face_url:K+"zhutou.gif",face_view:'<img src="'+K+'zhutou.gif"/>'},{face_text:"[花]",face_url:K+"hua.gif",face_view:'<img src="'+K+'hua.gif"/>'},{face_text:"[玫瑰]",face_url:K+"hua.gif",face_view:'<img src="'+K+'hua.gif"/>'},{face_text:"[凋谢]",face_url:K+"diaoxie.gif",face_view:'<img src="'+K+'diaoxie.gif"/>'},{face_text:"[爱心]",face_url:K+"love.gif",face_view:'<img src="'+K+'love.gif"/>'},{face_text:"[心碎]",face_url:K+"xinsui.gif",face_view:'<img src="'+K+'xinsui.gif"/>'},{face_text:"[蛋糕]",face_url:K+"dangao.gif",face_view:'<img src="'+K+'dangao.gif"/>'},{face_text:"[闪电]",face_url:K+"shandian.gif",face_view:'<img src="'+K+'shandian.gif"/>'},{face_text:"[地雷]",face_url:K+"zhadan.gif",face_view:'<img src="'+K+'zhadan.gif"/>'},{face_text:"[炸弹]",face_url:K+"zhadan.gif",face_view:'<img src="'+K+'zhadan.gif"/>'},{face_text:"[刀]",face_url:K+"dao.gif",face_view:'<img src="'+K+'dao.gif"/>'},{face_text:"[足球]",face_url:K+"qiu.gif",face_view:'<img src="'+K+'qiu.gif"/>'},{face_text:"[虫]",face_url:K+"chong.gif",face_view:'<img src="'+K+'chong.gif"/>'},{face_text:"[瓢虫]",face_url:K+"chong.gif",face_view:'<img src="'+K+'chong.gif"/>'},{face_text:"[便便]",face_url:K+"dabian.gif",face_view:'<img src="'+K+'dabian.gif"/>'},{face_text:"[月亮]",face_url:K+"yueliang.gif",face_view:'<img src="'+K+'yueliang.gif"/>'},{face_text:"[太阳]",face_url:K+"taiyang.gif",face_view:'<img src="'+K+'taiyang.gif"/>'},{face_text:"[礼物]",face_url:K+"liwu.gif",face_view:'<img src="'+K+'liwu.gif"/>'},{face_text:"[拥抱]",face_url:K+"yongbao.gif",face_view:'<img src="'+K+'yongbao.gif"/>'},{face_text:"[强]",face_url:K+"qiang.gif",face_view:'<img src="'+K+'qiang.gif"/>'},{face_text:"[弱]",face_url:K+"ruo.gif",face_view:'<img src="'+K+'ruo.gif"/>'},{face_text:"[握手]",face_url:K+"woshou.gif",face_view:'<img src="'+K+'woshou.gif"/>'},{face_text:"[胜利]",face_url:K+"shengli.gif",face_view:'<img src="'+K+'shengli.gif"/>'},{face_text:"[佩服]",face_url:K+"peifu.gif",face_view:'<img src="'+K+'peifu.gif"/>'},{face_text:"[抱拳]",face_url:K+"peifu.gif",face_view:'<img src="'+K+'peifu.gif"/>'},{face_text:"[勾引]",face_url:K+"gouyin.gif",face_view:'<img src="'+K+'gouyin.gif"/>'},{face_text:"[拳头]",face_url:K+"quantou.gif",face_view:'<img src="'+K+'quantou.gif"/>'},{face_text:"[差劲]",face_url:K+"chajin.gif",face_view:'<img src="'+K+'chajin.gif"/>'},{face_text:"[干杯]",face_url:K+"cheer.gif",face_view:'<img src="'+K+'cheer.gif"/>'},{face_text:"[no]",face_url:K+"no.gif",face_view:'<img src="'+K+'no.gif"/>'},{face_text:"[OK]",face_url:K+"ok.gif",face_view:'<img src="'+K+'ok.gif"/>'},{face_text:"[给力]",face_url:K+"geili.gif",face_view:'<img src="'+K+'geili.gif"/>'},{face_text:"[飞吻]",face_url:K+"feiwen.gif",face_view:'<img src="'+K+'feiwen.gif"/>'},{face_text:"[跳跳]",face_url:K+"tiao.gif",face_view:'<img src="'+K+'tiao.gif"/>'},{face_text:"[发抖]",face_url:K+"fadou.gif",face_view:'<img src="'+K+'fadou.gif"/>'},{face_text:"[怄火]",face_url:K+"dajiao.gif",face_view:'<img src="'+K+'dajiao.gif"/>'},{face_text:"[转圈]",face_url:K+"zhuanquan.gif",face_view:'<img src="'+K+'zhuanquan.gif"/>'},{face_text:"[磕头]",face_url:K+"ketou.gif",face_view:'<img src="'+K+'ketou.gif"/>'},{face_text:"[回头]",face_url:K+"huitou.gif",face_view:'<img src="'+K+'huitou.gif"/>'},{face_text:"[跳绳]",face_url:K+"tiaosheng.gif",face_view:'<img src="'+K+'tiaosheng.gif"/>'},{face_text:"[挥手]",face_url:K+"huishou.gif",face_view:'<img src="'+K+'huishou.gif"/>'},{face_text:"[激动]",face_url:K+"jidong.gif",face_view:'<img src="'+K+'jidong.gif"/>'},{face_text:"[街舞]",face_url:K+"tiaowu.gif",face_view:'<img src="'+K+'tiaowu.gif"/>'},{face_text:"[献吻]",face_url:K+"xianwen.gif",face_view:'<img src="'+K+'xianwen.gif"/>'},{face_text:"[左太极]",face_url:K+"zuotaiji.gif",face_view:'<img src="'+K+'zuotaiji.gif"/>'},{face_text:"[右太极]",face_url:K+"youtaiji.gif",face_view:'<img src="'+K+'youtaiji.gif"/>'}],H=q.a.Option,J=R.a.Item,W=D.a.confirm,Q=(L.a.TextArea,function(e){function t(e){var a;return b()(this,t),(a=k()(this,C()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0}),a.props.dispatch({type:"SET_DYNAMIC_COMMENT_INFO",data:e}),a.props.form.setFieldsValue({status:String(e.status)})},a._delete=function(e){a.props.dispatch({type:"SET_DYNAMIC_COMMENT_INFO",data:e}),W({title:"确认要删除此条用户评论吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteComment({id:a.props.stateDynamicComment.current_info.id})},onCancel:function(){console.log("Cancel")}})},a.commentRender=function(e){var t=e;return G.map((function(e){t=t.replace(new RegExp("\\"+e.face_text,"g"),e.face_view)})),t},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchCommentList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||(console.log("Received values of form: ",t),a.fetchUpdateComment(t))}))},a.fetchUpdateComment=function(e){var t,n;a.props.dispatch((t=Object.assign({id:a.props.stateDynamicComment.current_info.id},e),n=function(e){Y.a.message_success("修改用户评论成功"),a.fetchCommentList(),a.setState({modal_visible_edit:!1})},function(){V.a.post("/dynamic-comment/update",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state;return{content:e.content_val,status:e.status_val}},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a.resetBarFrom=function(){a.setState({content_val:"",status_val:""})},a.fetchDeleteComment=function(e){var t,n;a.props.dispatch((t=e,n=function(e){Y.a.message_success("删除用户评论成功"),a.fetchCommentList()},function(){V.a.post("/dynamic-comment/delete",t).then((function(e){n&&n(e)}))}))},a.fetchCommentList=function(){var e=a.getParams(),t=T()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){V.a.post("/dynamic-comment/list",n).then((function(t){return i&&i(t),e({type:"GET_DYNAMIC_COMMENT_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return M.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"评论内容",dataIndex:"content",key:"content",render:function(e,t){return M.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.commentRender(t.content)}})}},{title:"来自文章",dataIndex:"dynamic",key:"dynamic",render:function(e,t){return M.a.createElement("div",null,M.a.createElement("a",{href:"/dynamic/".concat(t.dynamic.id),target:"_block"},t.dynamic.content))}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return M.a.createElement(_.a,{className:"table-article-tag-list",color:"orange"},a.state.otherStatusListText[t.status])}},{title:"评论时间",dataIndex:"create_dt",key:"create_dt"},{title:"操作",key:"action",render:function(e,t){return M.a.createElement("div",{className:"operation-btn"},M.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",type:"primary",className:"btn btn-info"},M.a.createElement(m.a,{type:"edit"})),M.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},M.a.createElement(m.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,modal_visible_edit:!1,otherStatusList:P.e,otherStatusListText:P.f,content_val:"",status_val:""},a}return O()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchCommentList()}},{key:"render",value:function(){var e=this,t=this.props.stateDynamicComment,a=this.state,n=a.loading,r=a.content_val,s=a.status_val,o=this.props.form.getFieldDecorator;return M.a.createElement("div",{className:"layout-main"},M.a.createElement("div",{className:"layout-main-title"},M.a.createElement(u.a,null,M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement(m.a,{type:"home"})),M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement("span",null,"主页")),M.a.createElement(u.a.Item,{href:"#"},M.a.createElement("span",null,"动态管理")),M.a.createElement(u.a.Item,null,"动态评论管理"))),M.a.createElement("div",{className:"card"},M.a.createElement("div",{className:"card-body"},M.a.createElement("div",{className:"xsb-operation-menu"},M.a.createElement(R.a,{layout:"inline"},M.a.createElement(J,{label:"文章标题"},M.a.createElement(L.a,{value:r,onChange:function(t){e.changeVal(t.target.value,"content_val")}})),M.a.createElement(J,{label:"状态"},M.a.createElement(q.a,{className:"select-view",value:s,onChange:function(t){e.changeVal(t,"status_val")}},M.a.createElement(H,{value:""},"全部"),Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])})))),M.a.createElement(R.a.Item,null,M.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchCommentList},"搜索"),M.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),M.a.createElement(l.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"id"})),M.a.createElement(D.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改",visible:this.state.modal_visible_edit},M.a.createElement(R.a,{className:"from-view",onSubmit:this.handleSubmit},M.a.createElement(J,c()({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},{hasFeedback:!0,label:"状态"}),o("status",{rules:[{required:!0,message:"请选择状态！"}]})(M.a.createElement(q.a,{placeholder:"状态"},Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])}))))),M.a.createElement(J,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},M.a.createElement(i.a,{className:"register-btn",htmlType:"submit",type:"primary"},"确定"))))))}}]),t}(M.a.Component)),X=R.a.create()(Q);t.default=Object(B.b)((function(e){return{stateDynamicComment:e.stateDynamicComment}}))(X)},1200:function(e,t,a){"use strict";a.r(t);a(187);var n=a(140),i=a.n(n),r=a(1127),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=(a(1128),a(1129)),u=a.n(o),f=(a(279),a(15)),m=a.n(f),d=(a(452),a(453)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=a(70),b=a.n(y),E=a(71),x=a.n(E),w=a(72),k=a.n(w),N=a(73),C=a.n(N),S=a(451),T=a.n(S),I=a(74),O=a.n(I),A=(a(449),a(1124)),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(1122),a(1123)),R=a.n(F),U=(a(450),a(280)),q=a.n(U),z=a(1),M=a.n(z),B=a(75),P=(a(1190),a(138)),V=a(1161),Y=a(139),K="/default/img/face/qq/",G=[{face_text:"[微笑]",face_url:K+"weixiao.gif",face_view:'<img src="'+K+'weixiao.gif"/>'},{face_text:"[撇嘴]",face_url:K+"pizui.gif",face_view:'<img src="'+K+'pizui.gif"/>'},{face_text:"[爱情]",face_url:K+"aiqing.gif",face_view:'<img src="'+K+'aiqing.gif"/>'},{face_text:"[色]",face_url:K+"se.gif",face_view:'<img src="'+K+'se.gif"/>'},{face_text:"[发呆]",face_url:K+"fadai.gif",face_view:'<img src="'+K+'fadai.gif"/>'},{face_text:"[得意]",face_url:K+"deyi.gif",face_view:'<img src="'+K+'deyi.gif"/>'},{face_text:"[流泪]",face_url:K+"liulei.gif",face_view:'<img src="'+K+'liulei.gif"/>'},{face_text:"[害羞]",face_url:K+"haixiu.gif",face_view:'<img src="'+K+'haixiu.gif"/>'},{face_text:"[闭嘴]",face_url:K+"bizui.gif",face_view:'<img src="'+K+'bizui.gif"/>'},{face_text:"[睡觉]",face_url:K+"shuijiao.gif",face_view:'<img src="'+K+'shuijiao.gif"/>'},{face_text:"[睡]",face_url:K+"shuijiao.gif",face_view:'<img src="'+K+'shuijiao.gif"/>'},{face_text:"[大哭]",face_url:K+"daku.gif",face_view:'<img src="'+K+'daku.gif"/>'},{face_text:"[尴尬]",face_url:K+"gangga.gif",face_view:'<img src="'+K+'gangga.gif"/>'},{face_text:"[发怒]",face_url:K+"danu.gif",face_view:'<img src="'+K+'danu.gif"/>'},{face_text:"[调皮]",face_url:K+"tiaopi.gif",face_view:'<img src="'+K+'tiaopi.gif"/>'},{face_text:"[呲牙]",face_url:K+"ciya.gif",face_view:'<img src="'+K+'ciya.gif"/>'},{face_text:"[惊讶]",face_url:K+"jingya.gif",face_view:'<img src="'+K+'jingya.gif"/>'},{face_text:"[难过]",face_url:K+"nanguo.gif",face_view:'<img src="'+K+'nanguo.gif"/>'},{face_text:"[酷]",face_url:K+"ku.gif",face_view:'<img src="'+K+'ku.gif"/>'},{face_text:"[冷汗]",face_url:K+"lenghan.gif",face_view:'<img src="'+K+'lenghan.gif"/>'},{face_text:"[抓狂]",face_url:K+"zhuakuang.gif",face_view:'<img src="'+K+'zhuakuang.gif"/>'},{face_text:"[吐]",face_url:K+"tu.gif",face_view:'<img src="'+K+'tu.gif"/>'},{face_text:"[偷笑]",face_url:K+"touxiao.gif",face_view:'<img src="'+K+'touxiao.gif"/>'},{face_text:"[可爱]",face_url:K+"keai.gif",face_view:'<img src="'+K+'keai.gif"/>'},{face_text:"[白眼]",face_url:K+"baiyan.gif",face_view:'<img src="'+K+'baiyan.gif"/>'},{face_text:"[傲慢]",face_url:K+"aoman.gif",face_view:'<img src="'+K+'aoman.gif"/>'},{face_text:"[饥饿]",face_url:K+"er.gif",face_view:'<img src="'+K+'er.gif"/>'},{face_text:"[困]",face_url:K+"kun.gif",face_view:'<img src="'+K+'kun.gif"/>'},{face_text:"[惊恐]",face_url:K+"jingkong.gif",face_view:'<img src="'+K+'jingkong.gif"/>'},{face_text:"[流汗]",face_url:K+"liuhan.gif",face_view:'<img src="'+K+'liuhan.gif"/>'},{face_text:"[憨笑]",face_url:K+"haha.gif",face_view:'<img src="'+K+'haha.gif"/>'},{face_text:"[大兵]",face_url:K+"dabing.gif",face_view:'<img src="'+K+'dabing.gif"/>'},{face_text:"[奋斗]",face_url:K+"fendou.gif",face_view:'<img src="'+K+'fendou.gif"/>'},{face_text:"[咒骂]",face_url:K+"ma.gif",face_view:'<img src="'+K+'ma.gif"/>'},{face_text:"[骂]",face_url:K+"ma.gif",face_view:'<img src="'+K+'ma.gif"/>'},{face_text:"[疑问]",face_url:K+"wen.gif",face_view:'<img src="'+K+'wen.gif"/>'},{face_text:"[问]",face_url:K+"wen.gif",face_view:'<img src="'+K+'wen.gif"/>'},{face_text:"[嘘]",face_url:K+"xu.gif",face_view:'<img src="'+K+'xu.gif"/>'},{face_text:"[晕]",face_url:K+"yun.gif",face_view:'<img src="'+K+'yun.gif"/>'},{face_text:"[折磨]",face_url:K+"zhemo.gif",face_view:'<img src="'+K+'zhemo.gif"/>'},{face_text:"[衰]",face_url:K+"shuai.gif",face_view:'<img src="'+K+'shuai.gif"/>'},{face_text:"[骷髅]",face_url:K+"kulou.gif",face_view:'<img src="'+K+'kulou.gif"/>'},{face_text:"[敲打]",face_url:K+"da.gif",face_view:'<img src="'+K+'da.gif"/>'},{face_text:"[再见]",face_url:K+"zaijian.gif",face_view:'<img src="'+K+'zaijian.gif"/>'},{face_text:"[擦汗]",face_url:K+"cahan.gif",face_view:'<img src="'+K+'cahan.gif"/>'},{face_text:"[挖鼻]",face_url:K+"wabi.gif",face_view:'<img src="'+K+'wabi.gif"/>'},{face_text:"[抠鼻]",face_url:K+"wabi.gif",face_view:'<img src="'+K+'wabi.gif"/>'},{face_text:"[鼓掌]",face_url:K+"guzhang.gif",face_view:'<img src="'+K+'guzhang.gif"/>'},{face_text:"[糗大了]",face_url:K+"qioudale.gif",face_view:'<img src="'+K+'qioudale.gif"/>'},{face_text:"[坏笑]",face_url:K+"huaixiao.gif",face_view:'<img src="'+K+'huaixiao.gif"/>'},{face_text:"[左哼哼]",face_url:K+"zuohengheng.gif",face_view:'<img src="'+K+'zuohengheng.gif"/>'},{face_text:"[右哼哼]",face_url:K+"youhengheng.gif",face_view:'<img src="'+K+'youhengheng.gif"/>'},{face_text:"[哈欠]",face_url:K+"haqian.gif",face_view:'<img src="'+K+'haqian.gif"/>'},{face_text:"[鄙视]",face_url:K+"bishi.gif",face_view:'<img src="'+K+'bishi.gif"/>'},{face_text:"[委屈]",face_url:K+"weiqu.gif",face_view:'<img src="'+K+'weiqu.gif"/>'},{face_text:"[哭了]",face_url:K+"ku.gif",face_view:'<img src="'+K+'ku.gif"/>'},{face_text:"[快哭了]",face_url:K+"kuaikule.gif",face_view:'<img src="'+K+'kuaikule.gif"/>'},{face_text:"[阴险]",face_url:K+"yinxian.gif",face_view:'<img src="'+K+'yinxian.gif"/>'},{face_text:"[亲亲]",face_url:K+"qinqin.gif",face_view:'<img src="'+K+'qinqin.gif"/>'},{face_text:"[示爱]",face_url:K+"kiss.gif",face_view:'<img src="'+K+'kiss.gif"/>'},{face_text:"[亲吻]",face_url:K+"kiss.gif",face_view:'<img src="'+K+'kiss.gif"/>'},{face_text:"[吓]",face_url:K+"xia.gif",face_view:'<img src="'+K+'xia.gif"/>'},{face_text:"[可怜]",face_url:K+"kelian.gif",face_view:'<img src="'+K+'kelian.gif"/>'},{face_text:"[菜刀]",face_url:K+"caidao.gif",face_view:'<img src="'+K+'caidao.gif"/>'},{face_text:"[西瓜]",face_url:K+"xigua.gif",face_view:'<img src="'+K+'xigua.gif"/>'},{face_text:"[啤酒]",face_url:K+"pijiu.gif",face_view:'<img src="'+K+'pijiu.gif"/>'},{face_text:"[篮球]",face_url:K+"lanqiu.gif",face_view:'<img src="'+K+'lanqiu.gif"/>'},{face_text:"[乒乓]",face_url:K+"pingpang.gif",face_view:'<img src="'+K+'pingpang.gif"/>'},{face_text:"[咖啡]",face_url:K+"kafei.gif",face_view:'<img src="'+K+'kafei.gif"/>'},{face_text:"[饭]",face_url:K+"fan.gif",face_view:'<img src="'+K+'fan.gif"/>'},{face_text:"[猪头]",face_url:K+"zhutou.gif",face_view:'<img src="'+K+'zhutou.gif"/>'},{face_text:"[花]",face_url:K+"hua.gif",face_view:'<img src="'+K+'hua.gif"/>'},{face_text:"[玫瑰]",face_url:K+"hua.gif",face_view:'<img src="'+K+'hua.gif"/>'},{face_text:"[凋谢]",face_url:K+"diaoxie.gif",face_view:'<img src="'+K+'diaoxie.gif"/>'},{face_text:"[爱心]",face_url:K+"love.gif",face_view:'<img src="'+K+'love.gif"/>'},{face_text:"[心碎]",face_url:K+"xinsui.gif",face_view:'<img src="'+K+'xinsui.gif"/>'},{face_text:"[蛋糕]",face_url:K+"dangao.gif",face_view:'<img src="'+K+'dangao.gif"/>'},{face_text:"[闪电]",face_url:K+"shandian.gif",face_view:'<img src="'+K+'shandian.gif"/>'},{face_text:"[地雷]",face_url:K+"zhadan.gif",face_view:'<img src="'+K+'zhadan.gif"/>'},{face_text:"[炸弹]",face_url:K+"zhadan.gif",face_view:'<img src="'+K+'zhadan.gif"/>'},{face_text:"[刀]",face_url:K+"dao.gif",face_view:'<img src="'+K+'dao.gif"/>'},{face_text:"[足球]",face_url:K+"qiu.gif",face_view:'<img src="'+K+'qiu.gif"/>'},{face_text:"[虫]",face_url:K+"chong.gif",face_view:'<img src="'+K+'chong.gif"/>'},{face_text:"[瓢虫]",face_url:K+"chong.gif",face_view:'<img src="'+K+'chong.gif"/>'},{face_text:"[便便]",face_url:K+"dabian.gif",face_view:'<img src="'+K+'dabian.gif"/>'},{face_text:"[月亮]",face_url:K+"yueliang.gif",face_view:'<img src="'+K+'yueliang.gif"/>'},{face_text:"[太阳]",face_url:K+"taiyang.gif",face_view:'<img src="'+K+'taiyang.gif"/>'},{face_text:"[礼物]",face_url:K+"liwu.gif",face_view:'<img src="'+K+'liwu.gif"/>'},{face_text:"[拥抱]",face_url:K+"yongbao.gif",face_view:'<img src="'+K+'yongbao.gif"/>'},{face_text:"[强]",face_url:K+"qiang.gif",face_view:'<img src="'+K+'qiang.gif"/>'},{face_text:"[弱]",face_url:K+"ruo.gif",face_view:'<img src="'+K+'ruo.gif"/>'},{face_text:"[握手]",face_url:K+"woshou.gif",face_view:'<img src="'+K+'woshou.gif"/>'},{face_text:"[胜利]",face_url:K+"shengli.gif",face_view:'<img src="'+K+'shengli.gif"/>'},{face_text:"[佩服]",face_url:K+"peifu.gif",face_view:'<img src="'+K+'peifu.gif"/>'},{face_text:"[抱拳]",face_url:K+"peifu.gif",face_view:'<img src="'+K+'peifu.gif"/>'},{face_text:"[勾引]",face_url:K+"gouyin.gif",face_view:'<img src="'+K+'gouyin.gif"/>'},{face_text:"[拳头]",face_url:K+"quantou.gif",face_view:'<img src="'+K+'quantou.gif"/>'},{face_text:"[差劲]",face_url:K+"chajin.gif",face_view:'<img src="'+K+'chajin.gif"/>'},{face_text:"[干杯]",face_url:K+"cheer.gif",face_view:'<img src="'+K+'cheer.gif"/>'},{face_text:"[no]",face_url:K+"no.gif",face_view:'<img src="'+K+'no.gif"/>'},{face_text:"[OK]",face_url:K+"ok.gif",face_view:'<img src="'+K+'ok.gif"/>'},{face_text:"[给力]",face_url:K+"geili.gif",face_view:'<img src="'+K+'geili.gif"/>'},{face_text:"[飞吻]",face_url:K+"feiwen.gif",face_view:'<img src="'+K+'feiwen.gif"/>'},{face_text:"[跳跳]",face_url:K+"tiao.gif",face_view:'<img src="'+K+'tiao.gif"/>'},{face_text:"[发抖]",face_url:K+"fadou.gif",face_view:'<img src="'+K+'fadou.gif"/>'},{face_text:"[怄火]",face_url:K+"dajiao.gif",face_view:'<img src="'+K+'dajiao.gif"/>'},{face_text:"[转圈]",face_url:K+"zhuanquan.gif",face_view:'<img src="'+K+'zhuanquan.gif"/>'},{face_text:"[磕头]",face_url:K+"ketou.gif",face_view:'<img src="'+K+'ketou.gif"/>'},{face_text:"[回头]",face_url:K+"huitou.gif",face_view:'<img src="'+K+'huitou.gif"/>'},{face_text:"[跳绳]",face_url:K+"tiaosheng.gif",face_view:'<img src="'+K+'tiaosheng.gif"/>'},{face_text:"[挥手]",face_url:K+"huishou.gif",face_view:'<img src="'+K+'huishou.gif"/>'},{face_text:"[激动]",face_url:K+"jidong.gif",face_view:'<img src="'+K+'jidong.gif"/>'},{face_text:"[街舞]",face_url:K+"tiaowu.gif",face_view:'<img src="'+K+'tiaowu.gif"/>'},{face_text:"[献吻]",face_url:K+"xianwen.gif",face_view:'<img src="'+K+'xianwen.gif"/>'},{face_text:"[左太极]",face_url:K+"zuotaiji.gif",face_view:'<img src="'+K+'zuotaiji.gif"/>'},{face_text:"[右太极]",face_url:K+"youtaiji.gif",face_view:'<img src="'+K+'youtaiji.gif"/>'}],H=q.a.Option,J=R.a.Item,W=D.a.confirm,Q=(L.a.TextArea,function(e){function t(e){var a;return b()(this,t),(a=k()(this,C()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0}),a.props.dispatch({type:"SET_BOOK_COMMENT_INFO",data:e}),a.props.form.setFieldsValue({status:String(e.status)})},a._delete=function(e){a.props.dispatch({type:"SET_BOOK_COMMENT_INFO",data:e}),W({title:"确认要删除此条用户评论吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteComment({id:a.props.stateBookComment.current_info.id})},onCancel:function(){console.log("Cancel")}})},a.commentRender=function(e){console.log("val",e);var t=e;return G.map((function(e){t=t.replace(new RegExp("\\"+e.face_text,"g"),e.face_view)})),t},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchCommentList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||(console.log("Received values of form: ",t),a.fetchUpdateComment(t))}))},a.fetchUpdateComment=function(e){var t,n;a.props.dispatch((t=Object.assign({id:a.props.stateBookComment.current_info.id},e),n=function(e){Y.a.message_success("修改用户评论成功"),a.fetchCommentList(),a.setState({modal_visible_edit:!1})},function(){P.a.post("/book-comment/update",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state;return{content:e.content_val,status:e.status_val}},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a.resetBarFrom=function(){a.setState({content_val:"",status_val:""})},a.fetchDeleteComment=function(e){var t,n;a.props.dispatch((t=e,n=function(e){Y.a.message_success("删除用户评论成功"),a.fetchCommentList()},function(){P.a.post("/book-comment/delete",t).then((function(e){n&&n(e)}))}))},a.fetchCommentList=function(){var e=a.getParams(),t=T()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){P.a.post("/book-comment/list",n).then((function(t){return i&&i(t),e({type:"GET_BOOK_COMMENT_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return M.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"小书章节评论内容",dataIndex:"content",key:"content",render:function(e,t){return M.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.commentRender(t.content)}})}},{title:"来自小书",dataIndex:"books",key:"books",render:function(e,t){return M.a.createElement("div",null,t.books?M.a.createElement("a",{href:"/book/".concat(t.books_id),target:"_block"},t.books.title?t.books.title:"-"):"-")}},{title:"来自小书章节",dataIndex:"article",key:"article",render:function(e,t){return M.a.createElement("div",null,M.a.createElement("a",{className:"book-title",target:"_blank",href:"/book/".concat(t.books_id,"/section/").concat(t.book_id)},t.book.title))}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return M.a.createElement(_.a,{className:"table-article-tag-list",color:"orange"},a.state.otherStatusListText[t.status])}},{title:"评论时间",dataIndex:"create_dt",key:"create_dt"},{title:"操作",key:"action",render:function(e,t){return M.a.createElement("div",{className:"operation-btn"},M.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",className:"btn btn-info",type:"primary"},M.a.createElement(m.a,{type:"edit"})),M.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},M.a.createElement(m.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,modal_visible_edit:!1,otherStatusList:V.e,otherStatusListText:V.f,content_val:"",status_val:""},a}return O()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchCommentList()}},{key:"render",value:function(){var e=this,t=this.props.stateBookComment,a=this.state,n=a.loading,r=a.content_val,s=a.status_val,o=this.props.form.getFieldDecorator;return M.a.createElement("div",{className:"layout-main"},M.a.createElement("div",{className:"layout-main-title"},M.a.createElement(u.a,null,M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement(m.a,{type:"home"})),M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement("span",null,"主页")),M.a.createElement(u.a.Item,{href:"#"},M.a.createElement("span",null,"小书章节管理")),M.a.createElement(u.a.Item,null,"小书章节评论管理"))),M.a.createElement("div",{className:"card"},M.a.createElement("div",{className:"card-body"},M.a.createElement("div",{className:"xsb-operation-menu"},M.a.createElement(R.a,{layout:"inline"},M.a.createElement(J,{label:"小书章节评论标题"},M.a.createElement(L.a,{value:r,onChange:function(t){e.changeVal(t.target.value,"content_val")}})),M.a.createElement(J,{label:"状态"},M.a.createElement(q.a,{className:"select-view",value:s,onChange:function(t){e.changeVal(t,"status_val")}},M.a.createElement(H,{value:""},"全部"),Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])})))),M.a.createElement(R.a.Item,null,M.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchCommentList},"搜索"),M.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),M.a.createElement(l.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"id"}))),M.a.createElement(D.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改",visible:this.state.modal_visible_edit},M.a.createElement(R.a,{className:"from-view",onSubmit:this.handleSubmit},M.a.createElement(J,c()({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},{hasFeedback:!0,label:"状态"}),o("status",{rules:[{required:!0,message:"请选择状态！"}]})(M.a.createElement(q.a,{placeholder:"状态"},Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(H,{key:t},e.state.otherStatusListText[t])}))))),M.a.createElement(J,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},M.a.createElement(i.a,{className:"register-btn",htmlType:"submit",type:"primary"},"确定")))))}}]),t}(M.a.Component)),X=R.a.create()(Q);t.default=Object(B.b)((function(e){return{stateBookComment:e.stateBookComment}}))(X)},1201:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=(a(1134),a(1135)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(449),a(1124)),m=a.n(f),d=(a(1128),a(1129)),_=a.n(d),g=(a(279),a(15)),p=a.n(g),h=(a(452),a(453)),v=a.n(h),y=a(1130),b=a.n(y),E=a(1131),x=a.n(E),w=a(70),k=a.n(w),N=a(71),C=a.n(N),S=a(72),T=a.n(S),I=a(73),O=a.n(I),A=a(451),L=a.n(A),j=a(74),D=a.n(j),F=(a(1125),a(1126)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(450),a(280)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=(a(1178),a(138)),K=(a(189),function(e,t){return function(a){Y.a.get("/admin-role/all",e).then((function(e){return t&&t(e),a({type:"SET_ADMIN_ROlE_ALL",data:e})}))}}),G=a(139),H=M.a.Option,J=q.a.Item,W=R.a.confirm,Q=function(e){function t(e){var a;return k()(this,t),(a=T()(this,O()(t).call(this,e))).editUser=function(e){a.setState({modal_visible_register:!0,is_create:!1}),a.props.dispatch({type:"SET_ADMIN_CURRENT_USER_INFO",data:e}),a.props.form.setFieldsValue({account:e.account,nickname:e.nickname,email:e.email,phone:e.phone,enable:e.enable,password:"",confirm:""})},a.deleteUser=function(e){a.props.dispatch({type:"SET_ADMIN_CURRENT_USER_INFO",data:e}),W({title:"确认要删除此用户吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchAdminUserDelete({uid:a.props.stateAdminUser.current_user_info.uid})},onCancel:function(){console.log("Cancel")}})},a.currentUserRole=function(e){var t=a.props.stateAdminUser,n=t.current_user_info,i=t.admin_role_all,r=e||n,c="";return i.map((function(e){e.role_id===r.admin_role_ids&&(c=e)})),c},a.TablePageChange=function(){var e=x()(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchAdminUserList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_register:!0,is_create:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(console.log("Received values of form: ",n),t?a.fetchAdminUserCreate(n):a.fetchAdminUserEdit(n))}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var i=a.props.form;t&&t!==i.getFieldValue("password")?n("两次输入的密码不一致！"):n()},a.selectRole=function(e){a.setState({role_id:e})},a.handleSubmitAuthority=function(){var e,t;a.state.role_id?a.props.dispatch((e={role_id:a.state.role_id,uid:a.props.stateAdminUser.current_user_info.uid},t=function(){a.setState({modal_visible_authority:!1}),a.initAdminUserPage(),G.a.message_success("角色更新成功")},function(a){Y.a.post("/admin-user-role/create",e).then((function(e){t&&t(e)}))})):G.a.message_error("请选择角色类型")},a.validateToNextPassword=function(e,t,n){var i=a.props.form;t&&a.state.confirmDirty&&i.validateFields(["confirm"],{force:!0}),n()},a.fetchAdminUserCreate=function(e){var t,n;a.props.dispatch((t=e,n=function(e){G.a.message_success("创建成功"),a.fetchAdminUserList(),a.setState({modal_visible_register:!1})},function(){Y.a.post("/admin-user/create",t).then((function(e){n&&n(e)}))}))},a.fetchAdminUserEdit=function(e){var t,n;a.props.dispatch((t=Object.assign({uid:a.props.stateAdminUser.current_user_info.uid},e),n=function(e){G.a.message_success("修改用户成功"),a.fetchAdminUserList(),a.setState({modal_visible_register:!1})},function(){Y.a.post("/admin-user/edit",t).then((function(e){n&&n(e)}))}))},a.fetchAdminUserDelete=function(e){var t,n;a.props.dispatch((t=e,n=function(e){G.a.message_success("删除用户成功"),a.fetchAdminUserList()},function(){Y.a.post("/admin-user/delete",t).then((function(e){n&&n(e)}))}))},a.fetchAdminUserList=function(){var e=L()(a);a.setState({loading:!0});var t,n,i=a.state.pagination.current;a.props.dispatch((t={params:{page:i}},n=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=i,e.setState({loading:!1,pagination:a})},function(e){Y.a.get("/admin-user/list",t).then((function(t){return n&&n(t),e({type:"GET_ADMIN_USER_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return P.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"账户",dataIndex:"account",key:"account"},{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"角色组",dataIndex:"rule_name",key:"rule_name",render:function(e,t){return P.a.createElement("div",{className:"operation-btn"},a.currentUserRole(t)?P.a.createElement(v.a,{color:"orange"},a.currentUserRole(t).role_name):P.a.createElement(v.a,{color:"#666"},"无"))}},{title:"邮箱",dataIndex:"email",key:"email"},{title:"手机",dataIndex:"phone",key:"phone"},{title:"是否可以登陆",dataIndex:"enable",key:"enable",render:function(e,t){return P.a.createElement("div",{className:"table-is-login"},e?P.a.createElement(p.a,{type:"check-circle"}):P.a.createElement(p.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return P.a.createElement("div",{className:"operation-btn",style:{width:"250px"}},P.a.createElement("button",{onClick:function(){a.editUser(t)},size:"small",type:"primary",className:"btn btn-info"},P.a.createElement(p.a,{type:"edit"})),P.a.createElement("button",{className:"btn btn-light",onClick:function(){a.deleteUser(t)},size:"small"},P.a.createElement(p.a,{type:"delete"})),P.a.createElement("button",{className:"btn btn-primary",onClick:x()(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch({type:"SET_ADMIN_CURRENT_USER_INFO",data:t});case 2:a.setState({modal_visible_authority:!0});case 3:case"end":return e.stop()}}),e)}))),size:"small"},"设置角色"))}}],pagination:{current:1},loading:!1,confirmDirty:!1,modal_visible_register:!1,modal_visible_authority:!1,is_create:!0,role_id:""},a}var a;return D()(t,e),C()(t,[{key:"componentDidMount",value:function(){this.initAdminUserPage()}},{key:"initAdminUserPage",value:(a=x()(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAdminUserList();case 2:return e.next=4,this.props.dispatch(K());case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.stateAdminUser,a=t.admin_role_all,n=void 0===a?[]:a,r=this.state,s=r.loading,o=r.is_create,f=this.props.form.getFieldDecorator,d=f("prefix",{initialValue:"86"})(P.a.createElement(M.a,{style:{width:70}},P.a.createElement(H,{value:"86"},"+86"),P.a.createElement(H,{value:"87"},"+87"))),g={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},h={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}};return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(_.a,null,P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement(p.a,{type:"home"})),P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(_.a.Item,{href:"#"},P.a.createElement("span",null,"系统管理")),P.a.createElement(_.a.Item,null,"管理员管理"))),P.a.createElement("div",{className:"layout-nav-btn"},P.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",onClick:function(){return e.showModal(0)}},"创建管理员")),P.a.createElement("div",{className:"card admin-user"},P.a.createElement("div",{className:"card-body"},P.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_register:!1})},title:"填写管理用户",visible:this.state.modal_visible_register},P.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit},P.a.createElement(J,u()({},g,{label:"账户"}),f("account",{rules:[{required:!0,message:"请输入账户！",whitespace:!0}]})(P.a.createElement(m.a,{placeholder:"账户"}))),P.a.createElement(J,u()({},g,{label:"昵称"}),f("nickname",{rules:[{required:!0,message:"请输入昵称！",whitespace:!0}]})(P.a.createElement(m.a,{placeholder:"昵称"}))),P.a.createElement(J,u()({},g,{label:"密码"}),f("password",{rules:[{required:!0,message:"请输入密码！"},{validator:this.validateToNextPassword}]})(P.a.createElement(m.a,{placeholder:"密码",type:"password"}))),P.a.createElement(J,u()({},g,{label:"重复密码"}),f("confirm",{rules:[{required:!0,message:"重复输入密码！"},{validator:this.compareToFirstPassword}]})(P.a.createElement(m.a,{onBlur:this.handleConfirmBlur,placeholder:"重复密码",type:"password"}))),P.a.createElement(J,u()({},g,{label:"电子邮件"}),f("email",{rules:[{type:"email",message:"输入的电子邮件无效！"},{required:!0,message:"请输入您的电子邮件！"}]})(P.a.createElement(m.a,{placeholder:"邮箱"}))),P.a.createElement(J,u()({},g,{label:"手机号码"}),f("phone",{rules:[{required:!0,message:"请输入你的手机号码！"}]})(P.a.createElement(m.a,{addonBefore:d,style:{width:"100%"}}))),P.a.createElement(J,u()({},g,{label:"是否有效"}),f("enable",{valuePropName:"checked"})(P.a.createElement(l.a,null))),P.a.createElement(J,h,P.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},o?"创建账户":"更新")))),P.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_authority:!1})},title:"修改用户权限",visible:this.state.modal_visible_authority},P.a.createElement(J,u()({},g,{label:"管理员账户"}),P.a.createElement(m.a,{disabled:!0,type:"text",value:t.current_user_info.account})),P.a.createElement(J,u()({},g,{label:"角色类型"}),P.a.createElement(M.a,{placeholder:"请设置权限",style:{width:150},onChange:this.selectRole},n.map((function(e){return P.a.createElement(H,{key:e.role_id},e.role_name)})))),P.a.createElement(J,h,P.a.createElement(c.a,{className:"register-btn",type:"primary",onClick:this.handleSubmitAuthority},"修改权限"))),P.a.createElement(i.a,{columns:this.state.columns,dataSource:t.admin_user_list,loading:s,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"uid"}))))}}]),t}(P.a.Component),X=q.a.create()(Q);t.default=Object(V.b)((function(e){return{stateAdminUser:e.stateAdminUser}}))(X)},1202:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=a(1127),l=a.n(s),o=(a(1128),a(1129)),u=a.n(o),f=(a(279),a(15)),m=a.n(f),d=a(1142),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=a(70),b=a.n(y),E=a(71),x=a.n(E),w=a(72),k=a.n(w),N=a(73),C=a.n(N),S=a(451),T=a.n(S),I=a(74),O=a.n(I),A=(a(449),a(1124)),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(450),a(280)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(1140),a(1141)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=a(139),K=(a(1179),a(1165)),G=a(138),H=function(e,t){return function(a){G.a.post("/admin-role/delete",e).then((function(e){t&&t(e)}))}},J=M.a.TreeNode,W=q.a.Item,Q=(R.a.Option,D.a.confirm),X=L.a.TextArea,Z=function(e){function t(e){var a;return b()(this,t),(a=k()(this,C()(t).call(this,e))).showModal=function(){a.setState({visible_create_role_modal:!0,is_create:!0}),a.initRoleFrom()},a.initTreeData=function(e){var t=[];return a.props.stateAdminAuthority.admin_authority_source_list.map((function(a){2===Number(a.authority_type)&&-1!==e.indexOf(a.authority_id)&&t.push(a.authority_id)})),t},a.initRoleFrom=function(){a.setState({role_name:"",role_description:""})},a.editRole=function(e){a.setState({visible_create_role_modal:!0,is_create:!1,role_name:e.role_name,role_description:e.role_description})},a.deleteRole=function(){var e,t=a.props.stateAdminRole.current_role_info;Q({title:"确认要删除当前角色吗?",content:"删除当前角色会删除角色用户关联，以及角色权限关联",okText:"是",okType:"danger",cancelText:"否",onOk:(e=v()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch(H({role_id:t.role_id},(function(e){a.fetchAdminRoleList()})));case 2:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),onCancel:function(){console.log("Cancel")}})},a.handleOk=function(){a.state.is_create?a.fetchAdminCreateRole():a.fetchAdminEditRole()},a.handleCancel=function(e){a.setState({visible_create_role_modal:!1})},a.handleTableChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchAdminRoleList();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchAdminEditRole=function(){var e,t;a.props.dispatch((e={role_id:a.props.stateAdminRole.current_role_info.role_id,role_name:a.state.role_name,role_description:a.state.role_description},t=function(){Y.a.message_success("修改角色成功"),a.fetchAdminRoleList(),a.setState({visible_create_role_modal:!1})},function(a){G.a.post("/admin-role/edit",e).then((function(e){t&&t(e)}))}))},a.fetchAdminCreateRole=function(){var e,t,n={role_name:a.state.role_name,role_description:a.state.role_description};a.props.dispatch((e=n,t=function(){Y.a.message_success("角色创建成功"),a.fetchAdminRoleList(),a.setState({visible_create_role_modal:!1})},function(a){G.a.post("/admin-role/create",e).then((function(e){t&&t(e)}))}))},a.fetchSetAdminRoleAuthority=function(){var e,t,n=a.props.stateAdminRole,i=n.current_role_info,r=n.role_authority_list_all;a.props.dispatch((e=Object.assign({},i,{role_authority_list_all:r}),t=function(){Y.a.message_success("角色权限设置成功"),a.fetchAdminRoleList(),a.setState({visible_set_authority_modal:!1})},function(a){G.a.post("/admin-role-authority/set",e).then((function(e){t&&t(e)}))}))},a.fetchAdminRoleList=function(){var e=T()(a);a.setState({loading:!0});var t,n,i=a.state.pagination.current;a.props.dispatch((t={params:{page:i}},n=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=i,e.setState({loading:!1,pagination:a})},function(e){G.a.get("/admin-role/list",t).then((function(t){return n&&n(t),e({type:"GET_ADMIN_ROLE_LIST",data:t})}))}))},a.onCheck=function(e,t){a.setState({role_authority_list:e}),a.props.dispatch({type:"SET_ADMIN_ROLE_AUTHORITY_LIST_ALL",data:[].concat(_()(e),_()(t.halfCheckedKeys))})},a.renderTreeNodes=function(e){return e.map((function(e){return e.children.length>0?P.a.createElement(J,{dataRef:e,key:e.authority_id,title:e.authority_name,type:e.type},a.renderTreeNodes(e.children)):P.a.createElement(J,{key:e.authority_id,title:e.authority_name})}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return P.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"角色名字",dataIndex:"role_name",key:"role_name"},{title:"角色描述",dataIndex:"role_description",key:"role_description"},{title:"操作",key:"action",render:function(e,t){return P.a.createElement("div",{className:"operation-btn",style:{width:"250px"}},P.a.createElement("button",{onClick:v()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.editRole(t),e.next=3,a.props.dispatch({type:"SET_CURRENT_ADMIN_ROLE_INFO",data:t});case 3:case"end":return e.stop()}}),e)}))),size:"small",className:"btn btn-info",type:"primary"},"修改"),P.a.createElement("button",{className:"btn btn-light",onClick:v()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch({type:"SET_CURRENT_ADMIN_ROLE_INFO",data:t});case 2:a.deleteRole();case 3:case"end":return e.stop()}}),e)}))),size:"small"},"删除"),P.a.createElement("button",{className:"btn btn-primary",onClick:v()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({visible_set_authority_modal:!0,role_authority_list:a.initTreeData(t.admin_authority_ids?t.admin_authority_ids.split(","):"")}),e.next=3,a.props.dispatch({type:"SET_CURRENT_ADMIN_ROLE_INFO",data:t});case 3:case"end":return e.stop()}}),e)}))),size:"small"},"设置权限"))}}],pagination:{current:1},loading:!1,visible_create_role_modal:!1,visible_set_authority_modal:!1,role_name:"",role_description:"",is_create:!0,role_authority_list:[]},a}return O()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchAdminRoleList(),this.props.dispatch(Object(K.c)())}},{key:"render",value:function(){var e=this,t=this.props,a=t.stateAdminRole,n=t.stateAdminAuthority,r=this.state,s=r.loading,o=r.role_name,f=r.role_description,d=r.is_create,_={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}};return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(u.a,null,P.a.createElement(u.a.Item,{href:"#/manager/index"},P.a.createElement(m.a,{type:"home"})),P.a.createElement(u.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(u.a.Item,{href:"#"},P.a.createElement("span",null,"系统管理")),P.a.createElement(u.a.Item,null,"管理员角色管理"))),P.a.createElement("div",{className:"layout-nav-btn"},P.a.createElement("button",{className:"btn btn-danger",icon:"plus",onClick:this.showModal,type:"primary"},"创建角色")),P.a.createElement("div",{className:"card admin-role"},P.a.createElement("div",{className:"card-body"},P.a.createElement(D.a,{footer:null,onCancel:this.handleCancel,title:"创建角色",visible:this.state.visible_create_role_modal},P.a.createElement(W,l()({},_,{label:"角色名"}),P.a.createElement(L.a,{className:"input-view",onChange:function(t){e.setState({role_name:t.target.value})},placeholder:"请填写角色名",value:o})),P.a.createElement(W,l()({},_,{label:"角色描述"}),P.a.createElement(X,{autosize:{minRows:2,maxRows:6},onChange:function(t){e.setState({role_description:t.target.value})},placeholder:"请填写角色描述",value:f})),P.a.createElement(W,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:4}}},P.a.createElement(c.a,{className:"register-btn",htmlType:"submit",onClick:this.handleOk,type:"primary"},d?"创建":"更新"))),P.a.createElement(D.a,{footer:null,onCancel:function(){e.setState({visible_set_authority_modal:!1})},title:"设置权限",visible:this.state.visible_set_authority_modal},P.a.createElement(M.a,{checkable:!0,checkedKeys:this.state.role_authority_list,onCheck:this.onCheck,defaultExpandAll:!0,ref:"tree",showLine:!0},this.renderTreeNodes(n.admin_authority_list)),P.a.createElement("div",{className:"admin-role-foot"},P.a.createElement(c.a,{icon:"save",onClick:function(){e.fetchSetAdminRoleAuthority()},type:"primary"},"确定"),P.a.createElement(c.a,{onClick:function(){e.setState({visible_set_authority_modal:!1})}},"取消"))),P.a.createElement(i.a,{columns:this.state.columns,dataSource:a.admin_role_list,loading:s,onChange:this.handleTableChange.bind(this),pagination:this.state.pagination,rowKey:"role_id"}))))}}]),t}(P.a.Component);t.default=Object(V.b)((function(e){return{stateAdminRole:e.stateAdminRole,stateAdminAuthority:e.stateAdminAuthority}}))(Z)},1203:function(e,t,a){"use strict";a.r(t);a(1136);var n,i,r=a(1137),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=(a(187),a(140)),u=a.n(o),f=a(1127),m=a.n(f),d=(a(449),a(1124)),_=a.n(d),g=(a(1128),a(1129)),p=a.n(g),h=a(1130),v=a.n(h),y=a(1131),b=a.n(y),E=(a(279),a(15)),x=a.n(E),w=(a(452),a(453)),k=a.n(w),N=a(70),C=a.n(N),S=a(71),T=a.n(S),I=a(72),O=a.n(I),A=a(73),L=a.n(A),j=a(451),D=a.n(j),F=a(74),R=a.n(F),U=(a(1125),a(1126)),q=a.n(U),z=(a(1122),a(1123)),M=a.n(z),B=(a(450),a(280)),P=a.n(B),V=a(1),Y=a.n(V),K=a(75),G=a(1160),H=(a(1188),a(138)),J=a(139),W=a(1161),Q=P.a.Option,X=M.a.Item,Z=q.a.confirm,$=(n=Object(K.b)((function(e){return{stateBook:e.stateBook}})),Object(G.a)(i=n(i=function(e){function t(e){var a;return C()(this,t),(a=O()(this,L()(t).call(this,e))).state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return Y.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"所属小书",dataIndex:"books_id",key:"books_id",render:function(e,t){return Y.a.createElement("a",{className:"book-title",target:"_blank",href:"/book/".concat(t.books_id)},t.books?t.books.title:"-")}},{title:"小书章节标题",dataIndex:"title",key:"title",render:function(e,t){return Y.a.createElement("a",{className:"book-title",target:"_blank",href:"/book/".concat(t.books_id,"/section/").concat(t.book_id)},t.title)}},{title:"概要",dataIndex:"excerpt",key:"excerpt"},{title:"创建时间",dataIndex:"create_dt",key:"create_dt"},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return Y.a.createElement(k.a,{className:"table-book-tag-list",color:"orange"},a.state.otherStatusListText[t.status])}},{title:"阅读数",dataIndex:"read_count",key:"read_count",render:function(e,t){return Y.a.createElement(k.a,{className:"table-book-tag-list",color:"green"},t.read_count||0)}},{title:"评论数",dataIndex:"comment_count",key:"comment_count",render:function(e,t){return Y.a.createElement(k.a,{className:"table-book-tag-list",color:"green"},t.commentCount)}},{title:"拒绝的原因",dataIndex:"rejection_reason",key:"rejection_reason",render:function(e,t){return Y.a.createElement("div",null,~[3,4,5].indexOf(t.status)?t.rejection_reason:"")}},{title:"操作",key:"action",render:function(e,t){return Y.a.createElement("div",{className:"operation-btn"},Y.a.createElement("button",{onClick:function(){a.editUser(t)},className:"btn btn-info",size:"small",type:"primary"},Y.a.createElement(x.a,{type:"edit"})),Y.a.createElement("button",{className:"btn btn-light",onClick:function(){a.deleteBook(t)},size:"small"},Y.a.createElement(x.a,{type:"delete"})))}}],pagination:{current:1},modal_visible_edit:!1,loading:!1,otherStatusList:W.e,otherStatusListText:W.f,title_val:"",status_val:"",edit_status_val:""},a.TablePageChange=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchBookList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.fetchUserEdit(t)}))},a.fetchBookDelete=function(e){var t,n;a.props.dispatch((t=e,n=function(e){J.a.message_success("删除小书章节成功"),a.fetchBookList()},function(){H.a.post("/book/delete",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state;return{title:e.title_val,status:e.status_val}},a.fetchBookList=function(){var e=a.getParams(),t=D()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){H.a.post("/book/list",n).then((function(t){return i&&i(t),e({type:"GET_BOOK_LIST",data:t})}))}))},a.fetchUserEdit=function(e){var t,n;a.props.dispatch((t=Object.assign({book_id:a.props.stateBook.current_info.book_id},e),n=function(e){J.a.message_success("修改小书章节成功"),a.fetchBookList(),a.setState({modal_visible_edit:!1})},function(){H.a.post("/book/update",t).then((function(e){n&&n(e)}))}))},a.resetBarFrom=function(){a.setState({title_val:"",status_val:""},(function(){a.fetchBookList()}))},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a}return R()(t,e),T()(t,[{key:"componentDidMount",value:function(){this.fetchBookList()}},{key:"editUser",value:function(e){console.log("val",e),this.setState({modal_visible_edit:!0,edit_status_val:String(e.status)}),this.props.form.setFieldsValue({status:String(e.status),rejection_reason:e.rejection_reason}),this.props.dispatch({type:"BOOK_SET_CURRENT_INFO",data:e})}},{key:"deleteBook",value:function(e){var t=this;this.props.dispatch({type:"BOOK_SET_CURRENT_INFO",data:e}),Z({title:"确认要删除此小书章节吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.fetchBookDelete({book_id:t.props.stateBook.current_info.book_id})},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.title_val,i=t.status_val,r=t.edit_status_val,s=this.props.stateBook,o=void 0===s?{}:s,f=this.props.form.getFieldDecorator,d={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return Y.a.createElement("div",{className:"layout-main"},Y.a.createElement("div",{className:"layout-main-title"},Y.a.createElement(p.a,null,Y.a.createElement(p.a.Item,{href:"#/manager/index"},Y.a.createElement(x.a,{type:"home"})),Y.a.createElement(p.a.Item,{href:"#/manager/index"},Y.a.createElement("span",null,"主页")),Y.a.createElement(p.a.Item,{href:"#"},Y.a.createElement("span",null,"小书章节管理")),Y.a.createElement(p.a.Item,null,"小书章节汇总"))),Y.a.createElement("div",{className:"admin-book card"},Y.a.createElement("div",{className:"card-body"},Y.a.createElement("div",{className:"xsb-operation-menu"},Y.a.createElement(M.a,{layout:"inline"},Y.a.createElement(X,{label:"小书章节标题"},Y.a.createElement(_.a,{value:n,onChange:function(t){e.changeVal(t.target.value,"title_val")}})),Y.a.createElement(X,{label:"状态"},Y.a.createElement(P.a,{className:"select-view",value:i,onChange:function(t){e.changeVal(t,"status_val")}},Y.a.createElement(Q,{value:""},"全部"),Object.keys(this.state.otherStatusListText).map((function(t){return Y.a.createElement(Q,{key:t},e.state.otherStatusListText[t])})))),Y.a.createElement(M.a.Item,null,Y.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchBookList},"搜索"),Y.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),Y.a.createElement(q.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改小书章节",visible:this.state.modal_visible_edit},Y.a.createElement(M.a,{className:"from-view",onSubmit:this.handleSubmit},Y.a.createElement(X,m()({},d,{hasFeedback:!0,label:"状态"}),f("status",{rules:[{required:!0,message:"请选择状态！"}]})(Y.a.createElement(P.a,{placeholder:"状态",onChange:function(t){e.setState({edit_status_val:t})}},Object.keys(this.state.otherStatusListText).map((function(t){return Y.a.createElement(Q,{key:t},e.state.otherStatusListText[t])}))))),~[3,5].indexOf(Number(r))?Y.a.createElement(X,m()({},d,{label:"拒绝的原因"}),f("rejection_reason",{rules:[{required:!0,message:"请输入拒绝的原因！",whitespace:!0}]})(Y.a.createElement(_.a,{placeholder:"小书章节被拒绝的原因"}))):"",Y.a.createElement(X,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},Y.a.createElement(u.a,{className:"register-btn",htmlType:"submit",type:"primary"},"更新")))),Y.a.createElement(l.a,{columns:this.state.columns,dataSource:o.list,loading:a,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"book_id"})),Y.a.createElement(c.a,{style:{marginTop:"20px"},message:"备注",description:"小书章节发表完成后状态是审核中，是仅对自己可见的，审核不通过也是仅自己可见，并且会标注审核不通过，更改为审核通过的小书章节对所有人开放，\r 这种方式是人工审核的，暂时采用这种方案，后续会更改",type:"info",showIcon:!0})))}}]),t}(Y.a.Component))||i)||i),ee=M.a.create()($);t.default=ee},1204:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(1128),a(1129)),c=a.n(r),s=(a(279),a(15)),l=a.n(s),o=(a(452),a(453)),u=a.n(o),f=a(1130),m=a.n(f),d=a(1131),_=a.n(d),g=a(70),p=a.n(g),h=a(71),v=a.n(h),y=a(72),b=a.n(y),E=a(73),x=a.n(E),w=a(451),k=a.n(w),N=a(74),C=a.n(N),S=(a(449),a(1124)),T=a.n(S),I=(a(1125),a(1126)),O=a.n(I),A=(a(1122),a(1123)),L=a.n(A),j=(a(450),a(280)),D=a.n(j),F=a(1),R=a.n(F),U=a(75),q=(a(1182),a(138)),z=a(139),M=(D.a.Option,L.a.Item,O.a.confirm),B=(T.a.TextArea,function(e){function t(e){var a;return p()(this,t),(a=b()(this,x()(t).call(this,e)))._delete=function(e){a.props.dispatch({type:"SET_ADMIN_SYSTEM_LOG_INFO",data:e}),M({title:"确认要删除此系统日志吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteAdminSystemLog({id:a.props.stateAdminSystemLog.current_info.id})},onCancel:function(){console.log("Cancel")}})},a.TablePageChange=function(){var e=_()(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchAdminSystemLogList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchDeleteAdminSystemLog=function(e){var t,n;a.props.dispatch((t=e,n=function(e){z.a.message_success("删除系统日志成功"),a.fetchAdminSystemLogList()},function(){q.a.post("/admin-system-log/delete",t).then((function(e){n&&n(e)}))}))},a.fetchAdminSystemLogList=function(){var e=k()(a);a.setState({loading:!0});var t,n,i=a.state.pagination.current;a.props.dispatch((t={params:{page:i}},n=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=i,e.setState({loading:!1,pagination:a})},function(e){q.a.get("/admin-system-log/list",t).then((function(t){return n&&n(t),e({type:"GET_ADMIN_SYSTEM_LOG_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return R.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"操作时间",dataIndex:"create_dt",key:"create_dt"},{title:"管理员",dataIndex:"admin_user",key:"admin_user",render:function(e,t){return t.admin_user.nickname}},{title:"类型",dataIndex:"type",key:"type",render:function(e,t){return R.a.createElement(u.a,{className:"table-article-tag-list",color:"orange"},a.state.type[t.type])}},{title:"内容",dataIndex:"content",key:"content"},{title:"操作",key:"action",render:function(e,t){return R.a.createElement("div",{className:"operation-btn"},R.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},"删除"))}}],pagination:{current:1},loading:!1,modal_visible_edit:!1,type:["","创建","修改","删除","登录"]},a}return C()(t,e),v()(t,[{key:"componentDidMount",value:function(){this.fetchAdminSystemLogList()}},{key:"render",value:function(){var e=this.props.stateAdminSystemLog,t=this.state.loading;return R.a.createElement("div",{className:"layout-main"},R.a.createElement("div",{className:"layout-main-title"},R.a.createElement(c.a,null,R.a.createElement(c.a.Item,{href:"#/manager/index"},R.a.createElement(l.a,{type:"home"})),R.a.createElement(c.a.Item,{href:"#/manager/index"},R.a.createElement("span",null,"主页")),R.a.createElement(c.a.Item,{href:"#"},R.a.createElement("span",null,"系统管理")),R.a.createElement(c.a.Item,null,"系统日志"))),R.a.createElement("div",{className:"card admin-system-tag"},R.a.createElement("div",{className:"card-body layout-table"},R.a.createElement(i.a,{columns:this.state.columns,dataSource:e.list,loading:t,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"id"}))))}}]),t}(R.a.Component)),P=L.a.create()(B);t.default=Object(U.b)((function(e){return{stateAdminSystemLog:e.stateAdminSystemLog}}))(P)},1205:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=(a(1134),a(1135)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(449),a(1124)),m=a.n(f),d=(a(1128),a(1129)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=(a(279),a(15)),b=a.n(y),E=(a(452),a(453)),x=a.n(E),w=a(70),k=a.n(w),N=a(71),C=a.n(N),S=a(72),T=a.n(S),I=a(73),O=a.n(I),A=a(74),L=a.n(A),j=(a(1149),a(1151)),D=a.n(j),F=(a(1125),a(1126)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(450),a(280)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=(a(1168),a(138)),K=a(139),G=a(1162),H=a(1150),J=M.a.Option,W=q.a.Item,Q=R.a.confirm,X=(D.a.MonthPicker,D.a.RangePicker,function(e){function t(e){var a;return k()(this,t),(a=T()(this,O()(t).call(this,e))).fetchUserEdit=function(e){var t,n;a.props.dispatch((t=Object.assign({uid:a.props.stateUser.current_user_info.uid},e),n=function(e){K.a.message_success("修改用户成功"),a.fetchUserList(),a.setState({modal_visible_edit:!1})},function(){Y.a.post("/user/edit",t).then((function(e){n&&n(e)}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return P.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"昵称",dataIndex:"nickname",key:"nickname"},{title:"拥有的角色标签",dataIndex:"user_role_ids",key:"user_role_ids",render:function(e,t){return P.a.createElement("div",{className:"table-article-tag-view"},a.state.user_role_all.map((function(e,a){return(t.user_role_ids?t.user_role_ids.split(","):[]).map((function(t,a){if(e.user_role_id===t)return P.a.createElement(x.a,{className:"table-article-tag-list",key:a,color:"purple"},e.user_role_name)}))})))}},{title:"是否禁言中",dataIndex:"ft_ban_dt",key:"ft_ban_dt",render:function(e,t){return P.a.createElement("div",{className:"ban"},P.a.createElement("div",null,"是否被禁：",P.a.createElement(x.a,{className:"table-article-tag-list",color:"orange"},a.isBan(t.ban_dt)?"yes":"no")),P.a.createElement("div",null,"禁言到：",t.ft_ban_dt,"（",a.isBan(t.ban_dt)?"禁言中":"已过期","）"))}},{title:"是否可以登陆",dataIndex:"enable",key:"enable",render:function(e,t){return P.a.createElement("div",{className:"table-enable"},e?P.a.createElement(b.a,{type:"check-circle"}):P.a.createElement(b.a,{type:"close-circle"}))}},{title:"贝壳余额",dataIndex:"user_info",key:"user_info",render:function(e,t){return P.a.createElement("div",{className:"table-enable"},t.user_info.shell_balance)}},{title:"操作",key:"action",render:function(e,t){return P.a.createElement("div",{className:"operation-btn",style:{width:"200px"}},P.a.createElement("button",{onClick:function(){a.editUser(t)},size:"small",type:"primary",className:"btn btn-info"},P.a.createElement(b.a,{type:"edit"})),P.a.createElement("button",{className:"btn btn-light",onClick:function(){a.deleteUser(t)},size:"small"},P.a.createElement(b.a,{type:"delete"})),P.a.createElement("button",{className:"btn btn-primary",onClick:function(){a.props.dispatch({type:"SET_CURRENT_USER_INFO",data:t}),a.setState({isBanVisible:!0})},size:"small",type:"primary"},"禁言"))}}],pagination:{current:1},modal_visible_edit:!1,isBanVisible:!1,banDate:"",loading:!1,user_role_all:[]},a}var a;return L()(t,e),C()(t,[{key:"componentDidMount",value:function(){this.fetchUserList(),this.fetchUserRoleAll()}},{key:"isBan",value:function(e){var t=new Date,a=Object(H.format)(t.setHours(t.getHours()),"YYYY-MM-DD HH:mm:ss");return!(new Date(a).getTime()>new Date(e).getTime())}},{key:"editUser",value:function(e){this.setState({modal_visible_edit:!0}),this.props.dispatch({type:"SET_CURRENT_USER_INFO",data:e}),this.props.form.setFieldsValue({nickname:e.nickname,user_role_ids:e.user_role_ids?e.user_role_ids.split(","):[],enable:e.enable})}},{key:"banUser",value:function(e){var t,a,n=this,i={uid:this.props.stateUser.current_user_info.uid};i.ban_dt=this.state.banDate,this.props.dispatch((t=i,a=function(e){n.setState({isBanVisible:!1}),n.fetchUserList()},function(){Y.a.post("/user/ban",t).then((function(e){a&&a(e)}))}))}},{key:"deleteUser",value:function(e){var t=this;this.props.dispatch({type:"SET_CURRENT_USER_INFO",data:e}),Q({title:"确认要删除此用户吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.fetchUserDelete({uid:t.props.stateUser.current_user_info.uid})},onCancel:function(){console.log("Cancel")}})}},{key:"TablePageChange",value:(a=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current,e.next=4,this.setState({pagination:{current:t.current}});case 4:this.fetchUserList(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll((function(e,a){e||t.fetchUserEdit(a)}))}},{key:"fetchUserRoleAll",value:function(){var e=this;this.props.dispatch(Object(G.c)("",(function(t){e.setState({user_role_all:t.user_role_all?t.user_role_all:[]})})))}},{key:"fetchUserDelete",value:function(e){var t,a,n=this;this.props.dispatch((t=e,a=function(e){K.a.message_success("删除用户成功"),n.fetchUserList()},function(){Y.a.post("/user/delete",t).then((function(e){a&&a(e)}))}))}},{key:"fetchUserList",value:function(){var e=this;this.setState({loading:!0});var t,a,n=this.state.pagination.current;this.props.dispatch((t={params:{page:n}},a=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=n,e.setState({loading:!1,pagination:a})},function(e){Y.a.get("/user/list",t).then((function(t){return a&&a(t),e({type:"GET_USER_LIST",data:t})}))}))}},{key:"render",value:function(){var e=this,t=this.state.loading,a=this.props.stateUser,n=void 0===a?{}:a,r=this.props.form.getFieldDecorator,s=(r("prefix",{initialValue:"86"})(P.a.createElement(M.a,{style:{width:70}},P.a.createElement(J,{value:"86"},"+86"),P.a.createElement(J,{value:"87"},"+87"))),{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}});return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(_.a,null,P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement(b.a,{type:"home"})),P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(_.a.Item,{href:"#"},P.a.createElement("span",null,"用户管理")),P.a.createElement(_.a.Item,null,"用户管理"))),P.a.createElement("div",{className:"layout-nav-btn"}),P.a.createElement("div",{className:"card admin-web-user"},P.a.createElement("div",{className:"card-body"},P.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改用户",visible:this.state.modal_visible_edit},P.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit.bind(this)},P.a.createElement(W,u()({},s,{label:"昵称"}),r("nickname",{rules:[{required:!0,message:"请输入昵称！",whitespace:!0}]})(P.a.createElement(m.a,{disabled:!0,placeholder:"昵称"}))),P.a.createElement(W,u()({},s,{label:"用户角色标签"}),r("user_role_ids",{rules:[{required:!1,message:"请选择用户角色标签!",type:"array"}]})(P.a.createElement(M.a,{mode:"multiple",placeholder:"请选择用户角色标签"},this.state.user_role_all.map((function(e){return P.a.createElement(J,{key:e.user_role_id},e.user_role_name)}))))),P.a.createElement(W,u()({},s,{label:"是否可登录"}),r("enable",{valuePropName:"checked"})(P.a.createElement(l.a,null))),P.a.createElement(W,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},P.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},"确定")))),P.a.createElement(R.a,{onOk:function(){e.banUser({type:"article"})},onCancel:function(){e.setState({isBanVisible:!1})},title:"禁言用户",visible:this.state.isBanVisible},P.a.createElement("div",null,P.a.createElement(D.a,{onOk:function(t){e.setState({banDate:Object(H.format)(t,"YYYY-MM-DD HH:mm:ss")})},format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:Object(H.format)("00:00:00","HH:mm:ss")}}))),P.a.createElement(i.a,{columns:this.state.columns,dataSource:n.user_list,loading:t,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"uid"}))))}}]),t}(P.a.Component)),Z=q.a.create()(X);t.default=Object(V.b)((function(e){return{stateUser:e.stateUser}}))(Z)},1206:function(e,t,a){"use strict";a.r(t);a(1136);var n,i,r=a(1137),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=(a(187),a(140)),u=a.n(o),f=a(1127),m=a.n(f),d=(a(449),a(1124)),_=a.n(d),g=(a(1128),a(1129)),p=a.n(g),h=a(1130),v=a.n(h),y=a(1131),b=a.n(y),E=(a(279),a(15)),x=a.n(E),w=(a(452),a(453)),k=a.n(w),N=a(70),C=a.n(N),S=a(71),T=a.n(S),I=a(72),O=a.n(I),A=a(73),L=a.n(A),j=a(451),D=a.n(j),F=a(74),R=a.n(F),U=(a(1125),a(1126)),q=a.n(U),z=(a(1122),a(1123)),M=a.n(z),B=(a(450),a(280)),P=a.n(B),V=a(1),Y=a.n(V),K=a(75),G=a(1160),H=(a(1184),a(138)),J=a(1161),W=a(139),Q=P.a.Option,X=M.a.Item,Z=q.a.confirm,$=(n=Object(K.b)((function(e){return{stateDynamic:e.stateDynamic}})),Object(G.a)(i=n(i=function(e){function t(e){var a;return C()(this,t),(a=O()(this,L()(t).call(this,e))).state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return Y.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"内容",dataIndex:"content",key:"content",render:function(e,t){return Y.a.createElement("a",{href:"/dynamic/".concat(t.id),className:"dynamic-content"},t.content)}},{title:"创建时间",dataIndex:"create_dt",key:"create_dt"},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return Y.a.createElement(k.a,{className:"table-article-tag-list",color:"red"},a.state.otherStatusListText[t.status])}},{title:"类型",dataIndex:"type",key:"type",render:function(e,t){return Y.a.createElement(k.a,{className:"table-article-tag-list",color:"red"},a.state.dynamicTypeText[t.type])}},{title:"所属话题",dataIndex:"tag_ids",key:"tag_ids",render:function(e,t){return Y.a.createElement("div",{className:"table-article-tag-view"},a.state.dynamicTopicAll.map((function(e,a){if(e.topic_id===t.topic_ids)return Y.a.createElement(k.a,{className:"table-article-tag-list",key:a,color:"orange"},e.name)})))}},{title:"预览",dataIndex:"attach",key:"attach",render:function(e,t){return Y.a.createElement("div",{className:"img-preview",dangerouslySetInnerHTML:{__html:a.renderAttach(t)}})}},{title:"评论数",dataIndex:"comment_count",key:"comment_count",render:function(e,t){return Y.a.createElement(k.a,{className:"table-article-tag-list",color:"green"},t.comment_count)}},{title:"拒绝的原因",dataIndex:"rejection_reason",key:"rejection_reason",render:function(e,t){return Y.a.createElement("div",null,Number(t.status)===a.state.otherStatusList.reviewFail?t.rejection_reason:"")}},{title:"操作",key:"action",render:function(e,t){return Y.a.createElement("div",{className:"operation-btn"},Y.a.createElement("button",{onClick:function(){a.editUser(t)},size:"small",type:"primary",className:"btn btn-info"},Y.a.createElement(x.a,{type:"edit"})),Y.a.createElement("button",{className:"btn btn-light",onClick:function(){a.deleteDynamic(t)},size:"small"},Y.a.createElement(x.a,{type:"delete"})))}}],pagination:{current:1},modal_visible_edit:!1,loading:!1,otherStatusList:J.e,otherStatusListText:J.f,dynamicType:J.c,dynamicTypeText:J.d,content_val:"",status_val:"",type_val:"",edit_status_val:"",dynamicTopicAll:[]},a.TablePageChange=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchDynamicList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.fetchUserEdit(t)}))},a.fetchDynamicDelete=function(e){var t,n;a.props.dispatch((t=e,n=function(e){W.a.message_success("删除动态成功"),a.fetchDynamicList()},function(){H.a.post("/dynamic/delete",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state;return{content:e.content_val,status:e.status_val,type:e.type_val}},a.fetchDynamicList=function(){var e=a.getParams(),t=D()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){H.a.post("/dynamic/list",n).then((function(t){return i&&i(t),e({type:"GET_DYNAMIC_LIST",data:t})}))}))},a.fetchUserEdit=function(e){var t,n;a.props.dispatch((t=Object.assign({id:a.props.stateDynamic.current_info.id},e),n=function(e){W.a.message_success("修改动态成功"),a.fetchDynamicList(),a.setState({modal_visible_edit:!1})},function(){H.a.post("/dynamic/update",t).then((function(e){n&&n(e)}))}))},a.resetBarFrom=function(){a.setState({content_val:"",status_val:"",type_val:""},(function(){a.fetchDynamicList()}))},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a}return R()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e,t,a=this;this.fetchDynamicList(),this.props.dispatch((e="",t=function(e){console.log("res",e),a.setState({dynamicTopicAll:e.all})},function(){H.a.get("/dynamic-topic/all",e).then((function(e){t&&t(e)}))}))}},{key:"editUser",value:function(e){console.log("val",e),this.setState({modal_visible_edit:!0,edit_status_val:String(e.status)}),this.props.form.setFieldsValue({status:String(e.status),type:String(e.type),rejection_reason:e.rejection_reason,topic_ids:e.topic_ids}),this.props.dispatch({type:"DYNAMIC_SET_CURRENT_INFO",data:e})}},{key:"renderAttach",value:function(e){if(e.type===this.state.dynamicType.link)return'<a href="'.concat(e.attach,'" target="_block">\n       ').concat(e.attach,"\n        </a>");if(e.type===this.state.dynamicType.img){var t="";return this.imgAnalyze(e.attach).map((function(e){t+='<img src="'.concat(e,'" alt=""></img>')})),t}}},{key:"imgAnalyze",value:function(e){var t=e.split(",")||[];return e.split(",").length>0?t:[]}},{key:"deleteDynamic",value:function(e){var t=this;this.props.dispatch({type:"DYNAMIC_SET_CURRENT_INFO",data:e}),Z({title:"确认要删除此动态吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.fetchDynamicDelete({id:t.props.stateDynamic.current_info.id})},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.content_val,i=t.status_val,r=t.type_val,s=t.edit_status_val,o=this.props.stateDynamic,f=void 0===o?{}:o,d=this.props.form.getFieldDecorator,g={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return Y.a.createElement("div",{className:"layout-main"},Y.a.createElement("div",{className:"layout-main-title"},Y.a.createElement(p.a,null,Y.a.createElement(p.a.Item,{href:"#/manager/index"},Y.a.createElement(x.a,{type:"home"})),Y.a.createElement(p.a.Item,{href:"#/manager/index"},Y.a.createElement("span",null,"主页")),Y.a.createElement(p.a.Item,{href:"#"},Y.a.createElement("span",null,"动态管理")),Y.a.createElement(p.a.Item,null,"动态汇总"))),Y.a.createElement("div",{className:"card"},Y.a.createElement("div",{className:"card-body"},Y.a.createElement("div",{className:"xsb-operation-menu"},Y.a.createElement(M.a,{layout:"inline"},Y.a.createElement(X,{label:"动态内容"},Y.a.createElement(_.a,{value:n,onChange:function(t){e.changeVal(t.target.value,"content_val")}})),Y.a.createElement(X,{label:"状态"},Y.a.createElement(P.a,{className:"select-view",value:i,onChange:function(t){e.changeVal(t,"status_val")}},Y.a.createElement(Q,{value:""},"全部"),Object.keys(this.state.otherStatusListText).map((function(t){return Y.a.createElement(Q,{key:t},e.state.otherStatusListText[t])})))),Y.a.createElement(X,{label:"类型"},Y.a.createElement(P.a,{className:"select-view",value:r,onChange:function(t){e.changeVal(t,"type_val")}},Y.a.createElement(Q,{value:""},"全部"),Object.keys(this.state.dynamicTypeText).map((function(t){return Y.a.createElement(Q,{key:t,value:t},e.state.dynamicTypeText[t])})))),Y.a.createElement(M.a.Item,null,Y.a.createElement("button",{className:"btn btn-danger",onClick:this.fetchDynamicList},"搜索"),Y.a.createElement("button",{className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),Y.a.createElement(q.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改动态",visible:this.state.modal_visible_edit},Y.a.createElement(M.a,{className:"from-view",onSubmit:this.handleSubmit},Y.a.createElement(X,m()({},g,{hasFeedback:!0,label:"状态"}),d("status",{rules:[{required:!0,message:"请选择状态！"}]})(Y.a.createElement(P.a,{placeholder:"状态",onChange:function(t){e.setState({edit_status_val:t})}},Object.keys(this.state.otherStatusListText).map((function(t){return Y.a.createElement(Q,{key:t},e.state.otherStatusListText[t])}))))),Number(s)===this.state.otherStatusList.reviewFail?Y.a.createElement(X,m()({},g,{label:"拒绝的原因"}),d("rejection_reason",{rules:[{required:!0,message:"请输入拒绝的原因！",whitespace:!0}]})(Y.a.createElement(_.a,{placeholder:"动态被拒绝的原因"}))):"",Y.a.createElement(X,m()({},g,{hasFeedback:!0,label:"类型"}),d("type",{rules:[{required:!0,message:"请选择类型！"}]})(Y.a.createElement(P.a,{placeholder:"类型"},Object.keys(this.state.dynamicTypeText).map((function(t){return Y.a.createElement(Q,{key:t,value:t},e.state.dynamicTypeText[t])}))))),Y.a.createElement(X,m()({},g,{label:"所属专题"}),d("topic_ids",{rules:[{message:"请选择所属专题!",whitespace:!0}]})(Y.a.createElement(P.a,{placeholder:"请选择所属专题"},Y.a.createElement(Q,{value:""},"空"),this.state.dynamicTopicAll.map((function(e){return Y.a.createElement(Q,{key:e.topic_id},e.name)}))))),Y.a.createElement(X,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},Y.a.createElement(u.a,{className:"register-btn",htmlType:"submit",type:"primary"},"更新")))),Y.a.createElement(l.a,{columns:this.state.columns,dataSource:f.list,loading:a,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"id"})),Y.a.createElement(c.a,{style:{marginTop:"20px"},message:"备注信息",description:"动态发表完成后状态是审核中，是仅对自己可见的，审核不通过也是仅自己可见，并且会标注审核不通过，更改为审核通过的动态对所有人开放，\r 这种方式是人工审核的，暂时采用这种方案，后续会更改",type:"info",showIcon:!0})))}}]),t}(Y.a.Component))||i)||i),ee=M.a.create()($);t.default=ee},1207:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=(a(1138),a(1139)),l=a.n(s),o=(a(1134),a(1135)),u=a.n(o),f=a(1127),m=a.n(f),d=(a(1128),a(1129)),_=a.n(d),g=(a(279),a(15)),p=a.n(g),h=a(1130),v=a.n(h),y=a(1131),b=a.n(y),E=a(70),x=a.n(E),w=a(71),k=a.n(w),N=a(72),C=a.n(N),S=a(73),T=a.n(S),I=a(451),O=a.n(I),A=a(74),L=a.n(A),j=(a(449),a(1124)),D=a.n(j),F=(a(1125),a(1126)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(450),a(280)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=(a(1185),a(138)),K=a(139),G=(M.a.Option,q.a.Item),H=R.a.confirm,J=D.a.TextArea,W=function(e){function t(e){var a;return x()(this,t),(a=C()(this,T()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!1}),a.props.dispatch({type:"SET_DYNAMIC_TOPIC_INFO",data:e}),a.props.form.setFieldsValue(Object.assign({},e))},a._delete=function(e){a.props.dispatch({type:"SET_DYNAMIC_TOPIC_INFO",data:e}),H({title:"确认要删除此专题吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteDynamicTopic({topic_id:a.props.stateDynamicTopic.current_info.topic_id})},onCancel:function(){console.log("Cancel")}})},a.TablePageChange=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchDynamicTopicList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_edit:!0,is_create:!0}),a.props.form.setFields({sort:{value:a.props.stateDynamicTopic.list.length}})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(console.log("Received values of form: ",n),t?a.fetchCreateDynamicTopic(n):a.fetchUpdateDynamicTopic(n))}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.validateToNextPassword=function(e,t,n){var i=a.props.form;t&&a.state.confirmDirty&&i.validateFields(["confirm"],{force:!0}),n()},a.fetchCreateDynamicTopic=function(e){var t,n;a.props.dispatch((t=e,n=function(e){K.a.message_success("创建专题成功"),a.fetchDynamicTopicList(),a.setState({modal_visible_edit:!1})},function(e){Y.a.post("/dynamic-topic/create",t).then((function(e){n&&n(e)}))}))},a.fetchUpdateDynamicTopic=function(e){var t,n;a.props.dispatch((t=Object.assign({topic_id:a.props.stateDynamicTopic.current_info.topic_id},e),n=function(e){K.a.message_success("修改专题成功"),a.fetchDynamicTopicList(),a.setState({modal_visible_edit:!1})},function(){Y.a.post("/dynamic-topic/update",t).then((function(e){n&&n(e)}))}))},a.fetchDeleteDynamicTopic=function(e){var t,n;a.props.dispatch((t=e,n=function(e){K.a.message_success("删除专题成功"),a.fetchDynamicTopicList()},function(){Y.a.post("/dynamic-topic/delete",t).then((function(e){n&&n(e)}))}))},a.fetchDynamicTopicList=function(){var e=O()(a);a.setState({loading:!0});var t,n,i=a.state.pagination.current;a.props.dispatch((t={params:{page:i}},n=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=i,e.setState({loading:!1,pagination:a})},function(e){Y.a.get("/dynamic-topic/list",t).then((function(t){return n&&n(t),e({type:"GET_DYNAMIC_TOPICS_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return P.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"专题名",dataIndex:"name",key:"name"},{title:"专题单词",dataIndex:"en_name",key:"en_name"},{title:"专题图标地址",dataIndex:"icon",key:"icon"},{title:"专题演示",dataIndex:"icon",key:"demo",render:function(e,t){return P.a.createElement("div",{className:"type"},P.a.createElement("img",{className:"tag-img-icon",src:t.icon,alt:""}))}},{title:"备注",dataIndex:"description",key:"description"},{title:"订阅数量",dataIndex:"rss_count",key:"rss_count"},{title:"是否首页侧栏显示",dataIndex:"is_show",key:"is_show",render:function(e,t){return P.a.createElement("div",{className:"table-is-login"},t.is_show?P.a.createElement(p.a,{type:"check-circle"}):P.a.createElement(p.a,{type:"close-circle"}))}},{title:"是否可以用",dataIndex:"enable",key:"enable",render:function(e,t){return P.a.createElement("div",{className:"table-is-login"},t.enable?P.a.createElement(p.a,{type:"check-circle"}):P.a.createElement(p.a,{type:"close-circle"}))}},{title:"是否加入首页或者推荐",dataIndex:"is_push",key:"is_push",render:function(e,t){return P.a.createElement("div",{className:"table-is-login"},t.is_push?P.a.createElement(p.a,{type:"check-circle"}):P.a.createElement(p.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return P.a.createElement("div",{className:"operation-btn"},P.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",type:"primary",className:"btn btn-info"},P.a.createElement(p.a,{type:"edit"})),P.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},P.a.createElement(p.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,confirmDirty:!1,modal_visible_edit:!1,modal_visible_authority:!1,is_create:!0,role_id:"",menu_text:["","图片","字体图标"]},a}return L()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.fetchDynamicTopicList()}},{key:"render",value:function(){var e=this,t=this.props.stateDynamicTopic,a=this.state,n=a.loading,r=a.is_create,s=this.props.form.getFieldDecorator,o={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(_.a,null,P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement(p.a,{type:"home"})),P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(_.a.Item,{href:"#"},P.a.createElement("span",null,"动态管理")),P.a.createElement(_.a.Item,null,"动态专题"))),P.a.createElement("div",{className:"layout-nav-btn"},P.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",onClick:function(){return e.showModal(0)}},"创建专题")),P.a.createElement("div",{className:"card article-tag"},P.a.createElement("div",{className:"card-body"},P.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"填写专题",visible:this.state.modal_visible_edit},P.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit},P.a.createElement(G,m()({},o,{label:"专题名"}),s("name",{rules:[{required:!0,message:"请输入专题名！",whitespace:!0}]})(P.a.createElement(D.a,{placeholder:"专题名"}))),P.a.createElement(G,m()({},o,{label:"专题名单词"}),s("en_name",{rules:[{required:!0,message:"请输入专题单词！",whitespace:!0}]})(P.a.createElement(D.a,{placeholder:"专题单词"}))),P.a.createElement(G,m()({},o,{label:"专题图标地址"}),s("icon",{rules:[{required:!0,message:"请输入专题图标！",whitespace:!0}]})(P.a.createElement(D.a,{placeholder:"专题图标地址"}))),P.a.createElement(G,m()({},o,{hasFeedback:!0,label:"专题描述"}),s("description",{rules:[{required:!0,message:"请输入专题描述"}]})(P.a.createElement(J,{placeholder:"请输入专题描述",type:"text"}))),P.a.createElement(G,m()({},o,{label:"首页显示"}),s("is_show",{valuePropName:"checked"})(P.a.createElement(u.a,null))),P.a.createElement(G,m()({},o,{label:"是否有效"}),s("enable",{valuePropName:"checked"})(P.a.createElement(u.a,null))),P.a.createElement(G,m()({},o,{label:"是否加入首页或者推荐"}),s("is_push",{valuePropName:"checked"})(P.a.createElement(u.a,null))),P.a.createElement(G,m()({},o,{label:"排序"}),s("sort")(P.a.createElement(l.a,null))),P.a.createElement(G,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},P.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},r?"创建专题":"更新")))),P.a.createElement(i.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"topic_id"}))))}}]),t}(P.a.Component),Q=q.a.create()(W);t.default=Object(V.b)((function(e){return{stateDynamicTopic:e.stateDynamicTopic}}))(Q)},1208:function(e,t,a){"use strict";a.r(t);a(1136);var n,i,r=a(1137),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(1128),a(1129)),m=a.n(f),d=(a(279),a(15)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=(a(187),a(140)),b=a.n(y),E=(a(452),a(453)),x=a.n(E),w=a(70),k=a.n(w),N=a(71),C=a.n(N),S=a(72),T=a.n(S),I=a(73),O=a.n(I),A=a(451),L=a.n(A),j=a(74),D=a.n(j),F=(a(1125),a(1126)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(450),a(280)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=a(1160),K=(a(1175),a(138)),G=a(139),H=M.a.Option,J=q.a.Item,W=(R.a.confirm,n=Object(V.b)((function(e){return{stateUserAvatarReview:e.stateUserAvatarReview}})),Object(Y.a)(i=n(i=function(e){function t(e){var a;return k()(this,t),(a=T()(this,O()(t).call(this,e))).state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return P.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"头像",dataIndex:"title",key:"title",render:function(e,t){return P.a.createElement("div",{className:"avatar-review"},P.a.createElement("img",{style:{width:"80px"},src:t.avatar_review,alt:""}))}},{title:"状态",dataIndex:"avatar_review_status",key:"avatar_review_status",render:function(e,t){return P.a.createElement(x.a,{className:"table-article-tag-list",color:"orange"},a.state.status_list[t.avatar_review_status])}},{title:"操作",key:"action",render:function(e,t){return 1===t.avatar_review_status||3===t.avatar_review_status?P.a.createElement("div",{className:"operation-btn"},P.a.createElement(b.a,{onClick:function(){a.editUser(t)},size:"small",type:"primary"},"修改")):""}}],pagination:{current:1},modal_visible_edit:!1,loading:!1,status_list:["","审核中","审核通过","审核失败"],status_val:1},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchAvatarReviewList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.fetchUserEdit(t)}))},a.getParams=function(){return{status:a.state.status_val}},a.fetchAvatarReviewList=function(){var e=a.getParams(),t=L()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n={params:Object.assign({page:r},e)},i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){K.a.get("/user/avatar-review-list",n).then((function(t){return i&&i(t),e({type:"GET_AVATAR_REVIEW_LIST",data:t})}))}))},a.fetchUserEdit=function(e){var t,n;a.props.dispatch((t=Object.assign({uid:a.props.stateUserAvatarReview.current_info.uid},e),n=function(e){G.a.message_success("修改头像成功"),a.fetchAvatarReviewList(),a.setState({modal_visible_edit:!1})},function(){K.a.post("/user/avatar-review-set",t).then((function(e){n&&n(e)}))}))},a.resetBarFrom=function(){a.setState({status_val:""})},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a}return D()(t,e),C()(t,[{key:"componentDidMount",value:function(){this.fetchAvatarReviewList()}},{key:"editUser",value:function(e){this.setState({modal_visible_edit:!0}),this.props.dispatch({type:"AVATAR_REVIEW_SET_CURRENT_INFO",data:e}),this.props.form.setFieldsValue({status:String(e.avatar_review_status)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.status_list,i=t.status_val,r=this.props.stateUserAvatarReview,s=void 0===r?{}:r,o=this.props.form.getFieldDecorator;return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(m.a,null,P.a.createElement(m.a.Item,{href:"#/manager/index"},P.a.createElement(_.a,{type:"home"})),P.a.createElement(m.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(m.a.Item,{href:"#"},P.a.createElement("span",null,"用户管理")),P.a.createElement(m.a.Item,null,"用户头像审核"))),P.a.createElement("div",{className:"card"},P.a.createElement("div",{className:"card-body"},P.a.createElement("div",{className:"xsb-operation-menu"},P.a.createElement(q.a,{layout:"inline"},P.a.createElement(J,{label:"状态"},P.a.createElement(M.a,{className:"select-view",value:i,onChange:function(t){e.changeVal(t,"status_val")}},n.map((function(e,t){return P.a.createElement(H,{value:t,key:t},e)})))),P.a.createElement(q.a.Item,null,P.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchAvatarReviewList},"搜索"),P.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),P.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改文章",visible:this.state.modal_visible_edit},P.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit},P.a.createElement(J,u()({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},{hasFeedback:!0,label:"状态"}),o("status",{rules:[{required:!0,message:"请选择状态！"}]})(P.a.createElement(M.a,{placeholder:"状态"},this.state.status_list.map((function(e,t){return P.a.createElement(H,{key:t},e)}))))),P.a.createElement(J,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},P.a.createElement(b.a,{className:"register-btn",htmlType:"submit",type:"primary"},"更新")))),P.a.createElement(l.a,{columns:this.state.columns,dataSource:s.list,loading:a,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"uid"}))),P.a.createElement(c.a,{style:{marginTop:"20px"},message:"备注信息",description:"文章发表完成后状态是审核中，是仅对自己可见的，审核不通过也是仅自己可见，并且会标注审核不通过，更改为审核通过的文章对所有人开放，\r 这种方式是人工审核的，暂时采用这种方案，后续会更改",type:"info",showIcon:!0}))}}]),t}(P.a.Component))||i)||i),Q=q.a.create()(W);t.default=Q},1209:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=(a(1134),a(1135)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(1128),a(1129)),m=a.n(f),d=(a(279),a(15)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=a(70),b=a.n(y),E=a(71),x=a.n(E),w=a(72),k=a.n(w),N=a(73),C=a.n(N),S=a(451),T=a.n(S),I=a(74),O=a.n(I),A=(a(449),a(1124)),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(1122),a(1123)),R=a.n(F),U=(a(450),a(280)),q=a.n(U),z=a(1),M=a.n(z),B=a(75),P=(a(1170),a(138)),V=a(139),Y=(q.a.Option,R.a.Item),K=D.a.confirm,G=L.a.TextArea,H=function(e){function t(e){var a;return b()(this,t),(a=k()(this,C()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!1}),a.props.dispatch({type:"SET_ARTICLE_TAG_INFO",data:e}),a.props.form.setFieldsValue(Object.assign({},e))},a._delete=function(e){a.props.dispatch({type:"SET_ARTICLE_TAG_INFO",data:e}),K({title:"确认要删除此标签吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteArticleTag({tag_id:a.props.stateArticleTag.current_info.tag_id})},onCancel:function(){console.log("Cancel")}})},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchArticleTagList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_edit:!0,is_create:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(console.log("Received values of form: ",n),t?a.fetchCreateArticleTag(n):a.fetchUpdateArticleTag(n))}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.selectRole=function(e){a.setState({role_id:e})},a.validateToNextPassword=function(e,t,n){var i=a.props.form;t&&a.state.confirmDirty&&i.validateFields(["confirm"],{force:!0}),n()},a.fetchCreateArticleTag=function(e){var t,n;a.props.dispatch((t=e,n=function(e){V.a.message_success("创建标签成功"),a.fetchArticleTagList(),a.setState({modal_visible_edit:!1})},function(e){P.a.post("/article-tag/create",t).then((function(e){n&&n(e)}))}))},a.fetchUpdateArticleTag=function(e){var t,n;a.props.dispatch((t=Object.assign({tag_id:a.props.stateArticleTag.current_info.tag_id},e),n=function(e){V.a.message_success("修改标签成功"),a.fetchArticleTagList(),a.setState({modal_visible_edit:!1})},function(){P.a.post("/article-tag/update",t).then((function(e){n&&n(e)}))}))},a.fetchDeleteArticleTag=function(e){var t,n;a.props.dispatch((t=e,n=function(e){V.a.message_success("删除标签成功"),a.fetchArticleTagList()},function(){P.a.post("/article-tag/delete",t).then((function(e){n&&n(e)}))}))},a.fetchArticleTagList=function(){var e=T()(a);a.setState({loading:!0});var t,n,i=a.state.pagination.current;a.props.dispatch((t={params:{page:i}},n=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=i,e.setState({loading:!1,pagination:a})},function(e){P.a.get("/article-tag/list",t).then((function(t){return n&&n(t),e({type:"GET_ARTICLE_TAGS_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return M.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"标签名",dataIndex:"name",key:"name"},{title:"标签单词",dataIndex:"en_name",key:"en_name"},{title:"标签图标地址",dataIndex:"icon",key:"icon"},{title:"标签演示",dataIndex:"icon",key:"article_tag_demo",render:function(e,t){return M.a.createElement("div",{className:"type"},M.a.createElement("img",{className:"tag-img-icon",src:t.icon,alt:""}))}},{title:"备注",dataIndex:"description",key:"description"},{title:"是否可以用",dataIndex:"enable",key:"enable",render:function(e,t){return M.a.createElement("div",{className:"table-is-login"},e?M.a.createElement(_.a,{type:"check-circle"}):M.a.createElement(_.a,{type:"close-circle"}))}},{title:"是否加入首页或者推荐",dataIndex:"is_push",key:"is_push",render:function(e,t){return M.a.createElement("div",{className:"table-is-login"},e?M.a.createElement(_.a,{type:"check-circle"}):M.a.createElement(_.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return M.a.createElement("div",{className:"operation-btn"},M.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",type:"primary",className:"btn btn-info"},M.a.createElement(_.a,{type:"edit"})),M.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},M.a.createElement(_.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,confirmDirty:!1,modal_visible_edit:!1,modal_visible_authority:!1,is_create:!0,role_id:"",menu_text:["","图片","字体图标"]},a}return O()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchArticleTagList()}},{key:"render",value:function(){var e=this,t=this.props.stateArticleTag,a=this.state,n=a.loading,r=a.is_create,s=this.props.form.getFieldDecorator,o={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return M.a.createElement("div",{className:"layout-main"},M.a.createElement("div",{className:"layout-main-title"},M.a.createElement(m.a,null,M.a.createElement(m.a.Item,{href:"/manager/index"},M.a.createElement(_.a,{type:"home"})),M.a.createElement(m.a.Item,{href:"/manager/index"},M.a.createElement("span",null,"主页")),M.a.createElement(m.a.Item,{href:"#"},M.a.createElement("span",null,"文章管理")),M.a.createElement(m.a.Item,null,"文章标签"))),M.a.createElement("div",{className:"layout-nav-btn"},M.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",onClick:function(){return e.showModal(0)}},"创建标签")),M.a.createElement("div",{className:"card article-tag"},M.a.createElement("div",{className:"card-body"},M.a.createElement(D.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"填写标签",visible:this.state.modal_visible_edit},M.a.createElement(R.a,{className:"from-view",onSubmit:this.handleSubmit},M.a.createElement(Y,u()({},o,{label:"标签名"}),s("name",{rules:[{required:!0,message:"请输入标签名！",whitespace:!0}]})(M.a.createElement(L.a,{placeholder:"标签名"}))),M.a.createElement(Y,u()({},o,{label:"标签名单词"}),s("en_name",{rules:[{required:!0,message:"请输入标签单词！",whitespace:!0}]})(M.a.createElement(L.a,{placeholder:"标签单词"}))),M.a.createElement(Y,u()({},o,{label:"标签图标地址"}),s("icon",{rules:[{required:!0,message:"请输入标签图标！",whitespace:!0}]})(M.a.createElement(L.a,{placeholder:"标签图标地址"}))),M.a.createElement(Y,u()({},o,{hasFeedback:!0,label:"标签描述"}),s("description",{rules:[{required:!0,message:"请输入标签描述"}]})(M.a.createElement(G,{placeholder:"请输入标签描述",type:"text"}))),M.a.createElement(Y,u()({},o,{label:"是否有效"}),s("enable",{valuePropName:"checked"})(M.a.createElement(l.a,null))),M.a.createElement(Y,u()({},o,{label:"是否加入首页或者推荐"}),s("is_push",{valuePropName:"checked"})(M.a.createElement(l.a,null))),M.a.createElement(Y,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},M.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},r?"创建标签":"更新")))),M.a.createElement(i.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"tag_id"}))))}}]),t}(M.a.Component),J=R.a.create()(H);t.default=Object(B.b)((function(e){return{stateArticleTag:e.stateArticleTag}}))(J)},1210:function(e,t,a){"use strict";a.r(t);a(1136);var n=a(1137),i=a.n(n),r=(a(1132),a(1133)),c=a.n(r),s=(a(187),a(140)),l=a.n(s),o=(a(1134),a(1135)),u=a.n(o),f=(a(1138),a(1139)),m=a.n(f),d=a(1127),_=a.n(d),g=(a(1128),a(1129)),p=a.n(g),h=(a(279),a(15)),v=a.n(h),y=(a(452),a(453)),b=a.n(y),E=a(1130),x=a.n(E),w=a(1131),k=a.n(w),N=a(70),C=a.n(N),S=a(71),T=a.n(S),I=a(72),O=a.n(I),A=a(73),L=a.n(A),j=a(451),D=a.n(j),F=a(74),R=a.n(F),U=(a(449),a(1124)),q=a.n(U),z=(a(1125),a(1126)),M=a.n(z),B=(a(1122),a(1123)),P=a.n(B),V=(a(450),a(280)),Y=a.n(V),K=a(1),G=a.n(K),H=a(75),J=(a(1171),a(138)),W=a(139),Q=Y.a.Option,X=P.a.Item,Z=M.a.confirm,$=q.a.TextArea,ee=function(e){function t(e){var a;return C()(this,t),(a=O()(this,L()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!1}),a.props.dispatch({type:"SET_ARTICLE_COLUMN_INFO",data:e}),a.props.form.setFieldsValue(Object.assign({},e,{tag_ids:e.tag_ids?e.tag_ids.split(","):[]}))},a._delete=function(e){a.props.dispatch({type:"SET_ARTICLE_COLUMN_INFO",data:e}),Z({title:"确认要删除此专栏吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeleteArticleColumn({column_id:a.props.stateArticleColumn.current_info.column_id})},onCancel:function(){console.log("Cancel")}})},a.TablePageChange=function(){var e=k()(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchArticleColumnList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_edit:!0,is_create:!0}),a.props.form.setFields({sort:{value:a.props.stateArticleColumn.list.length}})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(console.log("Received values of form: ",n),t?a.fetchCreateArticleColumn(n):a.fetchUpdateArticleColumn(n))}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.selectRole=function(e){a.setState({role_id:e})},a.validateToNextPassword=function(e,t,n){var i=a.props.form;t&&a.state.confirmDirty&&i.validateFields(["confirm"],{force:!0}),n()},a.fetchCreateArticleColumn=function(e){var t,n;a.props.dispatch((t=e,n=function(e){W.a.message_success("创建专栏成功"),a.fetchArticleColumnList(),a.setState({modal_visible_edit:!1})},function(e){J.a.post("/article-column/create",t).then((function(e){n&&n(e)}))}))},a.fetchUpdateArticleColumn=function(e){var t,n;a.props.dispatch((t=Object.assign({column_id:a.props.stateArticleColumn.current_info.column_id},e),n=function(e){W.a.message_success("修改专栏成功"),a.fetchArticleColumnList(),a.setState({modal_visible_edit:!1})},function(){J.a.post("/article-column/update",t).then((function(e){n&&n(e)}))}))},a.fetchDeleteArticleColumn=function(e){var t,n;a.props.dispatch((t=e,n=function(e){W.a.message_success("删除专栏成功"),a.fetchArticleColumnList()},function(){J.a.post("/article-column/delete",t).then((function(e){n&&n(e)}))}))},a.fetchArticleColumnList=function(){var e=D()(a);a.setState({loading:!0});var t,n,i=a.state.pagination.current;a.props.dispatch((t={params:{page:i}},n=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=i,e.setState({loading:!1,pagination:a})},function(e){J.a.get("/article-column/list",t).then((function(t){return n&&n(t),e({type:"GET_ARTICLE_COLUMN_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return G.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"专栏名",dataIndex:"name",key:"name"},{title:"专栏单词",dataIndex:"en_name",key:"en_name"},{title:"专栏图标",dataIndex:"icon",key:"icon"},{title:"排序",dataIndex:"sort",key:"sort"},{title:"专栏图标演示",dataIndex:"icon",key:"article_column_icon_demo",render:function(e,t){return G.a.createElement("div",{className:"type"},G.a.createElement("img",{className:"tag-img-icon",src:t.icon,alt:""}))}},{title:"下属专题",dataIndex:"tag_ids",key:"tag_ids",render:function(e,t){return G.a.createElement("div",{className:"table-article-tag-view"},a.state.article_tag_all.map((function(e,a){return t.tag_ids.split(",").map((function(t,a){if(e.tag_id===t)return G.a.createElement(b.a,{className:"table-article-tag-list",key:a,color:"orange"},e.name)}))})))}},{title:"备注",dataIndex:"description",key:"description"},{title:"是否首页显示",dataIndex:"is_home",key:"is_home",render:function(e,t){return G.a.createElement("div",{className:"table-is-login"},e?G.a.createElement(v.a,{type:"check-circle"}):G.a.createElement(v.a,{type:"close-circle"}))}},{title:"是否可以用",dataIndex:"enable",key:"enable",render:function(e,t){return G.a.createElement("div",{className:"table-is-login"},e?G.a.createElement(v.a,{type:"check-circle"}):G.a.createElement(v.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return G.a.createElement("div",{className:"operation-btn"},G.a.createElement("button",{onClick:function(){a._edit(t)},className:"btn btn-info",size:"small",type:"primary"},G.a.createElement(v.a,{type:"edit"})),G.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},G.a.createElement(v.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,confirmDirty:!1,modal_visible_edit:!1,modal_visible_authority:!1,is_create:!0,role_id:"",menu_text:["","图片","字体图标"],article_tag_all:[]},a}return R()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e,t,a=this;this.fetchArticleColumnList(),this.props.dispatch((e="",t=function(e){console.log("res",e),a.setState({article_tag_all:e.article_tag_all})},function(){J.a.get("/article-tag/all",e).then((function(e){t&&t(e)}))}))}},{key:"render",value:function(){var e=this,t=this.props.stateArticleColumn,a=this.state,n=a.loading,r=a.is_create,s=this.props.form.getFieldDecorator,o={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return G.a.createElement("div",{className:"layout-main"},G.a.createElement("div",{className:"layout-main-title"},G.a.createElement(p.a,null,G.a.createElement(p.a.Item,{href:"#/manager/index"},G.a.createElement(v.a,{type:"home"})),G.a.createElement(p.a.Item,{href:"#/manager/index"},G.a.createElement("span",null,"主页")),G.a.createElement(p.a.Item,{href:"#"},G.a.createElement("span",null,"文章管理")),G.a.createElement(p.a.Item,null,"文章专栏"))),G.a.createElement("div",{className:"layout-nav-btn"},G.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",onClick:function(){return e.showModal(0)}},"创建专栏")),G.a.createElement("div",{className:"card article-column"},G.a.createElement("div",{className:"card-body"},G.a.createElement(M.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"填写专栏",visible:this.state.modal_visible_edit},G.a.createElement(P.a,{className:"from-view",onSubmit:this.handleSubmit},G.a.createElement(X,_()({},o,{label:"专栏名"}),s("name",{rules:[{required:!0,message:"请输入专栏名！",whitespace:!0}]})(G.a.createElement(q.a,{placeholder:"专栏名"}))),G.a.createElement(X,_()({},o,{label:"专栏名单词"}),s("en_name",{rules:[{required:!0,message:"请输入专栏名单词！",whitespace:!0}]})(G.a.createElement(q.a,{placeholder:"专栏名单词"}))),G.a.createElement(X,_()({},o,{label:"专栏名图标"}),s("icon",{rules:[{required:!0,message:"请输入专栏名图标！",whitespace:!0}]})(G.a.createElement(q.a,{placeholder:"专栏名图标"}))),G.a.createElement(X,_()({},o,{label:"专栏下属专题"}),s("tag_ids",{rules:[{required:!0,message:"请选择文章专栏下属专题!",type:"array"}]})(G.a.createElement(Y.a,{mode:"multiple",placeholder:"请选择文章专栏下属专题"},this.state.article_tag_all.map((function(e){return G.a.createElement(Q,{key:e.tag_id},e.name)}))))),G.a.createElement(X,_()({},o,{label:"排序"}),s("sort")(G.a.createElement(m.a,null))),G.a.createElement(X,_()({},o,{hasFeedback:!0,label:"专栏描述"}),s("description",{rules:[{required:!0,message:"请输入专栏描述"}]})(G.a.createElement($,{placeholder:"请输入专栏描述",type:"text"}))),G.a.createElement(X,_()({},o,{label:"是否首页显示"}),s("is_home",{valuePropName:"checked"})(G.a.createElement(u.a,null))),G.a.createElement(X,_()({},o,{label:"是否有效"}),s("enable",{valuePropName:"checked"})(G.a.createElement(u.a,null))),G.a.createElement(X,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:6}}},G.a.createElement(l.a,{className:"register-btn",htmlType:"submit",type:"primary"},r?"创建专栏":"更新")))),G.a.createElement(c.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"column_id"}),G.a.createElement(i.a,{style:{marginTop:"20px"},message:"备注信息",description:"文章专栏与文章标题之间的关系是，文章专栏下可以有多个文章标签，一个文章标签可以从属于多个文章专栏，\r 创建的文章专栏如果不选择下属标题，默认是关闭状态，只有下属标题大于0，才会开放",type:"info",showIcon:!0}))))}}]),t}(G.a.Component),te=P.a.create()(ee);t.default=Object(H.b)((function(e){return{stateArticleColumn:e.stateArticleColumn}}))(te)},1211:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=(a(1134),a(1135)),l=a.n(s),o=(a(1153),a(1154)),u=a.n(o),f=a(1127),m=a.n(f),d=(a(1128),a(1129)),_=a.n(d),g=(a(279),a(15)),p=a.n(g),h=a(1130),v=a.n(h),y=a(1131),b=a.n(y),E=a(70),x=a.n(E),w=a(71),k=a.n(w),N=a(72),C=a.n(N),S=a(73),T=a.n(S),I=a(451),O=a.n(I),A=a(74),L=a.n(A),j=(a(449),a(1124)),D=a.n(j),F=(a(1125),a(1126)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(450),a(280)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=(a(1176),a(138)),K=a(139),G=(M.a.Option,q.a.Item),H=R.a.confirm,J=(D.a.TextArea,function(e){function t(e){var a;return x()(this,t),(a=C()(this,T()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!1}),a.props.dispatch({type:"SET_PICTURE_INFO",data:e}),a.props.form.setFieldsValue({picture_title:e.picture_title,description:e.description,picture_url:e.picture_url,enable:e.enable});var t=[{uid:-1,status:"done",url:e.picture_url}];a.setState({fileList:t})},a._delete=function(e){a.props.dispatch({type:"SET_PICTURE_INFO",data:e}),H({title:"确认要删除此标签吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){a.fetchDeletePicture({picture_id:a.props.statePicture.current_info.picture_id})},onCancel:function(){console.log("Cancel")}})},a.handleChange=function(e){var t=e.fileList;t=(t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.data.filename),e}))).filter((function(e){return!e.response||"success"===e.response.state})),a.setState({fileList:t})},a.TablePageChange=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchPictureList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.props.form.resetFields(),a.setState({modal_visible_edit:!0,is_create:!0,fileList:[]})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,n){e||(t?a.fetchCreatePicture(n):a.fetchUpdatePicture(n))}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.normFile=function(e){return Array.isArray(e)?e:e&&e.fileList},a.validateToNextPassword=function(e,t,n){var i=a.props.form;t&&a.state.confirmDirty&&i.validateFields(["confirm"],{force:!0}),n()},a.fetchCreatePicture=function(e){var t,n;a.props.dispatch((t=e,n=function(e){K.a.message_success("创建图片成功"),a.fetchPictureList(),a.setState({modal_visible_edit:!1})},function(e){Y.a.post("/picture/create",t).then((function(e){n&&n(e)}))}))},a.fetchUpdatePicture=function(e){var t,n;a.props.dispatch((t=Object.assign({picture_id:a.props.statePicture.current_info.picture_id},e),n=function(e){K.a.message_success("修改图片成功"),a.fetchPictureList(),a.setState({modal_visible_edit:!1})},function(){Y.a.post("/picture/update",t).then((function(e){n&&n(e)}))}))},a.fetchDeletePicture=function(e){var t,n;a.props.dispatch((t=e,n=function(e){K.a.message_success("删除图片成功"),a.fetchPictureList()},function(){Y.a.post("/picture/delete",t).then((function(e){n&&n(e)}))}))},a.fetchPictureList=function(){var e=O()(a);a.setState({loading:!0});var t,n,i=a.state.pagination.current;a.props.dispatch((t={params:{page:i}},n=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=i,e.setState({loading:!1,pagination:a})},function(e){Y.a.get("/picture/list",t).then((function(t){return n&&n(t),e({type:"GET_PICTURE_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return P.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"图片标题",dataIndex:"picture_title",key:"picture_title"},{title:"图片说明",dataIndex:"description",key:"description"},{title:"图片地址",dataIndex:"picture_url",key:"picture_url"},{title:"图片演示",dataIndex:"picture_url",key:"picture_show",render:function(e,t){return P.a.createElement("div",{className:"admin-table-img-show"},P.a.createElement("img",{src:t.picture_url,alt:""}))}},{title:"是否可用",dataIndex:"enable",key:"enable",render:function(e,t){return P.a.createElement("div",{className:"table-is-login"},e?P.a.createElement(p.a,{type:"check-circle"}):P.a.createElement(p.a,{type:"close-circle"}))}},{title:"操作",key:"action",render:function(e,t){return P.a.createElement("div",{className:"operation-btn"},P.a.createElement("button",{onClick:function(){a._edit(t)},size:"small",type:"primary",className:"btn btn-info"},P.a.createElement(p.a,{type:"edit"})),P.a.createElement("button",{className:"btn btn-light",onClick:function(){a._delete(t)},size:"small"},P.a.createElement(p.a,{type:"delete"})))}}],pagination:{current:1},loading:!1,confirmDirty:!1,modal_visible_edit:!1,modal_visible_authority:!1,is_create:!0,menu_text:["","首页轮播图","首页广告"],upload_prop:{name:"file",action:"/api-admin/v1/upload/picture",headers:{"x-access-token":localStorage.box_tokens},onChange:a.handleChange,listType:"picture-card"},fileList:[]},a}return L()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.fetchPictureList()}},{key:"render",value:function(){var e=this,t=this.props.statePicture,a=this.state,n=a.loading,r=a.is_create,s=this.props.form.getFieldDecorator,o={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(_.a,null,P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement(p.a,{type:"home"})),P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(_.a.Item,{href:"#"},P.a.createElement("span",null,"网站管理")),P.a.createElement(_.a.Item,null,"图片管理"))),P.a.createElement("div",{className:"layout-nav-btn"},P.a.createElement("button",{className:"btn btn-danger",icon:"plus",type:"primary",onClick:function(){return e.showModal(0)}},"创建图片")),P.a.createElement("div",{className:"card picture-view"},P.a.createElement("div",{className:"card-body"},P.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"填写内容",visible:this.state.modal_visible_edit},P.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit},P.a.createElement(G,m()({},o,{label:"图片标题"}),s("picture_title",{rules:[{required:!0,message:"请输入图片标题！",whitespace:!0}]})(P.a.createElement(D.a,{placeholder:"图片标题"}))),P.a.createElement(G,m()({},o,{label:"图片说明"}),s("description",{rules:[{required:!0,message:"图片说明！",whitespace:!0}]})(P.a.createElement(D.a,{placeholder:"图片说明"}))),P.a.createElement(G,m()({},o,{label:"Upload"}),s("picture_url",{getValueFromEvent:this.normFile})(P.a.createElement(u.a,m()({},this.state.upload_prop,{fileList:this.state.fileList}),P.a.createElement("div",null,P.a.createElement(p.a,{type:"plus"}),P.a.createElement("div",{className:"ant-upload-text"},"Upload"))))),P.a.createElement(G,m()({},o,{label:"是否有效"}),s("enable",{valuePropName:"checked"})(P.a.createElement(l.a,null))),P.a.createElement(G,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},P.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},r?"创建标签":"更新")))),P.a.createElement(i.a,{columns:this.state.columns,dataSource:t.list,loading:n,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"picture_id"}))))}}]),t}(P.a.Component)),W=q.a.create()(J);t.default=Object(V.b)((function(e){return{statePicture:e.statePicture}}))(W)},1212:function(e,t,a){"use strict";a.r(t);a(187);var n=a(140),i=a.n(n),r=(a(449),a(1124)),c=a.n(r),s=(a(279),a(15)),l=a.n(s),o=a(70),u=a.n(o),f=a(71),m=a.n(f),d=a(72),_=a.n(d),g=a(73),p=a.n(g),h=a(74),v=a.n(h),y=(a(1122),a(1123)),b=a.n(y),E=a(1),x=a.n(E),w=a(75),k=a(139),N=(a(138),a(189)),C=a.n(N),S=function(e,t){return function(a){C.a.post("/api-admin/v1/sign-in",e).then((function(e){t&&t(e.data)}))}},T=(a(1166),b.a.Item),I=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=_()(this,(e=p()(t)).call.apply(e,[this].concat(i)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||a.props.dispatch(S(t,(function(e){"success"===e.state?(localStorage.box_tokens=e.token,a.props.history.push("/")):k.a.message_error(e.message)})))}))},a}return v()(t,e),m()(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return x.a.createElement("div",{id:"admin-sign-in"},x.a.createElement("div",{className:"admin-sign-in-view"},x.a.createElement("div",{className:"admin-sign-in-header"},x.a.createElement("h2",null,"Admin")),x.a.createElement(b.a,{className:"from-view",onSubmit:this.handleSubmit},x.a.createElement(T,{hasFeedback:!0},e("account",{rules:[{required:!0,message:"请输入你的账户！"}]})(x.a.createElement(c.a,{className:"from-view-input",placeholder:"账户",prefix:x.a.createElement(l.a,{type:"user"})}))),x.a.createElement(T,{hasFeedback:!0},e("password",{rules:[{required:!0,message:"请输入密码！"}]})(x.a.createElement(c.a,{placeholder:"密码",className:"from-view-input",prefix:x.a.createElement(l.a,{type:"lock"}),type:"password"}))),x.a.createElement(T,null,x.a.createElement(i.a,{className:"sign-in-btn",htmlType:"submit",type:"primary"},"登录")))))}}]),t}(x.a.Component),O=b.a.create()(I);t.default=Object(w.b)((function(e){return{stateTitle:e}}))(O)},1213:function(e,t,a){"use strict";a.r(t);a(1132);var n=a(1133),i=a.n(n),r=(a(187),a(140)),c=a.n(r),s=a(1127),l=a.n(s),o=(a(1128),a(1129)),u=a.n(o),f=(a(279),a(15)),m=a.n(f),d=(a(452),a(453)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=a(70),b=a.n(y),E=a(71),x=a.n(E),w=a(72),k=a.n(w),N=a(73),C=a.n(N),S=a(451),T=a.n(S),I=a(74),O=a.n(I),A=(a(449),a(1124)),L=a.n(A),j=(a(1125),a(1126)),D=a.n(j),F=(a(1122),a(1123)),R=a.n(F),U=(a(450),a(280)),q=a.n(U),z=a(1),M=a.n(z),B=a(75),P=(a(1172),a(138)),V=a(139),Y=a(1161),K=q.a.Option,G=R.a.Item,H=(D.a.confirm,L.a.TextArea,function(e){function t(e){var a;return b()(this,t),(a=k()(this,C()(t).call(this,e)))._edit=function(e){a.setState({modal_visible_edit:!0,is_create:!1,edit_status_val:String(e.status)}),a.props.dispatch({type:"SET_ARTICLE_BLOG_INFO",data:e}),a.props.form.setFieldsValue(Object.assign({},e,{status:String(e.status)}))},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchArticleBlogList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault();a.state.is_create;a.props.form.validateFieldsAndScroll((function(e,t){e||(console.log("Received values of form: ",t),a.fetchUpdateArticleBlog(t))}))},a.fetchUpdateArticleBlog=function(e){var t,n;a.props.dispatch((t=Object.assign({blog_id:a.props.stateArticleBlog.current_info.blog_id},e),n=function(e){V.a.message_success("修改专栏成功"),a.fetchArticleBlogList(),a.setState({modal_visible_edit:!1})},function(){P.a.post("/article-blog/update",t).then((function(e){n&&n(e)}))}))},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a.resetBarFrom=function(){a.setState({name_val:"",status_val:""},(function(){a.fetchArticleBlogList()}))},a.getParams=function(){var e=a.state;return{name:e.name_val,status:e.status_val}},a.fetchArticleBlogList=function(){var e=T()(a),t=a.getParams();a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n={params:Object.assign({page:r},t)},i=function(t){var a=Object.assign({},e.state.pagination);a.total=t.count,a.current=r,e.setState({loading:!1,pagination:a})},function(e){P.a.get("/article-blog/list",n).then((function(t){return i&&i(t),e({type:"GET_ARTICLE_BLOG_LIST",data:t})}))}))},a.state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return M.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"专栏名",dataIndex:"name",key:"name"},{title:"专栏英文名字",dataIndex:"en_name",key:"en_name"},{title:"专栏图标演示",dataIndex:"icon",key:"icon",render:function(e,t){return M.a.createElement("div",{className:"avatar img-preview"},t.icon?M.a.createElement("img",{src:t.icon,alt:""}):"")}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return M.a.createElement(_.a,{className:"table-article-tag-list",color:"red"},a.state.otherStatusListText[t.status])}},{title:"备注",dataIndex:"description",key:"description"},{title:"审核被拒绝的原因",dataIndex:"rejection_reason",key:"rejection_reason"},{title:"操作",key:"action",render:function(e,t){return M.a.createElement("div",{className:"operation-btn"},M.a.createElement("button",{onClick:function(){a._edit(t)},className:"btn btn-info",size:"small",type:"primary"},M.a.createElement(m.a,{type:"edit"})))}}],pagination:{current:1},loading:!1,modal_visible_edit:!1,otherStatusList:Y.e,otherStatusListText:Y.f,is_create:!0,edit_status_val:"",status_val:"",name_val:""},a}return O()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchArticleBlogList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=(t.status_list,t.status_val),r=t.name_val,s=t.is_create,o=t.edit_status_val,f=this.props.stateArticleBlog,d=this.props.form.getFieldDecorator,_={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return M.a.createElement("div",{className:"layout-main"},M.a.createElement("div",{className:"layout-main-title"},M.a.createElement(u.a,null,M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement(m.a,{type:"home"})),M.a.createElement(u.a.Item,{href:"#/manager/index"},M.a.createElement("span",null,"主页")),M.a.createElement(u.a.Item,{href:"#"},M.a.createElement("span",null,"文章管理")),M.a.createElement(u.a.Item,null,"个人专栏"))),M.a.createElement(D.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改个人专栏",visible:this.state.modal_visible_edit},M.a.createElement(R.a,{className:"from-view",onSubmit:this.handleSubmit},M.a.createElement(G,l()({},_,{label:"个人专栏名"}),d("name",{rules:[{required:!0,message:"请输入个人专栏名！",whitespace:!0}]})(M.a.createElement(L.a,{disabled:!0,placeholder:"个人专栏名"}))),M.a.createElement(G,l()({},_,{hasFeedback:!0,label:"状态"}),d("status",{rules:[{required:!0,message:"请选择状态！"}]})(M.a.createElement(q.a,{placeholder:"状态",onChange:function(t){e.setState({edit_status_val:t})}},Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(K,{key:t},e.state.otherStatusListText[t])}))))),Number(o)===this.state.otherStatusList.reviewFail?M.a.createElement(G,l()({},_,{label:"拒绝的原因"}),d("rejection_reason",{rules:[{required:!0,message:"请输入拒绝的原因！",whitespace:!0}]})(M.a.createElement(L.a,{placeholder:"文章专栏被拒绝的原因"}))):"",M.a.createElement(G,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},M.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},s?"创建专栏":"更新")))),M.a.createElement("div",{className:"card"},M.a.createElement("div",{className:"card-body"},M.a.createElement("div",{className:"xsb-operation-menu"},M.a.createElement(R.a,{layout:"inline"},M.a.createElement(G,{label:"个人专题标题"},M.a.createElement(L.a,{value:r,onChange:function(t){e.changeVal(t.target.value,"name_val")}})),M.a.createElement(G,{label:"状态"},M.a.createElement(q.a,{className:"select-view",value:n,onChange:function(t){e.changeVal(t,"status_val")}},M.a.createElement(K,{value:""},"全部"),Object.keys(this.state.otherStatusListText).map((function(t){return M.a.createElement(K,{key:t},e.state.otherStatusListText[t])})))),M.a.createElement(R.a.Item,null,M.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchArticleBlogList},"搜索"),M.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),M.a.createElement(i.a,{columns:this.state.columns,dataSource:f.list,loading:a,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"blog_id"}))))}}]),t}(M.a.Component)),J=R.a.create()(H);t.default=Object(B.b)((function(e){return{stateArticleBlog:e.stateArticleBlog}}))(J)},1214:function(e,t,a){"use strict";a.r(t);a(1136);var n,i,r=a(1137),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=(a(187),a(140)),u=a.n(o),f=a(1127),m=a.n(f),d=(a(449),a(1124)),_=a.n(d),g=(a(1128),a(1129)),p=a.n(g),h=a(1130),v=a.n(h),y=a(1131),b=a.n(y),E=(a(279),a(15)),x=a.n(E),w=(a(452),a(453)),k=a.n(w),N=a(70),C=a.n(N),S=a(71),T=a.n(S),I=a(72),O=a.n(I),A=a(73),L=a.n(A),j=a(451),D=a.n(j),F=a(74),R=a.n(F),U=(a(1125),a(1126)),q=a.n(U),z=(a(1122),a(1123)),M=a.n(z),B=(a(450),a(280)),P=a.n(B),V=a(1),Y=a.n(V),K=a(75),G=a(1160),H=(a(1187),a(138)),J=a(1161),W=a(139),Q=P.a.Option,X=M.a.Item,Z=q.a.confirm,$=(n=Object(K.b)((function(e){return{stateBooks:e.stateBooks}})),Object(G.a)(i=n(i=function(e){function t(e){var a;return C()(this,t),(a=O()(this,L()(t).call(this,e))).state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return Y.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"小书标题",dataIndex:"title",key:"title",render:function(e,t){return Y.a.createElement("a",{className:"article-title",target:"_blank",href:"/book/".concat(t.books_id)},t.title)}},{title:"创建时间",dataIndex:"create_dt",key:"create_dt"},{title:"小书封面演示",dataIndex:"cover_img",key:"cover_img",render:function(e,t){return Y.a.createElement("div",{className:"avatar img-preview"},t.cover_img?Y.a.createElement("img",{src:t.cover_img,alt:""}):"")}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return Y.a.createElement(k.a,{className:"table-article-tag-list",color:"orange"},a.state.statusListText[t.status])}},{title:"阅读数",dataIndex:"read_count",key:"read_count",render:function(e,t){return Y.a.createElement(k.a,{className:"table-article-tag-list",color:"green"},t.read_count)}},{title:"评论数",dataIndex:"comment_count",key:"comment_count",render:function(e,t){return Y.a.createElement(k.a,{className:"table-article-tag-list",color:"green"},t.comment_count)}},{title:"拒绝的原因",dataIndex:"rejection_reason",key:"rejection_reason",render:function(e,t){return Y.a.createElement("div",null,Number(t.status)===a.state.statusList.reviewFail?t.rejection_reason:"")}},{title:"操作",key:"action",render:function(e,t){return Y.a.createElement("div",{className:"operation-btn"},Y.a.createElement("button",{onClick:function(){a.editUser(t)},className:"btn btn-info",size:"small",type:"primary"},Y.a.createElement(x.a,{type:"edit"})),Y.a.createElement("button",{className:"btn btn-light",onClick:function(){a.deleteBooks(t)},size:"small"},Y.a.createElement(x.a,{type:"delete"})))}}],pagination:{current:1},modal_visible_edit:!1,loading:!1,statusList:J.g,statusListText:J.h,title_val:"",status_val:"",edit_status_val:""},a.TablePageChange=function(){var e=b()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchBooksList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.fetchUserEdit(t)}))},a.fetchBooksDelete=function(e){var t,n;a.props.dispatch((t=e,n=function(e){W.a.message_success("删除小书成功"),a.fetchBooksList()},function(){H.a.post("/books/delete",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state;return{title:e.title_val,status:e.status_val}},a.fetchBooksList=function(){var e=a.getParams(),t=D()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){H.a.post("/books/list",n).then((function(t){return i&&i(t),e({type:"GET_BOOKS_LIST",data:t})}))}))},a.fetchUserEdit=function(e){var t,n;a.props.dispatch((t=Object.assign({books_id:a.props.stateBooks.current_info.books_id},e),n=function(e){W.a.message_success("修改小书成功"),a.fetchBooksList(),a.setState({modal_visible_edit:!1})},function(){H.a.post("/books/update",t).then((function(e){n&&n(e)}))}))},a.resetBarFrom=function(){a.setState({title_val:"",status_val:""},(function(){a.fetchBooksList()}))},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a}return R()(t,e),T()(t,[{key:"componentDidMount",value:function(){this.fetchBooksList()}},{key:"editUser",value:function(e){console.log("val",e),this.setState({modal_visible_edit:!0,edit_status_val:String(e.status)}),this.props.form.setFieldsValue({status:String(e.status),rejection_reason:e.rejection_reason}),this.props.dispatch({type:"BOOKS_SET_CURRENT_INFO",data:e})}},{key:"deleteBooks",value:function(e){var t=this;this.props.dispatch({type:"BOOKS_SET_CURRENT_INFO",data:e}),Z({title:"确认要删除此小书吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.fetchBooksDelete({books_id:t.props.stateBooks.current_info.books_id})},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.title_val,i=t.status_val,r=t.edit_status_val,s=this.props.stateBooks,o=void 0===s?{}:s,f=this.props.form.getFieldDecorator,d={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return Y.a.createElement("div",{className:"layout-main"},Y.a.createElement("div",{className:"layout-main-title"},Y.a.createElement(p.a,null,Y.a.createElement(p.a.Item,{href:"#/manager/index"},Y.a.createElement(x.a,{type:"home"})),Y.a.createElement(p.a.Item,{href:"#/manager/index"},Y.a.createElement("span",null,"主页")),Y.a.createElement(p.a.Item,{href:"#"},Y.a.createElement("span",null,"小书管理")),Y.a.createElement(p.a.Item,null,"小书汇总"))),Y.a.createElement("div",{className:"admin-article card"},Y.a.createElement("div",{className:"card-body"},Y.a.createElement("div",{className:"xsb-operation-menu"},Y.a.createElement(M.a,{layout:"inline"},Y.a.createElement(X,{label:"小书标题"},Y.a.createElement(_.a,{value:n,onChange:function(t){e.changeVal(t.target.value,"title_val")}})),Y.a.createElement(X,{label:"状态"},Y.a.createElement(P.a,{className:"select-view",value:i,onChange:function(t){e.changeVal(t,"status_val")}},Y.a.createElement(Q,{value:""},"全部"),Object.keys(this.state.statusListText).map((function(t){return Y.a.createElement(Q,{key:t},e.state.statusListText[t])})))),Y.a.createElement(M.a.Item,null,Y.a.createElement("button",{type:"primary",className:"btn btn-danger",onClick:this.fetchBooksList},"搜索"),Y.a.createElement("button",{type:"primary",className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),Y.a.createElement(q.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改小书",visible:this.state.modal_visible_edit},Y.a.createElement(M.a,{className:"from-view",onSubmit:this.handleSubmit},Y.a.createElement(X,m()({},d,{hasFeedback:!0,label:"状态"}),f("status",{rules:[{required:!0,message:"请选择状态！"}]})(Y.a.createElement(P.a,{placeholder:"状态",onChange:function(t){e.setState({edit_status_val:t})}},Object.keys(this.state.statusListText).map((function(t){return Y.a.createElement(Q,{key:t},e.state.statusListText[t])}))))),Number(r)===J.g.reviewFail?Y.a.createElement(X,m()({},d,{label:"拒绝的原因"}),f("rejection_reason",{rules:[{required:!0,message:"请输入拒绝的原因！",whitespace:!0}]})(Y.a.createElement(_.a,{placeholder:"小书被拒绝的原因"}))):"",Y.a.createElement(X,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},Y.a.createElement(u.a,{className:"register-btn",htmlType:"submit",type:"primary"},"更新")))),Y.a.createElement(l.a,{columns:this.state.columns,dataSource:o.list,loading:a,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"books_id"})),Y.a.createElement(c.a,{style:{marginTop:"20px"},message:"备注信息",description:"小书发表完成后状态是审核中，是仅对自己可见的，审核不通过也是仅自己可见，并且会标注审核不通过，更改为审核通过的小书对所有人开放，\r 这种方式是人工审核的，暂时采用这种方案，后续会更改",type:"info",showIcon:!0})))}}]),t}(Y.a.Component))||i)||i),ee=M.a.create()($);t.default=ee},1215:function(e,t,a){"use strict";a.r(t);a(1136);var n,i,r=a(1137),c=a.n(r),s=(a(1132),a(1133)),l=a.n(s),o=a(1127),u=a.n(o),f=(a(449),a(1124)),m=a.n(f),d=(a(1128),a(1129)),_=a.n(d),g=a(1130),p=a.n(g),h=a(1131),v=a.n(h),y=(a(279),a(15)),b=a.n(y),E=(a(452),a(453)),x=a.n(E),w=a(70),k=a.n(w),N=a(71),C=a.n(N),S=a(72),T=a.n(S),I=a(73),O=a.n(I),A=a(451),L=a.n(A),j=a(74),D=a.n(j),F=(a(1125),a(1126)),R=a.n(F),U=(a(1122),a(1123)),q=a.n(U),z=(a(450),a(280)),M=a.n(z),B=a(1),P=a.n(B),V=a(75),Y=a(1160),K=(a(1169),a(138)),G=a(139),H=a(1161),J=M.a.Option,W=q.a.Item,Q=R.a.confirm,X=(n=Object(V.b)((function(e){return{stateArticle:e.stateArticle}})),Object(Y.a)(i=n(i=function(e){function t(e){var a;return k()(this,t),(a=T()(this,O()(t).call(this,e))).state={columns:[{title:"序号",dataIndex:"index",key:"index",render:function(e,t,n){return P.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(a.state.pagination.current-1))+n+1)}},{title:"标题",dataIndex:"title",key:"title",render:function(e,t){return P.a.createElement("a",{className:"article-title",target:"_blank",href:"/p/".concat(t.aid)},t.title)}},{title:"概要",dataIndex:"excerpt",key:"excerpt"},{title:"所属标签",dataIndex:"tag_ids",key:"tag_ids",render:function(e,t){return P.a.createElement("div",{className:"table-article-tag-view"},a.state.article_tag_all.map((function(e,a){return t.tag_ids.split(",").map((function(t,a){if(e.tag_id===t)return P.a.createElement(x.a,{className:"table-article-tag-list",key:a,color:"orange"},e.name)}))})))}},{title:"创建时间",dataIndex:"create_dt",key:"create_dt"},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return P.a.createElement(x.a,{className:"table-article-tag-list",color:"orange"},a.state.statusListText[t.status])}},{title:"类型",dataIndex:"type",key:"type",render:function(e,t){return P.a.createElement(x.a,{className:"table-article-tag-list",color:"red"},a.state.articleTypeText[t.type])}},{title:"来源",dataIndex:"source",key:"source",render:function(e,t){return P.a.createElement(x.a,{className:"table-article-tag-list",color:"red"},a.state.source_list[Number(t.source)])}},{title:"阅读数",dataIndex:"read_count",key:"read_count",render:function(e,t){return P.a.createElement(x.a,{className:"table-article-tag-list",color:"green"},t.read_count)}},{title:"评论数",dataIndex:"comment_count",key:"comment_count",render:function(e,t){return P.a.createElement(x.a,{className:"table-article-tag-list",color:"green"},t.comment_count)}},{title:"拒绝的原因",dataIndex:"rejection_reason",key:"rejection_reason",render:function(e,t){return P.a.createElement("div",null,Number(t.status)===a.state.statusList.reviewFail?t.rejection_reason:"")}},{title:"操作",key:"action",render:function(e,t){return P.a.createElement("div",{className:"operation-btn"},P.a.createElement("button",{onClick:function(){a.editUser(t)},className:"btn btn-info",size:"small",type:"primary"},P.a.createElement(b.a,{type:"edit"})),P.a.createElement("button",{className:"btn btn-light",onClick:function(){a.deleteArticle(t)},size:"small"},P.a.createElement(b.a,{type:"delete"})))}}],pagination:{current:1},modal_visible_edit:!1,loading:!1,statusList:H.g,statusListText:H.h,articleType:H.a,articleTypeText:H.b,source_list:["","原创","转载"],title_val:"",status_val:"",type_val:"",source_val:"",edit_status_val:"",article_tag_all:[]},a.TablePageChange=function(){var e=v()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetchArticleList(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.fetchUserEdit(t)}))},a.fetchArticleDelete=function(e){var t,n;a.props.dispatch((t=e,n=function(e){G.a.message_success("删除文章成功"),a.fetchArticleList()},function(){K.a.post("/article/delete",t).then((function(e){n&&n(e)}))}))},a.getParams=function(){var e=a.state,t=e.title_val,n=e.status_val,i=e.type_val;return{title:t,source:e.source_val,status:n,type:i}},a.fetchArticleList=function(){var e=a.getParams(),t=L()(a);a.setState({loading:!0});var n,i,r=a.state.pagination.current;a.props.dispatch((n=Object.assign({page:r},e),i=function(e){var a=Object.assign({},t.state.pagination);a.total=e.count,a.current=r,t.setState({loading:!1,pagination:a})},function(e){K.a.post("/article/list",n).then((function(t){return i&&i(t),e({type:"GET_ARTICLE_LIST",data:t})}))}))},a.fetchUserEdit=function(e){var t,n;a.props.dispatch((t=Object.assign({aid:a.props.stateArticle.current_info.aid},e),n=function(e){G.a.message_success("修改文章成功"),a.fetchArticleList(),a.setState({modal_visible_edit:!1})},function(){K.a.post("/article/edit",t).then((function(e){n&&n(e)}))}))},a.resetBarFrom=function(){a.setState({title_val:"",source_val:"",status_val:"",type_val:""},(function(){a.fetchArticleList()}))},a.changeVal=function(e,t){var n={};n[t]=e,a.setState(n)},a}return D()(t,e),C()(t,[{key:"componentDidMount",value:function(){var e,t,a=this;this.fetchArticleList(),this.props.dispatch((e="",t=function(e){console.log("res",e),a.setState({article_tag_all:e.article_tag_all})},function(){K.a.get("/article-tag/all",e).then((function(e){t&&t(e)}))}))}},{key:"editUser",value:function(e){console.log("val",e),this.setState({modal_visible_edit:!0,edit_status_val:String(e.status)}),this.props.form.setFieldsValue({status:String(e.status),type:String(e.type),source:String(e.source),rejection_reason:e.rejection_reason,tag_ids:e.tag_ids?e.tag_ids.split(","):[]}),this.props.dispatch({type:"ARTICLE_SET_CURRENT_INFO",data:e})}},{key:"deleteArticle",value:function(e){var t=this;this.props.dispatch({type:"ARTICLE_SET_CURRENT_INFO",data:e}),Q({title:"确认要删除此文章吗？",content:"此操作不可逆转",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.fetchArticleDelete({aid:t.props.stateArticle.current_info.aid})},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=(t.statusListText,t.articleTypeText,t.statusList),i=t.source_list,r=t.title_val,s=t.status_val,o=t.type_val,f=t.source_val,d=t.edit_status_val,g=this.props.stateArticle,p=void 0===g?{}:g,h=this.props.form.getFieldDecorator,v={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return P.a.createElement("div",{className:"layout-main"},P.a.createElement("div",{className:"layout-main-title"},P.a.createElement(_.a,null,P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement(b.a,{type:"home"})),P.a.createElement(_.a.Item,{href:"#/manager/index"},P.a.createElement("span",null,"主页")),P.a.createElement(_.a.Item,{href:"#"},P.a.createElement("span",null,"文章管理")),P.a.createElement(_.a.Item,null,"文章汇总"))),P.a.createElement("div",{className:"admin-article card"},P.a.createElement("div",{className:"card-body"},P.a.createElement("div",{className:"xsb-operation-menu"},P.a.createElement(q.a,{layout:"inline"},P.a.createElement(W,{label:"文章标题"},P.a.createElement(m.a,{value:r,onChange:function(t){e.changeVal(t.target.value,"title_val")}})),P.a.createElement(W,{label:"状态"},P.a.createElement(M.a,{className:"select-view",value:s,onChange:function(t){e.changeVal(t,"status_val")}},P.a.createElement(J,{value:""},"全部"),Object.keys(this.state.statusListText).map((function(t){return P.a.createElement(J,{key:t},e.state.statusListText[t])})))),P.a.createElement(W,{label:"类型"},P.a.createElement(M.a,{className:"select-view",value:o,onChange:function(t){e.changeVal(t,"type_val")}},P.a.createElement(J,{value:""},"全部"),Object.keys(this.state.articleTypeText).map((function(t){return P.a.createElement(J,{key:t},e.state.articleTypeText[t])})))),P.a.createElement(W,{label:"来源："},P.a.createElement(M.a,{className:"select-view",value:f,onChange:function(t){e.changeVal(t,"source_val")}},P.a.createElement(J,{value:""},"全部"),i.map((function(e,t){return e?P.a.createElement(J,{value:t,key:t},e):""})))),P.a.createElement(q.a.Item,null,P.a.createElement("button",{className:"btn btn-danger",onClick:this.fetchArticleList},"搜索"),P.a.createElement("button",{className:"btn btn-primary",onClick:this.resetBarFrom},"重置")))),P.a.createElement(R.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"修改文章",visible:this.state.modal_visible_edit},P.a.createElement(q.a,{className:"from-view",onSubmit:this.handleSubmit},P.a.createElement(W,u()({},v,{hasFeedback:!0,label:"状态"}),h("status",{rules:[{required:!0,message:"请选择状态！"}]})(P.a.createElement(M.a,{placeholder:"状态",onChange:function(t){e.setState({edit_status_val:t})}},Object.keys(this.state.statusListText).map((function(t){return P.a.createElement(J,{key:t},e.state.statusListText[t])}))))),Number(d)===n.reviewFail?P.a.createElement(W,u()({},v,{label:"拒绝的原因"}),h("rejection_reason",{rules:[{required:!0,message:"请输入拒绝的原因！",whitespace:!0}]})(P.a.createElement(m.a,{placeholder:"文章被拒绝的原因"}))):"",P.a.createElement(W,u()({},v,{hasFeedback:!0,label:"类型"}),h("type",{rules:[{required:!0,message:"请选择类型！"}]})(P.a.createElement(M.a,{placeholder:"类型"},Object.keys(this.state.articleTypeText).map((function(t){return P.a.createElement(J,{key:t},e.state.articleTypeText[t])}))))),P.a.createElement(W,u()({},v,{label:"所属标签"}),h("tag_ids",{rules:[{required:!0,message:"请选择所属标签!",type:"array"}]})(P.a.createElement(M.a,{mode:"multiple",placeholder:"请选择所属标签"},this.state.article_tag_all.map((function(e){return P.a.createElement(J,{key:e.tag_id},e.name)}))))),P.a.createElement(W,u()({},v,{hasFeedback:!0,label:"来源"}),h("source",{rules:[{required:!0,message:"请选择来源！"}]})(P.a.createElement(M.a,{placeholder:"来源"},i.map((function(e,t){return e?P.a.createElement(J,{key:t},e):""}))))),P.a.createElement(W,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},P.a.createElement("button",{className:"btn btn btn-danger register-btn"},"更新")))),P.a.createElement(l.a,{columns:this.state.columns,dataSource:p.list,loading:a,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"aid"})),P.a.createElement(c.a,{style:{marginTop:"20px"},message:"备注信息",description:"文章发表完成后状态是审核中，是仅对自己可见的，审核不通过也是仅自己可见，并且会标注审核不通过，更改为审核通过的文章对所有人开放，\r 这种方式是人工审核的，暂时采用这种方案，后续会更改",type:"info",showIcon:!0})))}}]),t}(P.a.Component))||i)||i),Z=q.a.create()(X);t.default=Z}}]);